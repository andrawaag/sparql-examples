@prefix sh: <http://www.w3.org/ns/shacl#> .
@prefix rdf: <http://www.w3.org/1999/02/22-rdf-syntax-ns#> .
@prefix rdfs: <http://www.w3.org/2000/01/rdf-schema#> .
@prefix dcterms: <http://purl.org/dc/terms/> .
@prefix schema: <https://schema.org/> .

<https://www.wikidata.org/#query-f6713f331178eed855992eee618d36ad> a sh:SPARQLExecutable,
    sh:SPARQLSelectExecutable;
  rdfs:comment """This is an archive of past discussions. Do not edit the contents of this page. If you wish to start a new discussion or revive an old one, please do so on the current talk page. Contents 1 Garrigas 2 Malformed entries related to Semantic Scholar 3 Removing unnecessary disambiguation brackets 4 Identifiant National Football League 5 Replace imported from Wikimedia project (P143)=Minor Planet Center (Q522039) 6 Replace imported from Wikimedia project (P143)=Landesfilmsammlung Baden-Württemberg (Q24469969), Haus des Dokumentarfilms (Q1590879) 7 Replace imported from Wikimedia project (P143)=Museu d'Art Jaume Morera (Q5476145) 8 Replace imported from Wikimedia project (P143)=Italian National Institute of Statistics (Q214195) 9 Replace imported from Wikimedia project (P143)=Historical Commission of the Bavarian Academy of Sciences (Q1419226) 10 Replace imported from Wikimedia project (P143)=Natural History Museum, London (Q309388) 11 fix ALLCAPS of items imported from MIC 12 Year-qualifier for \"students count\" (P2196) values 13 Replace imported from Wikimedia project (P143)=Historic England (Q19604421) 14 Replace imported from Wikimedia project (P143)=Municipal Institute of Museums of Reus (Q23687366) 15 replace reference URL (P854) = Petscan 16 Create person items from Wikisource entries (matr. Oxonienses) 17 Add info about subject to items with generic title \"obituary\" 18 Bulk create items for given names in Russian (Cyrillic script) 19 Replace pr:P1343 with pr:P248 20 Untitled requests about Wikinews 21 Accademia delle Scienze di Torino multiple references 22 Trailing space (\" \") in labels 23 Malformed entries related to \"Swiss National Sound Archives ID\" (P6770) Garrigas Request date: 26 November 2020, by: Infovarius Link to discussions justifying the request  Task description There is a lot of sources which mention Garrigàs (Q11329) which looks like a glitch in some import. Look how many links to this small town. This \"source\" is used in many different properties. I've tried to get a list but I failed... Licence of data to import (if relevant) Discussion  Request process This section was archived on a request by: seems to be solved --- Jura 07:45, 3 December 2020 (UTC) Malformed entries related to Semantic Scholar Properties used: Semantic Scholar author ID (P4012)   SELECT ?item ?l WHERE { ?item wdt:P4012 [] ; rdfs:label ?l . FILTER( lang(?l) = \"en\" && REGEX( ?l, \"^.+ [A-Z][A-Z]$\") ) } LIMIT 2000 Try it!The above finds ca. 2000 entries. I think it would be worth checking if these don't need to be converted from: <surname>, <initials of given name> to: <initials of given name> <surname> --- Jura 21:06, 20 December 2020 (UTC) Challenge taken. Script is running. I'll move the old style names to the alias, and reformat all existing label-languages. Edoderoo (talk) 13:43, 29 December 2020 (UTC) Done You're query now remains empty. Edoderoo (talk) 15:05, 29 December 2020 (UTC) I think that this discussion is resolved and can be archived. If you disagree, don't hesitate to replace this template with your comment. Matěj Suchánek (talk) 10:01, 13 March 2021 (UTC) Removing unnecessary disambiguation brackets Request date: 18 December 2020, by: Bencemac Link to discussions justifying the request Guideline of Help:Label#Disambiguation information belongs in the description Task description Please help me clean some Hungarian labels, where country (P17) is Hungary (Q28) and instance of (P31) is a subclass of church building (Q16970). Previously, the labels were correct and followed Help:Labels, but now, thanks to a user, they are totally messed up with unnecessary disambiguation brackets. I started undoing their wrong edits, but there are too many to handle them one by one.Please change Name of the church (location) to Name of the church like this. Thanks in advance! Bencemac (talk) 09:22, 18 December 2020 (UTC) Discussion  Request process Accepted by (Edoderoo (talk) 19:33, 29 December 2020 (UTC)) and under process Done Task completed (19:33, 29 December 2020 (UTC)) This section was archived on a request by: --- Jura 09:39, 30 March 2021 (UTC) Identifiant National Football League Request date: 3 December 2020, by: Sismarinho NFL.com ID (former scheme) (P3539) (Sorry french) Bonjour, il y a un problème avec les identifiants NFL de nombreuses fiches depuis que l'architecture du site de la NFL a changé. Désormains c'est le nom de la personne. Par exemple pour Bronko Nagurski (Q927663) c'est bronko-nagurski. Un bot peut-il faire cette requête ? Task description Licence of data to import (if relevant) Discussion Please propose a new property for the new scheme. Once done, this could be filled by bot or in some other way. --- Jura 07:45, 3 December 2020 (UTC) Request process Replace imported from Wikimedia project (P143)=Minor Planet Center (Q522039) SELECT ?item ?itemLabel ?prop ?propLabel ?value ?valueLabel ?st
WHERE
{
  ?st prov:wasDerivedFrom/pr:P143 wd:Q522039 .
  hint:Prior hint:rangeSafe true .
  ?item ?p ?st .
  ?prop wikibase:claim ?p ; wikibase:statementProperty ?ps .
  ?st ?ps ?value 
  SERVICE wikibase:label { bd:serviceParam wikibase:language \"[AUTO_LANGUAGE],en\". }
}
LIMIT 100
 Try it! As imported from Wikimedia project (P143) should only be used with WMF projects, the above should be replaced with some other property, e.g. \"stated in\" or \"publisher\", and possibly a different value. The query currently finds ca. 48000 statements --- Jura 09:57, 6 December 2020 (UTC) Replace imported from Wikimedia project (P143)=Landesfilmsammlung Baden-Württemberg (Q24469969), Haus des Dokumentarfilms (Q1590879) SELECT ?item ?itemLabel ?prop ?propLabel ?value ?valueLabel ?st
WHERE
{
  ?st prov:wasDerivedFrom/pr:P143 wd:Q24469969 .
  hint:Prior hint:rangeSafe true .
  ?item ?p ?st .
  ?prop wikibase:claim ?p ; wikibase:statementProperty ?ps .
  ?st ?ps ?value 
  SERVICE wikibase:label { bd:serviceParam wikibase:language \"[AUTO_LANGUAGE],en\". }
}
LIMIT 100
 Try it! SELECT ?item ?itemLabel ?prop ?propLabel ?value ?valueLabel ?st
WHERE
{
  ?st prov:wasDerivedFrom/pr:P143 wd:Q1590879 .
  hint:Prior hint:rangeSafe true .
  ?item ?p ?st .
  ?prop wikibase:claim ?p ; wikibase:statementProperty ?ps .
  ?st ?ps ?value 
  SERVICE wikibase:label { bd:serviceParam wikibase:language \"[AUTO_LANGUAGE],en\". }
}
LIMIT 100
 Try it! As imported from Wikimedia project (P143) should only be used with WMF projects, the above should be replaced with some other property, e.g. \"stated in\" or \"publisher\", and possibly a different value. The two queries currently find ca. 7800 statements --- Jura 09:57, 6 December 2020 (UTC) Replace imported from Wikimedia project (P143)=Museu d'Art Jaume Morera (Q5476145) SELECT ?item ?itemLabel ?prop ?propLabel ?value ?valueLabel ?st
WHERE
{
  ?st prov:wasDerivedFrom/pr:P143 wd:Q5476145 .
  hint:Prior hint:rangeSafe true .
  ?item ?p ?st .
  ?prop wikibase:claim ?p ; wikibase:statementProperty ?ps .
  ?st ?ps ?value 
  SERVICE wikibase:label { bd:serviceParam wikibase:language \"[AUTO_LANGUAGE],en\". }
}
LIMIT 100
 Try it! As imported from Wikimedia project (P143) should only be used with WMF projects, the above should be replaced with some other property, e.g. \"stated in\" or \"publisher\", and possibly a different value. The query currently finds ca. 7800 statements --- Jura 09:57, 6 December 2020 (UTC) Replace imported from Wikimedia project (P143)=Italian National Institute of Statistics (Q214195) SELECT ?item ?itemLabel ?prop ?propLabel ?value ?valueLabel ?st
WHERE
{
  ?st prov:wasDerivedFrom/pr:P143 wd:Q214195 .
  hint:Prior hint:rangeSafe true .
  ?item ?p ?st .
  ?prop wikibase:claim ?p ; wikibase:statementProperty ?ps .
  ?st ?ps ?value 
  SERVICE wikibase:label { bd:serviceParam wikibase:language \"[AUTO_LANGUAGE],en\". }
}
LIMIT 100
 Try it! As imported from Wikimedia project (P143) should only be used with WMF projects, the above should be replaced with some other property, e.g. \"stated in\" or \"publisher\", and possibly a different value. The query currently finds ca. 8000 statements --- Jura 09:57, 6 December 2020 (UTC) Replace imported from Wikimedia project (P143)=Historical Commission of the Bavarian Academy of Sciences (Q1419226) SELECT ?item ?itemLabel ?prop ?propLabel ?value ?valueLabel ?st
WHERE
{
  ?st prov:wasDerivedFrom/pr:P143 wd:Q1419226 .
  hint:Prior hint:rangeSafe true .
  ?item ?p ?st .
  ?prop wikibase:claim ?p ; wikibase:statementProperty ?ps .
  ?st ?ps ?value 
  SERVICE wikibase:label { bd:serviceParam wikibase:language \"[AUTO_LANGUAGE],en\". }
}
LIMIT 100
 Try it! As imported from Wikimedia project (P143) should only be used with WMF projects, the above should be replaced with some other property, e.g. \"stated in\" or \"publisher\", and possibly a different value. The query currently finds ca. 8400 statements --- Jura 09:57, 6 December 2020 (UTC) Replace imported from Wikimedia project (P143)=Natural History Museum, London (Q309388) SELECT ?item ?itemLabel ?prop ?propLabel ?value ?valueLabel ?st
WHERE
{
  ?st prov:wasDerivedFrom/pr:P143 wd:Q309388 .
  hint:Prior hint:rangeSafe true .
  ?item ?p ?st .
  ?prop wikibase:claim ?p ; wikibase:statementProperty ?ps .
  ?st ?ps ?value 
  SERVICE wikibase:label { bd:serviceParam wikibase:language \"[AUTO_LANGUAGE],en\". }
}
LIMIT 100
 Try it! As imported from Wikimedia project (P143) should only be used with WMF projects, the above should be replaced with some other property, e.g. \"stated in\" or \"publisher\", and possibly a different value. The query currently finds ca. 23000 statements --- Jura 09:57, 6 December 2020 (UTC) fix ALLCAPS of items imported from MIC Request date: 5 October 2020, by: Vladimir Alexiev Link to discussions justifying the request https://www.wikidata.org/wiki/Topic:Vv1zfojnvvo11oj8 initiated by @Jura1: Task description I have imported a bunch of items with MIC market code (P7534) (stock exchanges and the like), see https://editgroups.toolforge.org/b/OR/ab49ffaac2/.Some of them come with ALLCAPS names or descriptions, so they are listed at https://www.wikidata.org/wiki/Wikidata:Database_reports/Complex_constraint_violations/P7534.Can someone help with fixing the names and descriptions to \"Title Case\"? (I thought descriptions should be in \"Sentence case\" but very often they also contain the exchange name)Please note that prepositions should be in lower case, eg \"BOLSA DE COMERCIO DE SANTA FE\" should be come \"Bolsa de Comercio de Santa Fe\". Licence of data to import (if relevant) Discussion The linked constraint page lists 10 items with all-caps labels and 10 items with all-caps descriptions. You should fix this small number by hand as writing a bot for this would take hours and the correct (automatic) handling of prepositions is difficult. --Pyfisch (talk) 10:14, 5 October 2020 (UTC) 10 is just a selection. There are many more. --- Jura 10:18, 14 October 2020 (UTC) The task is more difficult since there are many acronyms that must be left as is (eg APA, OTF, OTP, NASDAQ, STOXX, etc). So the bot should only change (capitalize) usual words found in a dictionary --Vladimir Alexiev (talk) 02:49, 11 December 2020 (UTC) Request process Year-qualifier for \"students count\" (P2196) values Properties used: count of students (P2196)   , point in time (P585)   SELECT DISTINCT ?item ?itemLabel ?sl
{
  ?item wdt:P2196 ?value .
  FILTER NOT EXISTS { ?item p:P2196 / pq:P585 [] }
  ?item wikibase:sitelinks ?sl .
  SERVICE wikibase:label { bd:serviceParam wikibase:language \"[AUTO_LANGUAGE],en\". }
} Try it!The items above have student counts, but no point in time (P585)-qualifier (currently 2440 of 56228 items with the property). It would be good to find a way to add the year to these.I noticed some come from dewiki infoboxes which don't include a year either. --- Jura 06:34, 29 November 2020 (UTC)So @Jura1: where can we get the years from? Also, the way the query is written doesn't show the full extent of the problem. If a University has 1 claim with year and 100 without year, you won't count it --Vladimir Alexiev (talk) 02:55, 11 December 2020 (UTC) I'm not sure about a possible source. Maybe another language Wikipedia infobox, Wikipedia article text or an external source. Agree that more statements might need completion, but the above are most in need of it. --- Jura 07:16, 11 December 2020 (UTC) Replace imported from Wikimedia project (P143)=Historic England (Q19604421) SELECT ?item ?itemLabel ?prop ?propLabel ?value ?valueLabel ?st
WHERE
{
  ?st prov:wasDerivedFrom/pr:P143 wd:Q19604421 .
  hint:Prior hint:rangeSafe true .
  ?item ?p ?st .
  ?prop wikibase:claim ?p ; wikibase:statementProperty ?ps .
  ?st ?ps ?value 
  SERVICE wikibase:label { bd:serviceParam wikibase:language \"[AUTO_LANGUAGE],en\". }
}
LIMIT 100
 Try it! As imported from Wikimedia project (P143) should only be used with WMF projects, the above should be replaced with some other property, e.g. \"stated in\" or \"publisher\", and possibly a different value. The query currently finds ca. 4300 statements --- Jura 09:57, 6 December 2020 (UTC) @Robevans123: if possible, would you make an item we could use together with stated in (P248)? See Help:Sources#Databases. I see you added in there, but maybe also the others. --- Jura 13:23, 18 December 2020 (UTC) Replace imported from Wikimedia project (P143)=Municipal Institute of Museums of Reus (Q23687366) SELECT ?item ?itemLabel ?prop ?propLabel ?value ?valueLabel ?st
WHERE
{
  ?st prov:wasDerivedFrom/pr:P143 wd:Q23687366 .
  hint:Prior hint:rangeSafe true .
  ?item ?p ?st .
  ?prop wikibase:claim ?p ; wikibase:statementProperty ?ps .
  ?st ?ps ?value 
  SERVICE wikibase:label { bd:serviceParam wikibase:language \"[AUTO_LANGUAGE],en\". }
}
LIMIT 100
 Try it! As imported from Wikimedia project (P143) should only be used with WMF projects, the above should be replaced with some other property, e.g. \"stated in\" or \"publisher\", and possibly a different value. The query currently finds ca. 5800 statements --- Jura 09:57, 6 December 2020 (UTC) @ESM: similar to the previous, would you make an item with could use as value for stated in (P248) ? --- Jura 13:25, 18 December 2020 (UTC) replace reference URL (P854) = Petscan SELECT *
WHERE
{
  hint:Query hint:optimizer \"None\".
  ?ref pr:P854 ?value .
  FILTER( REGEX( STR( ?value ), \"petscan\" )  )
  ?statement prov:wasDerivedFrom ?ref;
}
LIMIT 200
 Try it! reference URL (P854) could be replaced with Wikimedia import URL (P4656). --- Jura 12:35, 6 December 2020 (UTC) Sample edit [1]. Not sure how to do it with wikibase-cli --- Jura 13:40, 18 December 2020 (UTC) Create person items from Wikisource entries (matr. Oxonienses) SELECT ?item ?itemLabel ?itemDescription
{
	?item wdt:P1433 wd:Q19036877 . 
	FILTER NOT EXISTS { ?item wdt:P921 [] }
	SERVICE wikibase:label { bd:serviceParam wikibase:language \"en\" }
}
 Try it! For the above, it could be interesting to create an item for each person without main subject (P921) (currently 27400).Sample: Everest, Robert (Q94820208) with s:Everest,_Robert → Robert Everest (Q104057081).for info: @Miraclepine, Charles Matthews: --- Jura 19:20, 9 December 2020 (UTC) Of course I have wondered about this. I think the proportion of people there who are not really notable would be at least 50%. That isn't a definitive argument, but I regard having to sift through numerous country vicars to do a disambiguation run as fairly undesirable. It would be rather better to have them in mix'n'match by some device. That would correspond to what has gone in with Cambridge alumni. Charles Matthews (talk) 19:39, 9 December 2020 (UTC) I tried to find a way to use Mix'n'match for Wikisource entries, but people seemed to think that it's not desirable. Maybe some filtering should be done beforehand, but it shouldn't be too complex to identify duplicates based on YOB and name once the items created. --- Jura 19:44, 9 December 2020 (UTC) Maybe ORCID is the better comparison in terms of notability. --- Jura 13:30, 18 December 2020 (UTC) Add info about subject to items with generic title \"obituary\" Items used: scholarly article (Q13442814)   Properties used: instance of (P31)   , main subject (P921)   , published in (P1433)   """@en;
  dcterms:isPartOf <https://www.wikidata.org//wiki/Wikidata:Bot_requests/Archive/2020/12>;
  dcterms:license <https://creativecommons.org/licenses/by-sa/4.0/>;
  sh:prefixes _:genid-4e694113159d4e3db4a1a913894a81d86983-wikidata_prefixes;
  schema:target <https://query.wikidata.org/sparql/>;
  sh:select """PREFIX wikibase: <http://wikiba.se/ontology#>
PREFIX wdt: <http://www.wikidata.org/prop/direct/>
PREFIX wd: <http://www.wikidata.org/entity/>
PREFIX rdfs: <http://www.w3.org/2000/01/rdf-schema#>
PREFIX bd: <http://www.bigdata.com/rdf#>
SELECT DISTINCT ?item ?itemLabel ?itemDescription ?pubvenueLabel
{
	?item wdt:P31 wd:Q13442814 . 
    { ?item rdfs:label \"OBITUARY\"@en } UNION { ?item rdfs:label \"Obituary\"@en }
	FILTER NOT EXISTS { ?item wdt:P921 [] }
    OPTIONAL { ?item wdt:P1433 ?pubvenue }
	SERVICE wikibase:label { bd:serviceParam wikibase:language \"en\" }
}""" .
