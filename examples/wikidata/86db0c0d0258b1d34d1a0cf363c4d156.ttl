@prefix sh: <http://www.w3.org/ns/shacl#> .
@prefix rdf: <http://www.w3.org/1999/02/22-rdf-syntax-ns#> .
@prefix rdfs: <http://www.w3.org/2000/01/rdf-schema#> .
@prefix dcterms: <http://purl.org/dc/terms/> .
@prefix schema: <https://schema.org/> .

<https://www.wikidata.org/#query-86db0c0d0258b1d34d1a0cf363c4d156> a sh:SPARQLExecutable,
    sh:SPARQLSelectExecutable;
  rdfs:comment """This is an archive of past discussions. Do not edit the contents of this page. If you wish to start a new discussion or revive an old one, please do so on the current talk page. Contents 1 Request to .. (2022-04-06) 2 Request to add author data from author name string (2022-04-16) 3 Request to import P4055 from enwiki (2022-04-05) 4 Tracking parameters in reference URLs 5 Request to add stats: number of statements with a single external-id (2022-02-09) 6 Set preferred rank on census population of Quebec's municipalities 7 Request to add Russian descriptions (2022-04-10) Request to .. (2022-04-06) Request date: 6 April 2022, by: ValterVB Link to discussions justifying the request  Task description Remove P31=Q21191270 from items extraxct from following query, because already exist P31=Q61220733 that is a subclass of Q21191270. SELECT ?item ?label WHERE {
  ?item wdt:P31 wd:Q21191270.
  ?item wdt:P31 wd:Q61220733.
  SERVICE wikibase:label {
    bd:serviceParam wikibase:language \"[AUTO_LANGUAGE],en\" . 
    ?item rdfs:label ?label
  }
}
 Try it! Discussion  Request process Accepted by (ValterVB (talk) 13:17, 26 April 2022 (UTC)) and under process Task completed (13:17, 26 April 2022 (UTC)) I found the time to do it. --ValterVB (talk) 13:17, 26 April 2022 (UTC)  I think that this discussion is resolved and can be archived. If you disagree, don't hesitate to replace this template with your comment. ValterVB (talk) 13:17, 26 April 2022 (UTC) Request to add author data from author name string (2022-04-16) Request date: 16 April 2022, by: Urirnal Link to discussions justifying the request  Task description 서민(Min Seo) is a famous South Korean parasitologist.find scholarly articles by P2093='Min Seo' and add P50= wd:Q16169902I found that every founded these articles in wikidata are of 서민(Min Seo, Q16169902)qualifiers of P2093='Min Seo' should be also copied to P50=wd:Q16169902 #Min Seo
SELECT ?item ?itemLabel 
WHERE 
{
  ?item wdt:P2093 'Min Seo'. # <span lang=\"en\" dir=\"ltr\" class=\"mw-content-ltr\">Min Seo</span>
  SERVICE wikibase:label { bd:serviceParam wikibase:language \"[AUTO_LANGUAGE],en\". } # <span lang=\"en\" dir=\"ltr\" class=\"mw-content-ltr\">Helps get the label in your language, if not, then en language</span>
}
 Try it! Discussion Urirnal (talk) 05:31, 16 April 2022 (UTC) Hi Urirnal! This can be done using the Author Disambiguator. See the tool here: https://author-disambiguator.toolforge.org I've gotten this done for Min Seo, feel free to use it for any other authors you think this might apply to! :) PangolinMexico (talk) 15:10, 4 May 2022 (UTC) Request process Accepted by (PangolinMexico (talk) 4 May 2022 15:10 UTC) and under process Task completed (15:12, 4 May 2022 (UTC))  I think that this discussion is resolved and can be archived. If you disagree, don't hesitate to replace this template with your comment. PangolinMexico (talk) 15:14, 4 May 2022 (UTC) Request to import P4055 from enwiki (2022-04-05) Request date: 5 April 2022, by: MSGJ Task description Request to import data to Norwegian List of Lights ID (P4055) from pages in en:Category:Norsk fyrliste not in Wikidata using parameter countrynumber in Template:Infobox lighthouse. Thanks — Martin (MSGJ · talk) 19:38, 5 April 2022 (UTC) Discussion Some values may not conform to the expected format \\d{6} but I will get those fixed later — Martin (MSGJ · talk) 19:52, 5 April 2022 (UTC) Is anyone able to help with this? Thanks — Martin (MSGJ · talk) 15:41, 20 April 2022 (UTC) @MSGJ Is this doing what you want? You can use the \"remove prefix\" field to remove part of the string if required... Vojtěch Dostál (talk) 18:01, 3 July 2022 (UTC) That is amazing! Can't believe I didn't know about this tool — Martin (MSGJ · talk) 20:03, 3 July 2022 (UTC) @MSGJ Yes it's a nice tool :) Use it wisely, do not import junk :-). Vojtěch Dostál (talk) 20:18, 3 July 2022 (UTC) Request process  I think that this discussion is resolved and can be archived. If you disagree, don't hesitate to replace this template with your comment. Vojtěch Dostál (talk) 20:18, 3 July 2022 (UTC) Tracking parameters in reference URLs Do we have a bot that makes edits like this, to trim fbclid and other tracking parameters from URLs in citations, and if not, could someone's bot do that, please? Andy Mabbett (Pigsonthewing); Talk to Andy; Andy's edits 10:20, 24 April 2022 (UTC) @Matěj Suchánek Do I remember correctly that you bot has been doing this? Vojtěch Dostál (talk) 17:56, 3 July 2022 (UTC) @Vojtěch Dostál: Yes and no. Not on Wikidata: [1]. --Matěj Suchánek (talk) 07:17, 4 July 2022 (UTC) I ran a db query to look at how many instances there might be, using a couple of the commonest tracking parameters: utm_source and fbclid. It's only looking at links from item pages, but some of the links could be property values rather than reference URLs. MariaDB [wikidatawiki_p]> select count(el_to) from externallinks JOIN page on el_from=page_id and page_namespace=0 where el_to like '%utm\\_source=%' or el_to like '%fbclid=%';
+--------------+
| count(el_to) |
+--------------+
|         2224 |
+--------------+
1 row in set (58.034 sec) For scale, there are nearly 80,000,000 rows in the external links table. I don't mind writing a script to remove these tracking params, and it could perhaps be run once a week. Handy list of tracking params here William Avery (talk) 15:16, 29 July 2022 (UTC)I have knocked up a script and done a couple of test edits: remove utm parameters remove fbclids Will file at WD:BRFA after a little more tidying and testing. William Avery (talk) 18:39, 31 July 2022 (UTC) Request process BRFA filed at WD:BRFA § William Avery Bot 9 William Avery (talk) 11:39, 3 August 2022 (UTC) Task completed: Backlog cleared; now checking recent changes, e.g. here.. (15:41, 15 August 2022 (UTC)) I think that this discussion is resolved and can be archived. If you disagree, don't hesitate to replace this template with your comment. William Avery (talk) 15:41, 15 August 2022 (UTC) Request to add stats: number of statements with a single external-id (2022-02-09) Request date: 9 February 2022, by: Jura1 Task description Currently a bot generates statistics of property uses, as main statements among others. This is included in property documentation on talk pages. For external-id properties, it could be interesting to have a slightly modified version: one that shows the number of items with a single external-id. Sample 1: VIAF ID (P214) has currently 2,791,472 uses as main statement 15395 (0.6 %) have only a VIAF ID. Sample 2: IMDb ID (P345) has currently 801,061 uses 61,681 (7.7 %) have only an IMDB ID. Sample 3: TCM Movie Database film ID (P2631) has currently 31,697 uses 2 (0 %) have only this id. Discussion  Request process Set preferred rank on census population of Quebec's municipalities Request date: 6 April 2022, by: YanikB Link to discussions justifying the request  Task description 1-remove Preferred rank of population (P1082) for 2016 census. Items used: local municipality of Quebec (Q3327873)   , unorganized area in Quebec (Q81066200)   , census (Q39825)   Properties used: instance of (P31)   , subclass of (P279)   , population (P1082)   , determination method (P459)   , point in time (P585)   """@en;
  dcterms:isPartOf <https://www.wikidata.org//wiki/Wikidata:Bot_requests/Archive/2022/04>;
  dcterms:license <https://creativecommons.org/licenses/by-sa/4.0/>;
  sh:prefixes _:genid-4e694113159d4e3db4a1a913894a81d87868-wikidata_prefixes;
  schema:target <https://query.wikidata.org/sparql/>;
  sh:select """PREFIX xsd: <http://www.w3.org/2001/XMLSchema#>
PREFIX wdt: <http://www.wikidata.org/prop/direct/>
PREFIX wd: <http://www.wikidata.org/entity/>
PREFIX ps: <http://www.wikidata.org/prop/statement/>
PREFIX pq: <http://www.wikidata.org/prop/qualifier/>
PREFIX p: <http://www.wikidata.org/prop/>
SELECT ?item 
WHERE {
       {?item wdt:P31/wdt:P279* wd:Q3327873} UNION {?item wdt:P31 wd:Q81066200}
       ?item p:P1082 [ ps:P1082 ?population; pq:P459 wd:Q39825; pq:P585  ?date  ] .
       FILTER (?date  = \"2016-01-01T00:00:00Z\"^^xsd:dateTime )
}
LIMIT 1500""" .
