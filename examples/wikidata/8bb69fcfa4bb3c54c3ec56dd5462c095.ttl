@prefix sh: <http://www.w3.org/ns/shacl#> .
@prefix rdf: <http://www.w3.org/1999/02/22-rdf-syntax-ns#> .
@prefix rdfs: <http://www.w3.org/2000/01/rdf-schema#> .
@prefix dcterms: <http://purl.org/dc/terms/> .
@prefix schema: <https://schema.org/> .

<https://www.wikidata.org/#query-8bb69fcfa4bb3c54c3ec56dd5462c095> a sh:SPARQLExecutable,
    sh:SPARQLSelectExecutable;
  dcterms:isPartOf <https://www.wikidata.org//wiki/Wikidata:SPARQL_query_service/queries/examples/lb>,
    <https://www.wikidata.org//wiki/Wikidata:SPARQL_query_service/queries/examples/th>,
    <https://www.wikidata.org//wiki/Wikidata:SPARQL_query_service/queries/examples/eu>,
    <https://www.wikidata.org//wiki/Wikidata:SPARQL_query_service/queries/examples/en-gb>,
    <https://www.wikidata.org//wiki/Wikidata:SPARQL_query_service/queries/examples/vec>,
    <https://www.wikidata.org//wiki/Wikidata:SPARQL_query_service/queries/examples/hy>,
    <https://www.wikidata.org//wiki/Wikidata:SPARQL_query_service/queries/examples/id>,
    <https://www.wikidata.org//wiki/Wikidata:SPARQL_query_service/queries/examples/be-tarask>,
    <https://www.wikidata.org//wiki/Wikidata:SPARQL_query_service/queries/examples/tr>,
    <https://www.wikidata.org//wiki/Wikidata:SPARQL_query_service/queries/examples/ro>,
    <https://www.wikidata.org//wiki/Wikidata:SPARQL_query_service/queries/examples/he>,
    <https://www.wikidata.org//wiki/Wikidata:SPARQL_query_service/queries/examples/zh>,
    <https://www.wikidata.org//wiki/Wikidata:SPARQL_query_service/queries/examples/pt-br>,
    <https://www.wikidata.org//wiki/Wikidata:SPARQL_query_service/queries/examples/si>,
    <https://www.wikidata.org//wiki/Wikidata:SPARQL_query_service/queries/examples/eo>,
    <https://www.wikidata.org//wiki/Wikidata:SPARQL_query_service/queries/examples/da>,
    <https://www.wikidata.org//wiki/Wikidata:SPARQL_query_service/queries/examples/ar>,
    <https://www.wikidata.org//wiki/Wikidata:SPARQL_query_service/queries/examples/ko>,
    <https://www.wikidata.org//wiki/Wikidata:SPARQL_query_service/queries/examples/pl>,
    <https://www.wikidata.org//wiki/Wikidata:SPARQL_query_service/queries/examples/ms>,
    <https://www.wikidata.org//wiki/Wikidata:SPARQL_query_service/queries/examples/sv>,
    <https://www.wikidata.org//wiki/Wikidata:SPARQL_query_service/queries/examples/lt>,
    <https://www.wikidata.org//wiki/Wikidata:SPARQL_query_service/queries/examples/nl>,
    <https://www.wikidata.org//wiki/Wikidata:SPARQL_query_service/queries/examples/ca>,
    <https://www.wikidata.org//wiki/Wikidata:SPARQL_query_service/queries/examples/uk>,
    <https://www.wikidata.org//wiki/Wikidata:SPARQL_query_service/queries/examples/it>,
    <https://www.wikidata.org//wiki/Wikidata:SPARQL_query_service/queries/examples/ja>,
    <https://www.wikidata.org//wiki/Wikidata:SPARQL_query_service/queries/examples/es>,
    <https://www.wikidata.org//wiki/Wikidata:SPARQL_query_service/queries/examples/cs>,
    <https://www.wikidata.org//wiki/Wikidata:SPARQL_query_service/queries/examples/ru>,
    <https://www.wikidata.org//wiki/Wikidata:SPARQL_query_service/queries/examples/de>,
    <https://www.wikidata.org//wiki/Wikidata:SPARQL_query_service/queries/examples/fr>,
    <https://www.wikidata.org//wiki/Wikidata:SPARQL_query_service/queries/examples/en>,
    <https://www.wikidata.org//wiki/Wikidata:SPARQL_query_service/queries/examples>;
  dcterms:license <https://creativecommons.org/licenses/by-sa/4.0/>;
  sh:prefixes _:genid-4e694113159d4e3db4a1a913894a81d846088-wikidata_prefixes, _:genid-4e694113159d4e3db4a1a913894a81d846088-FE3B422E5C39C8E570B09D2E10943DF4,
    _:genid-4e694113159d4e3db4a1a913894a81d846088-4FED1E124CD3A412B8F18EB3B51E8E46, _:genid-4e694113159d4e3db4a1a913894a81d846088-A35E0DB7A60B0843504A9A76EC794019,
    _:genid-4e694113159d4e3db4a1a913894a81d846088-B5CD70E06E047DD2A9697508E98027B1, _:genid-4e694113159d4e3db4a1a913894a81d846088-B165F202CEFC303C185B97CC32F85A4D,
    _:genid-4e694113159d4e3db4a1a913894a81d846088-D4587361D5567709C4A922770D0A7E82, _:genid-4e694113159d4e3db4a1a913894a81d846088-9DC660E15009907E5ED7EE0DC45BCC99,
    _:genid-4e694113159d4e3db4a1a913894a81d846088-0A9908EC2D52F78B25E612EA6CEE21C6, _:genid-4e694113159d4e3db4a1a913894a81d846088-1CD5AADCFAF9CD3F61DD8D8E2A4BDB84,
    _:genid-4e694113159d4e3db4a1a913894a81d846088-C4BED2BB19B1F41106B0D54D268F2D1A, _:genid-4e694113159d4e3db4a1a913894a81d846088-306693D6824E35A0F3C27FA74C526235,
    _:genid-4e694113159d4e3db4a1a913894a81d846088-7CB400EF43B071864BE7B35EBB78D289, _:genid-4e694113159d4e3db4a1a913894a81d846088-814566C2CE05C457F12C6F06D5AB171B,
    _:genid-4e694113159d4e3db4a1a913894a81d846088-ACE06C5BA791DFFFDBB309D22DEC1FF8, _:genid-4e694113159d4e3db4a1a913894a81d846088-0A5B275CA7AF8035C88D8270DECFD59E,
    _:genid-4e694113159d4e3db4a1a913894a81d846088-2A4EBA9B8A7736459DC953C5C9CE3CDD, _:genid-4e694113159d4e3db4a1a913894a81d846088-7C2DCF1FA499819B9448CFFCD72F0967,
    _:genid-4e694113159d4e3db4a1a913894a81d846088-42CF803A5D877C8C4E7AA91067DD3DFE, _:genid-4e694113159d4e3db4a1a913894a81d846088-3672A0F9A3A8823D78AA2E462B7832B9,
    _:genid-4e694113159d4e3db4a1a913894a81d846088-30C04A0EC0749E883EDBCCAB85D7BBA3, _:genid-4e694113159d4e3db4a1a913894a81d846088-81946B87284574C5DAF21AB8E9C6E73F,
    _:genid-4e694113159d4e3db4a1a913894a81d846088-603707C1B31BD79140BC42C291C956E4, _:genid-4e694113159d4e3db4a1a913894a81d846088-0B21238ED0751661BA8851A366C485F5,
    _:genid-4e694113159d4e3db4a1a913894a81d846088-0CD8A2B959430B312A9A52D33211B300, _:genid-4e694113159d4e3db4a1a913894a81d846088-B0CEB384370673C19CFBF686518C3914,
    _:genid-4e694113159d4e3db4a1a913894a81d846088-930210CB18CE6780BB06B7B560367220, _:genid-4e694113159d4e3db4a1a913894a81d846088-831C69A1B1560AAA69123D20EF349D68,
    _:genid-4e694113159d4e3db4a1a913894a81d846088-625BCFFB0FABDE5E974689647D36B428, _:genid-4e694113159d4e3db4a1a913894a81d846088-4C237E5446436E9CF83F2F31FADE8A80,
    _:genid-4e694113159d4e3db4a1a913894a81d846088-064833BBDE33B8F913F724626B93DC0E, _:genid-4e694113159d4e3db4a1a913894a81d846088-1BB40DDF9A65C421B29898158C6E2969,
    _:genid-4e694113159d4e3db4a1a913894a81d846088-0C7731A3146F8A6C1B2333B1C2AE6BCA, _:genid-4e694113159d4e3db4a1a913894a81d846088-F5E2BAC074551058A613FACBB497C1C9;
  schema:target <https://query.wikidata.org/sparql/>;
  sh:select """PREFIX xsd: <http://www.w3.org/2001/XMLSchema#>
PREFIX wdt: <http://www.wikidata.org/prop/direct/>
PREFIX wd: <http://www.wikidata.org/entity/>
PREFIX rdfs: <http://www.w3.org/2000/01/rdf-schema#>
SELECT ?item ?label ?coord ?place
WHERE
{
  VALUES ?type {wd:Q571 wd:Q7725634} # book or literary work
  ?item wdt:P31 ?type .
  ?item wdt:P577 ?date FILTER (?date < \"1830-01-01T00:00:00Z\"^^xsd:dateTime) .
  ?item rdfs:label ?label FILTER (lang(?label) = \"en\")

  OPTIONAL {
    ?item (wdt:P291|wdt:P840) ?place . # publication or narration place is ?place
    ?place wdt:P625 ?coord
  }
}""" .
