@prefix sh: <http://www.w3.org/ns/shacl#> .
@prefix rdf: <http://www.w3.org/1999/02/22-rdf-syntax-ns#> .
@prefix rdfs: <http://www.w3.org/2000/01/rdf-schema#> .
@prefix dcterms: <http://purl.org/dc/terms/> .
@prefix schema: <https://schema.org/> .

<https://www.wikidata.org/#query-cd85b27cdca178c096a6a521d07946f7> a sh:SPARQLExecutable,
    sh:SPARQLSelectExecutable;
  dcterms:isPartOf <https://www.wikidata.org//wiki/User:Charles_Matthews/Queries>;
  dcterms:license <https://creativecommons.org/licenses/by-sa/4.0/>;
  sh:prefixes _:genid-4e694113159d4e3db4a1a913894a81d818914-wikidata_prefixes, _:genid-4e694113159d4e3db4a1a913894a81d818914-534856027DE136753E2F7BCDC5152896;
  schema:target <https://query.wikidata.org/sparql/>;
  sh:select """PREFIX xsd: <http://www.w3.org/2001/XMLSchema#>
PREFIX wikibase: <http://wikiba.se/ontology#>
PREFIX wdt: <http://www.wikidata.org/prop/direct/>
PREFIX wd: <http://www.wikidata.org/entity/>
PREFIX bd: <http://www.bigdata.com/rdf#>
SELECT DISTINCT ?reviewer ?reviewerLabel (SAMPLE(?website) AS ?website) (SAMPLE(?orcid) AS ?orcid) (SAMPLE(?twitter) AS ?twitter) WHERE {
  BIND(wd:Q21198 AS ?field).
  ?subField wdt:P279* ?field.
  ?reviewer wdt:P31 wd:Q5.
  MINUS { ?reviewer wdt:P570 []. }
  ?work wdt:P50 ?reviewer;
        wdt:P577 ?workDate.
  FILTER(?workDate > (NOW() - \"P5Y\"^^xsd:duration)).
  { ?work wdt:P921 ?subField. } UNION 
  { ?reviewer wdt:P101 ?subField. }
  OPTIONAL { ?reviewer wdt:P856 ?website. }
  OPTIONAL { ?reviewer wdt:P496 ?orcid_. BIND(IRI(CONCAT(\"https://orcid.org/\", ?orcid_)) AS ?orcid). }
  OPTIONAL { ?reviewer wdt:P2002 ?twitter_. BIND(IRI(CONCAT(\"https://twitter.com/\", ?twitter_)) AS ?twitter). }
  SERVICE wikibase:label { bd:serviceParam wikibase:language \"en\". }
}
GROUP BY ?reviewer ?reviewerLabel
ORDER BY RAND()""" .
