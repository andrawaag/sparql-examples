@prefix sh: <http://www.w3.org/ns/shacl#> .
@prefix rdf: <http://www.w3.org/1999/02/22-rdf-syntax-ns#> .
@prefix rdfs: <http://www.w3.org/2000/01/rdf-schema#> .
@prefix dcterms: <http://purl.org/dc/terms/> .
@prefix schema: <https://schema.org/> .

<https://www.wikidata.org/#query-e1690c27a26f12c07d8dd4a83df58b72> a sh:SPARQLExecutable,
    sh:SPARQLSelectExecutable;
  dcterms:isPartOf <https://www.wikidata.org//wiki/Wikidata:SPARQL_query_service/queries/examples/lb>,
    <https://www.wikidata.org//wiki/Wikidata:SPARQL_query_service/queries/examples/th>,
    <https://www.wikidata.org//wiki/Wikidata:SPARQL_query_service/queries/examples/eu>,
    <https://www.wikidata.org//wiki/Wikidata:SPARQL_query_service/queries/examples/en-gb>,
    <https://www.wikidata.org//wiki/Wikidata:SPARQL_query_service/queries/examples/vec>,
    <https://www.wikidata.org//wiki/Wikidata:SPARQL_query_service/queries/examples/hy>,
    <https://www.wikidata.org//wiki/Wikidata:SPARQL_query_service/queries/examples/id>,
    <https://www.wikidata.org//wiki/Wikidata:SPARQL_query_service/queries/examples/be-tarask>,
    <https://www.wikidata.org//wiki/Wikidata:SPARQL_query_service/queries/examples/tr>,
    <https://www.wikidata.org//wiki/Wikidata:SPARQL_query_service/queries/examples/ro>,
    <https://www.wikidata.org//wiki/Wikidata:SPARQL_query_service/queries/examples/he>,
    <https://www.wikidata.org//wiki/Wikidata:SPARQL_query_service/queries/examples/zh>,
    <https://www.wikidata.org//wiki/Wikidata:SPARQL_query_service/queries/examples/pt-br>,
    <https://www.wikidata.org//wiki/Wikidata:SPARQL_query_service/queries/examples/si>,
    <https://www.wikidata.org//wiki/Wikidata:SPARQL_query_service/queries/examples/eo>,
    <https://www.wikidata.org//wiki/Wikidata:SPARQL_query_service/queries/examples/da>,
    <https://www.wikidata.org//wiki/Wikidata:SPARQL_query_service/queries/examples/ar>,
    <https://www.wikidata.org//wiki/Wikidata:SPARQL_query_service/queries/examples/ko>,
    <https://www.wikidata.org//wiki/Wikidata:SPARQL_query_service/queries/examples/pl>,
    <https://www.wikidata.org//wiki/Wikidata:SPARQL_query_service/queries/examples/ms>,
    <https://www.wikidata.org//wiki/Wikidata:SPARQL_query_service/queries/examples/sv>,
    <https://www.wikidata.org//wiki/Wikidata:SPARQL_query_service/queries/examples/lt>,
    <https://www.wikidata.org//wiki/Wikidata:SPARQL_query_service/queries/examples/nl>,
    <https://www.wikidata.org//wiki/Wikidata:SPARQL_query_service/queries/examples/ca>,
    <https://www.wikidata.org//wiki/Wikidata:SPARQL_query_service/queries/examples/uk>,
    <https://www.wikidata.org//wiki/Wikidata:SPARQL_query_service/queries/examples/it>,
    <https://www.wikidata.org//wiki/Wikidata:SPARQL_query_service/queries/examples/ja>,
    <https://www.wikidata.org//wiki/Wikidata:SPARQL_query_service/queries/examples/es>,
    <https://www.wikidata.org//wiki/Wikidata:SPARQL_query_service/queries/examples/cs>,
    <https://www.wikidata.org//wiki/Wikidata:SPARQL_query_service/queries/examples/ru>,
    <https://www.wikidata.org//wiki/Wikidata:SPARQL_query_service/queries/examples/de>,
    <https://www.wikidata.org//wiki/Wikidata:SPARQL_query_service/queries/examples/fr>,
    <https://www.wikidata.org//wiki/Wikidata:SPARQL_query_service/queries/examples/en>,
    <https://www.wikidata.org//wiki/Wikidata:SPARQL_query_service/queries/examples>;
  dcterms:license <https://creativecommons.org/licenses/by-sa/4.0/>;
  sh:prefixes _:genid-4e694113159d4e3db4a1a913894a81d831256-wikidata_prefixes, _:genid-4e694113159d4e3db4a1a913894a81d831256-5F7E2046969EB4452FD27A8190A955B3,
    _:genid-4e694113159d4e3db4a1a913894a81d831256-7D6B78694ED8E69A8F6141EAEE4AA387, _:genid-4e694113159d4e3db4a1a913894a81d831256-A7F67A6D88671A1FECDFB84F3B8D66E0,
    _:genid-4e694113159d4e3db4a1a913894a81d831256-97F1662432015BAB24C09C5650F1A218, _:genid-4e694113159d4e3db4a1a913894a81d831256-55956BE3CA61CE0C66EED58BE7DB1A22,
    _:genid-4e694113159d4e3db4a1a913894a81d831256-6065706C8606635A30F28E47A14CBA65, _:genid-4e694113159d4e3db4a1a913894a81d831256-3539A2D25C4F86D83F9B65EF6F70CA7D,
    _:genid-4e694113159d4e3db4a1a913894a81d831256-19625026631C25BF30C69E24E832AA36, _:genid-4e694113159d4e3db4a1a913894a81d831256-5809A1E3794906C0D058BBDD513703CE,
    _:genid-4e694113159d4e3db4a1a913894a81d831256-10C77F724FACDF7A765A10C0AA9139CC, _:genid-4e694113159d4e3db4a1a913894a81d831256-9E632DAABB47A99BE1FBBCC812C3CABD,
    _:genid-4e694113159d4e3db4a1a913894a81d831256-E0CCFA75E9C2EBD51918440E17CFD823, _:genid-4e694113159d4e3db4a1a913894a81d831256-67F44DC11FF918EDD5977D79D3EFFBE4,
    _:genid-4e694113159d4e3db4a1a913894a81d831256-A199258746D100AD81E5B049F0EF7EF0, _:genid-4e694113159d4e3db4a1a913894a81d831256-0AC575801BB2FEB1B79A479FE760DCCB,
    _:genid-4e694113159d4e3db4a1a913894a81d831256-86CBF1EA8D1404AA96D074A95803CCC2, _:genid-4e694113159d4e3db4a1a913894a81d831256-3D6AE7BB08C74BF416D2BE924650B2C4,
    _:genid-4e694113159d4e3db4a1a913894a81d831256-D59D1B49D9AA93A511A930D98A9EF2C2, _:genid-4e694113159d4e3db4a1a913894a81d831256-17B9561923766FF453519AB82D10090F,
    _:genid-4e694113159d4e3db4a1a913894a81d831256-BE7AB67FAE16813F26990B9C9EAC184B, _:genid-4e694113159d4e3db4a1a913894a81d831256-7F50DCBD46DE1842CA662B30C02FF131,
    _:genid-4e694113159d4e3db4a1a913894a81d831256-97B4F1E16A3B9D6BED80764B5493250D, _:genid-4e694113159d4e3db4a1a913894a81d831256-09D5AF888E0F86E7B49C6B8A371B12EC,
    _:genid-4e694113159d4e3db4a1a913894a81d831256-86AA145E43846864A70F53C75A5FB092, _:genid-4e694113159d4e3db4a1a913894a81d831256-E6A30186A92ADB453C79035DBC0D4B92,
    _:genid-4e694113159d4e3db4a1a913894a81d831256-8CAD9B201810B4679F930F7C48F022B6, _:genid-4e694113159d4e3db4a1a913894a81d831256-A376DF1D4D9DBE189AF5158CF7370C35,
    _:genid-4e694113159d4e3db4a1a913894a81d831256-9E06BFF130ACB6F2CC87B82150F976A2, _:genid-4e694113159d4e3db4a1a913894a81d831256-D1EE7A3F805335D1C05123E12E3D46B5,
    _:genid-4e694113159d4e3db4a1a913894a81d831256-A3E8ECF1416AABB25F5E135F51EB99C9, _:genid-4e694113159d4e3db4a1a913894a81d831256-C56E4EE21229344297C112EE2E0C2F4E,
    _:genid-4e694113159d4e3db4a1a913894a81d831256-69E2DA9812AA22ECAE99FC49987EFD78, _:genid-4e694113159d4e3db4a1a913894a81d831256-931EB7EA01629443B38FC5F89B15779D;
  schema:target <https://query.wikidata.org/sparql/>;
  sh:select """PREFIX xsd: <http://www.w3.org/2001/XMLSchema#>
PREFIX wikibase: <http://wikiba.se/ontology#>
PREFIX wdt: <http://www.wikidata.org/prop/direct/>
PREFIX wd: <http://www.wikidata.org/entity/>
PREFIX ps: <http://www.wikidata.org/prop/statement/>
PREFIX pq: <http://www.wikidata.org/prop/qualifier/>
PREFIX p: <http://www.wikidata.org/prop/>
PREFIX bd: <http://www.bigdata.com/rdf#>
SELECT DISTINCT ?actor ?actorLabel ?characterLabel ?movie1Label ?movie2Label WHERE {
  ?movie1 p:P161 [
            ps:P161 ?actor;
            pq:P453 ?character
          ];
          wdt:P577 ?movie1Publication.
  ?movie2 p:P161 [
            ps:P161 ?actor;
            pq:P453 ?character
          ];
          wdt:P577 ?movie2Publication.
  MINUS{?movie1 wdt:P31/wdt:P279? wd:Q24856} # Not a series
  MINUS{?movie2 wdt:P31/wdt:P279? wd:Q24856} # Not a series
  FILTER(?character != wd:Q18086706). # Not as \"themselves\"
  FILTER(?movie1Publication + \"P40Y\"^^xsd:duration < ?movie2Publication) # 40 years between them
  SERVICE wikibase:label { bd:serviceParam wikibase:language \"[AUTO_LANGUAGE],mul,en\". }
}""" .
