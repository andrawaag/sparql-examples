@prefix sh: <http://www.w3.org/ns/shacl#> .
@prefix rdf: <http://www.w3.org/1999/02/22-rdf-syntax-ns#> .
@prefix rdfs: <http://www.w3.org/2000/01/rdf-schema#> .
@prefix dcterms: <http://purl.org/dc/terms/> .
@prefix schema: <https://schema.org/> .

<https://www.wikidata.org/#query-3aadeb5a76159de6740304bb3e1d9dd7> a sh:SPARQLExecutable,
    sh:SPARQLSelectExecutable;
  dcterms:isPartOf <https://www.wikidata.org//wiki/Wikidata:SPARQL_query_service/queries/examples/lb>,
    <https://www.wikidata.org//wiki/Wikidata:SPARQL_query_service/queries/examples/th>,
    <https://www.wikidata.org//wiki/Wikidata:SPARQL_query_service/queries/examples/eu>,
    <https://www.wikidata.org//wiki/Wikidata:SPARQL_query_service/queries/examples/en-gb>,
    <https://www.wikidata.org//wiki/Wikidata:SPARQL_query_service/queries/examples/vec>,
    <https://www.wikidata.org//wiki/Wikidata:SPARQL_query_service/queries/examples/hy>,
    <https://www.wikidata.org//wiki/Wikidata:SPARQL_query_service/queries/examples/id>,
    <https://www.wikidata.org//wiki/Wikidata:SPARQL_query_service/queries/examples/be-tarask>,
    <https://www.wikidata.org//wiki/Wikidata:SPARQL_query_service/queries/examples/tr>,
    <https://www.wikidata.org//wiki/Wikidata:SPARQL_query_service/queries/examples/ro>,
    <https://www.wikidata.org//wiki/Wikidata:SPARQL_query_service/queries/examples/he>,
    <https://www.wikidata.org//wiki/Wikidata:SPARQL_query_service/queries/examples/zh>,
    <https://www.wikidata.org//wiki/Wikidata:SPARQL_query_service/queries/examples/pt-br>,
    <https://www.wikidata.org//wiki/Wikidata:SPARQL_query_service/queries/examples/si>,
    <https://www.wikidata.org//wiki/Wikidata:SPARQL_query_service/queries/examples/eo>,
    <https://www.wikidata.org//wiki/Wikidata:SPARQL_query_service/queries/examples/da>,
    <https://www.wikidata.org//wiki/Wikidata:SPARQL_query_service/queries/examples/ar>,
    <https://www.wikidata.org//wiki/Wikidata:SPARQL_query_service/queries/examples/ko>,
    <https://www.wikidata.org//wiki/Wikidata:SPARQL_query_service/queries/examples/pl>,
    <https://www.wikidata.org//wiki/Wikidata:SPARQL_query_service/queries/examples/ms>,
    <https://www.wikidata.org//wiki/Wikidata:SPARQL_query_service/queries/examples/sv>,
    <https://www.wikidata.org//wiki/Wikidata:SPARQL_query_service/queries/examples/lt>,
    <https://www.wikidata.org//wiki/Wikidata:SPARQL_query_service/queries/examples/ca>,
    <https://www.wikidata.org//wiki/Wikidata:SPARQL_query_service/queries/examples/uk>,
    <https://www.wikidata.org//wiki/Wikidata:SPARQL_query_service/queries/examples/it>,
    <https://www.wikidata.org//wiki/Wikidata:SPARQL_query_service/queries/examples/ja>,
    <https://www.wikidata.org//wiki/Wikidata:SPARQL_query_service/queries/examples/es>,
    <https://www.wikidata.org//wiki/Wikidata:SPARQL_query_service/queries/examples/cs>,
    <https://www.wikidata.org//wiki/Wikidata:SPARQL_query_service/queries/examples/ru>,
    <https://www.wikidata.org//wiki/Wikidata:SPARQL_query_service/queries/examples/de>;
  dcterms:license <https://creativecommons.org/licenses/by-sa/4.0/>;
  sh:prefixes _:genid-4e694113159d4e3db4a1a913894a81d834892-wikidata_prefixes, _:genid-4e694113159d4e3db4a1a913894a81d834892-681D134D549D60C4FD89977C5AFC1ABA,
    _:genid-4e694113159d4e3db4a1a913894a81d834892-F3BB3A08A51934438D9698A6996554EA, _:genid-4e694113159d4e3db4a1a913894a81d834892-73D87AC7079547963E45EDAC9C8E1738,
    _:genid-4e694113159d4e3db4a1a913894a81d834892-90A49438226D2A08BBDB3DE9A1AB52D1, _:genid-4e694113159d4e3db4a1a913894a81d834892-5E92D8302E0134506DE74B259D68B1EC,
    _:genid-4e694113159d4e3db4a1a913894a81d834892-B4B5D63D4330DEDEF396163347DB11BD, _:genid-4e694113159d4e3db4a1a913894a81d834892-D24A26FB74DE735D1ABD8F6403ADCE39,
    _:genid-4e694113159d4e3db4a1a913894a81d834892-460223F8F8F64CD8E44F270A4C21CCEF, _:genid-4e694113159d4e3db4a1a913894a81d834892-13114F0CE0DEFC0CD96BAB2289EADFC0,
    _:genid-4e694113159d4e3db4a1a913894a81d834892-5808052F3F61A89B2908CC1E460AA5E8, _:genid-4e694113159d4e3db4a1a913894a81d834892-9C2CE5DC0E93206F9BEC24A004F6A38E,
    _:genid-4e694113159d4e3db4a1a913894a81d834892-EE76DEC1EC4D77C16F64DE915F80F22C, _:genid-4e694113159d4e3db4a1a913894a81d834892-729C37003B16E8707FCF5E824346112A,
    _:genid-4e694113159d4e3db4a1a913894a81d834892-C1032247835D66A3950E7C7FA5B6A4EA, _:genid-4e694113159d4e3db4a1a913894a81d834892-14B71A33BA53FC4F6322DDE67F51FCD5,
    _:genid-4e694113159d4e3db4a1a913894a81d834892-FB30069771E0AC329DD41F937D9C6260, _:genid-4e694113159d4e3db4a1a913894a81d834892-21A8B7D4A51026BF79DE1D1BF7069F54,
    _:genid-4e694113159d4e3db4a1a913894a81d834892-8FF099EEC49E68F1B39762BF3D1CDA23, _:genid-4e694113159d4e3db4a1a913894a81d834892-464970355CD3835F2A8D2E0051CB5FF4,
    _:genid-4e694113159d4e3db4a1a913894a81d834892-E8ED748C8719BB452CFEA52477E56CEA, _:genid-4e694113159d4e3db4a1a913894a81d834892-B3041788F06A3362434308D8CD9BFF74,
    _:genid-4e694113159d4e3db4a1a913894a81d834892-1E9D3A897C5CD9ECC57CA76833B6A24F, _:genid-4e694113159d4e3db4a1a913894a81d834892-54E81CFA9D87510CD54CCAA0F9DF9C63,
    _:genid-4e694113159d4e3db4a1a913894a81d834892-99946EED8EC898981F76A2A5301D1BCF, _:genid-4e694113159d4e3db4a1a913894a81d834892-38DE706D7388905F011F50C73C900B43,
    _:genid-4e694113159d4e3db4a1a913894a81d834892-8C00707AD4E1AD630C4C2674278300D3, _:genid-4e694113159d4e3db4a1a913894a81d834892-0F7C97728137F3E6AA8BA07277144CB6,
    _:genid-4e694113159d4e3db4a1a913894a81d834892-9A5A8549A1689CB9E8F155C710430A71, _:genid-4e694113159d4e3db4a1a913894a81d834892-A201470C0E2F2DC2CA06D027A7197E5D;
  schema:target <https://query.wikidata.org/sparql/>;
  sh:select """PREFIX wikibase: <http://wikiba.se/ontology#>
PREFIX wdt: <http://www.wikidata.org/prop/direct/>
PREFIX wd: <http://www.wikidata.org/entity/>
PREFIX rdfs: <http://www.w3.org/2000/01/rdf-schema#>
PREFIX bd: <http://www.bigdata.com/rdf#>
#title:<span lang=\"en\" dir=\"ltr\" class=\"mw-content-ltr\">Impressionist painters by number of exhibitions</span>
SELECT DISTINCT ?painter ?painterLabel (count (DISTINCT ?exhibition) as ?exhibition_count)
(group_concat(DISTINCT ?exhibitionLabel; separator=\", \") as ?exhibitions)
WHERE {
  ?painter wdt:P106 wd:Q1028181 . #give me all people with occupation (P106) painter (Q1028181)
  ?painter wdt:P135 wd:Q40415 . #who belonged to the impressionist (Q40415) movement (P135)
  ?painting wdt:P170 ?painter . #the paintings created by (P170) the painter
  ?painting wdt:P608 ?exhibition . #have an exhibition history (P608) at an exhibition
  ?exhibition rdfs:label ?exhibitionLabel . #give me the english Labels of these exhibitions, if possible
  FILTER (lang(?exhibitionLabel) = \"en\")

  SERVICE wikibase:label {bd:serviceParam wikibase:language \"en\".}
} GROUP BY ?painter ?painterLabel""" .
