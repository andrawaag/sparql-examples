@prefix sh: <http://www.w3.org/ns/shacl#> .
@prefix rdf: <http://www.w3.org/1999/02/22-rdf-syntax-ns#> .
@prefix rdfs: <http://www.w3.org/2000/01/rdf-schema#> .
@prefix dcterms: <http://purl.org/dc/terms/> .
@prefix schema: <https://schema.org/> .

<https://www.wikidata.org/#query-9165668a346d276e78fb8466451c403a> a sh:SPARQLExecutable,
    sh:SPARQLSelectExecutable;
  dcterms:isPartOf <https://www.wikidata.org//wiki/Wikidata:SPARQL_query_service/queries/examples/lb>,
    <https://www.wikidata.org//wiki/Wikidata:SPARQL_query_service/queries/examples/th>,
    <https://www.wikidata.org//wiki/Wikidata:SPARQL_query_service/queries/examples/eu>,
    <https://www.wikidata.org//wiki/Wikidata:SPARQL_query_service/queries/examples/en-gb>,
    <https://www.wikidata.org//wiki/Wikidata:SPARQL_query_service/queries/examples/vec>,
    <https://www.wikidata.org//wiki/Wikidata:SPARQL_query_service/queries/examples/hy>,
    <https://www.wikidata.org//wiki/Wikidata:SPARQL_query_service/queries/examples/id>,
    <https://www.wikidata.org//wiki/Wikidata:SPARQL_query_service/queries/examples/be-tarask>,
    <https://www.wikidata.org//wiki/Wikidata:SPARQL_query_service/queries/examples/tr>,
    <https://www.wikidata.org//wiki/Wikidata:SPARQL_query_service/queries/examples/ro>,
    <https://www.wikidata.org//wiki/Wikidata:SPARQL_query_service/queries/examples/he>,
    <https://www.wikidata.org//wiki/Wikidata:SPARQL_query_service/queries/examples/zh>,
    <https://www.wikidata.org//wiki/Wikidata:SPARQL_query_service/queries/examples/pt-br>,
    <https://www.wikidata.org//wiki/Wikidata:SPARQL_query_service/queries/examples/si>,
    <https://www.wikidata.org//wiki/Wikidata:SPARQL_query_service/queries/examples/eo>,
    <https://www.wikidata.org//wiki/Wikidata:SPARQL_query_service/queries/examples/da>,
    <https://www.wikidata.org//wiki/Wikidata:SPARQL_query_service/queries/examples/ar>,
    <https://www.wikidata.org//wiki/Wikidata:SPARQL_query_service/queries/examples/ko>,
    <https://www.wikidata.org//wiki/Wikidata:SPARQL_query_service/queries/examples/pl>,
    <https://www.wikidata.org//wiki/Wikidata:SPARQL_query_service/queries/examples/ms>,
    <https://www.wikidata.org//wiki/Wikidata:SPARQL_query_service/queries/examples/sv>,
    <https://www.wikidata.org//wiki/Wikidata:SPARQL_query_service/queries/examples/lt>,
    <https://www.wikidata.org//wiki/Wikidata:SPARQL_query_service/queries/examples/nl>,
    <https://www.wikidata.org//wiki/Wikidata:SPARQL_query_service/queries/examples/ca>,
    <https://www.wikidata.org//wiki/Wikidata:SPARQL_query_service/queries/examples/uk>,
    <https://www.wikidata.org//wiki/Wikidata:SPARQL_query_service/queries/examples/it>,
    <https://www.wikidata.org//wiki/Wikidata:SPARQL_query_service/queries/examples/ja>,
    <https://www.wikidata.org//wiki/Wikidata:SPARQL_query_service/queries/examples/es>,
    <https://www.wikidata.org//wiki/Wikidata:SPARQL_query_service/queries/examples/cs>,
    <https://www.wikidata.org//wiki/Wikidata:SPARQL_query_service/queries/examples/ru>,
    <https://www.wikidata.org//wiki/Wikidata:SPARQL_query_service/queries/examples/de>,
    <https://www.wikidata.org//wiki/Wikidata:SPARQL_query_service/queries/examples/fr>,
    <https://www.wikidata.org//wiki/Wikidata:SPARQL_query_service/queries/examples/en>,
    <https://www.wikidata.org//wiki/Wikidata:SPARQL_query_service/queries/examples>;
  dcterms:license <https://creativecommons.org/licenses/by-sa/4.0/>;
  sh:prefixes _:genid-4e694113159d4e3db4a1a913894a81d842287-wikidata_prefixes, _:genid-4e694113159d4e3db4a1a913894a81d842287-9F938C23614162B7343B29DE01A00BCC,
    _:genid-4e694113159d4e3db4a1a913894a81d842287-89533493704F0F88E47C90B87C55579F, _:genid-4e694113159d4e3db4a1a913894a81d842287-C937BD3DC52C46C550FCABBF91EF170B,
    _:genid-4e694113159d4e3db4a1a913894a81d842287-07F8597A9BFC4C0834C3D660629AD6BC, _:genid-4e694113159d4e3db4a1a913894a81d842287-55D39867CE6E2EEAD74F1BA086EF18E8,
    _:genid-4e694113159d4e3db4a1a913894a81d842287-FB74516F480DCC054E64952D4E48081D, _:genid-4e694113159d4e3db4a1a913894a81d842287-0D3F706D5FDEDD241A1E0C89E6665BAB,
    _:genid-4e694113159d4e3db4a1a913894a81d842287-3E52BEF94F4BBD32A2AA8CCDB0E36300, _:genid-4e694113159d4e3db4a1a913894a81d842287-8B3F79AA609DB6ADC302FA58C7E785E5,
    _:genid-4e694113159d4e3db4a1a913894a81d842287-337E543D6BC37ABB70B78EDC6BE44616, _:genid-4e694113159d4e3db4a1a913894a81d842287-D136EC8D821DCA4D6D32AEAE45A67CD0,
    _:genid-4e694113159d4e3db4a1a913894a81d842287-E0533F8500EAF1602C855491E907EF58, _:genid-4e694113159d4e3db4a1a913894a81d842287-A1FDA223EC9DD34FC34C7422050EBCD8,
    _:genid-4e694113159d4e3db4a1a913894a81d842287-1A40675717312092221204FBE8E648C4, _:genid-4e694113159d4e3db4a1a913894a81d842287-3652E900DD633D4E4DAFFCBCCFB58EB2,
    _:genid-4e694113159d4e3db4a1a913894a81d842287-26F0508D6030AEF8EED779C762B1C5D9, _:genid-4e694113159d4e3db4a1a913894a81d842287-43208BAEE10CB2ABAB8EEC837ED85ECB,
    _:genid-4e694113159d4e3db4a1a913894a81d842287-87AA5560957A23DE2001264BD7BA0A5A, _:genid-4e694113159d4e3db4a1a913894a81d842287-D90880CF37FF11D3ABFB0787F4567C7C,
    _:genid-4e694113159d4e3db4a1a913894a81d842287-002384467F64B468C4481F1667744075, _:genid-4e694113159d4e3db4a1a913894a81d842287-B41556525FDE829CBFC28EF6D25B8433,
    _:genid-4e694113159d4e3db4a1a913894a81d842287-F9AD55708F83A82D1D1AE02F07A51B36, _:genid-4e694113159d4e3db4a1a913894a81d842287-9F8EB3533062B495E5E770296F8EC239,
    _:genid-4e694113159d4e3db4a1a913894a81d842287-F3EB5958ADA89F951051578B24C03E64, _:genid-4e694113159d4e3db4a1a913894a81d842287-859C0555AFC5EDF93573AFFF6DEB34B4,
    _:genid-4e694113159d4e3db4a1a913894a81d842287-F36A0A5401C43F4FBF4D0B2C39067921, _:genid-4e694113159d4e3db4a1a913894a81d842287-5D380F95026421E6AE0001EAC199DA8C,
    _:genid-4e694113159d4e3db4a1a913894a81d842287-2BF6ABBC661DC58E07D5C8F0968E00AA, _:genid-4e694113159d4e3db4a1a913894a81d842287-A939E41443887037A4971FD5C2571BD3,
    _:genid-4e694113159d4e3db4a1a913894a81d842287-30263B800333814A1A92342232C13F58, _:genid-4e694113159d4e3db4a1a913894a81d842287-5B4FC0336C87D98A53AA9CD68DDCC6CC,
    _:genid-4e694113159d4e3db4a1a913894a81d842287-020C0950251C5068B4DD4858E2DFB3EE, _:genid-4e694113159d4e3db4a1a913894a81d842287-A50DCC8CA8EC027EA026F0EBC3BF74C9;
  schema:target <https://query.wikidata.org/sparql/>;
  sh:select """PREFIX wikibase: <http://wikiba.se/ontology#>
PREFIX wdt: <http://www.wikidata.org/prop/direct/>
PREFIX wd: <http://www.wikidata.org/entity/>
PREFIX ps: <http://www.wikidata.org/prop/statement/>
PREFIX pq: <http://www.wikidata.org/prop/qualifier/>
PREFIX p: <http://www.wikidata.org/prop/>
PREFIX bd: <http://www.bigdata.com/rdf#>
#defaultView:Map
SELECT DISTINCT ?institution ?institutionLabel ?academics ?academicsLabel ?degree ?degreeLabel ?geoloc ?image WHERE {
  ?academics wdt:P31 wd:Q5 ; # instances (P31) of humans (Q5)
             wdt:P27 wd:Q16 ; # country of citizenship
             p:P69 ?statement . # check for an \"educated at\" (P69) statement
  OPTIONAL { ?academics wdt:P18 ?image }. #image

  ?statement ps:P69 ?institution . # get value of the \"educated at\" statement, i.e. the institution
  ?institution wdt:P625 ?geoloc . # get the geolocation of the institution

  ?statement pq:P512 ?degree . # get qualifier \"academic degree\" (P512)
  ?degree wdt:P31/wdt:P279* wd:Q849697 . # filter for doctoral degrees

  SERVICE wikibase:label { bd:serviceParam wikibase:language \"[AUTO_LANGUAGE],mul,en\". }

}""" .
