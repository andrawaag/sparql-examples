@prefix sh: <http://www.w3.org/ns/shacl#> .
@prefix rdf: <http://www.w3.org/1999/02/22-rdf-syntax-ns#> .
@prefix rdfs: <http://www.w3.org/2000/01/rdf-schema#> .
@prefix dcterms: <http://purl.org/dc/terms/> .
@prefix schema: <https://schema.org/> .

<https://www.wikidata.org/#query-65d9e707be7de1a5147b48a7d9077737> a sh:SPARQLExecutable,
    sh:SPARQLSelectExecutable;
  dcterms:isPartOf <https://www.wikidata.org//wiki/Wikidata:SPARQL_query_service/query_optimization>,
    <https://www.wikidata.org//wiki/Wikidata:SPARQL_query_service/query_optimization/nl>,
    <https://www.wikidata.org//wiki/Wikidata:SPARQL_query_service/query_optimization/pt>,
    <https://www.wikidata.org//wiki/Wikidata:SPARQL_query_service/query_optimization/zh>,
    <https://www.wikidata.org//wiki/Wikidata:SPARQL_query_service/query_optimization/hy>,
    <https://www.wikidata.org//wiki/Wikidata:SPARQL_query_service/query_optimization/uk>,
    <https://www.wikidata.org//wiki/Wikidata:SPARQL_query_service/query_optimization/ru>,
    <https://www.wikidata.org//wiki/Wikidata:SPARQL_query_service/query_optimization/fr>,
    <https://www.wikidata.org//wiki/Wikidata:SPARQL_query_service/query_optimization/en>;
  dcterms:license <https://creativecommons.org/licenses/by-sa/4.0/>;
  sh:prefixes _:genid-4e694113159d4e3db4a1a913894a81d847558-wikidata_prefixes, _:genid-4e694113159d4e3db4a1a913894a81d847558-CE5953CE380817CC3256430AEDD21D3E,
    _:genid-4e694113159d4e3db4a1a913894a81d847558-CB150D0ACCB4B7947811D02BFA188985, _:genid-4e694113159d4e3db4a1a913894a81d847558-5145183163EBFDC5954C03156B940719,
    _:genid-4e694113159d4e3db4a1a913894a81d847558-CD207B8BD9C547B5C53A113D2B22D290, _:genid-4e694113159d4e3db4a1a913894a81d847558-AFA714D53E5B61007FC1F6589FBC5082,
    _:genid-4e694113159d4e3db4a1a913894a81d847558-83CDCBB1F3712F9FD1134D8314A7DD10, _:genid-4e694113159d4e3db4a1a913894a81d847558-6CB239DFCBD74968FCE921897EFD11A6,
    _:genid-4e694113159d4e3db4a1a913894a81d847558-8CF5239AE1381870406ECD3669266963, _:genid-4e694113159d4e3db4a1a913894a81d847558-330211512B474117272F7F71FD3BB8AC;
  schema:target <https://query.wikidata.org/sparql/>;
  sh:select """PREFIX wikibase: <http://wikiba.se/ontology#>
PREFIX wd: <http://www.wikidata.org/entity/>
PREFIX prov: <http://www.w3.org/ns/prov#>
PREFIX pr: <http://www.wikidata.org/prop/reference/>
PREFIX bd: <http://www.bigdata.com/rdf#>
SELECT ?statement ?subject ?subjectLabel ?property ?propertyLabel ?object ?objectLabel ?refURL WITH
{
  SELECT DISTINCT ?subject WHERE {
    {
      SERVICE wikibase:mwapi {
        bd:serviceParam wikibase:endpoint \"www.wikidata.org\"; wikibase:api \"Generator\"; mwapi:generator \"exturlusage\"; mwapi:geulimit \"500\"; mwapi:geuquery \"*.lefigaro.fr\"; mwapi:geuprotocol \"http\"; mwapi:geunamespace \"0\" .
        ?title wikibase:apiOutput mwapi:title.
      }
    } UNION {
      SERVICE wikibase:mwapi {
        bd:serviceParam wikibase:endpoint \"www.wikidata.org\"; wikibase:api \"Generator\"; mwapi:generator \"exturlusage\"; mwapi:geulimit \"500\"; mwapi:geuquery \"*.lefigaro.fr\"; mwapi:geuprotocol \"https\"; mwapi:geunamespace \"0\" .
        ?title wikibase:apiOutput mwapi:title.
      }
    }
    BIND(IRI(CONCAT(STR(wd:), ?title)) AS ?subject)
  }
} AS %items {
  INCLUDE %items .
  
  hint:Query hint:optimizer \"None\".
  
  ?subject ?p ?statement .
  ?statement prov:wasDerivedFrom/pr:P854 ?refURL .
  FILTER (CONTAINS(str(?refURL), 'lefigaro.fr')) .
  
  ?property wikibase:claim ?p .
  ?property wikibase:statementProperty ?ps .
  ?statement ?ps ?object .
  
  SERVICE wikibase:label { bd:serviceParam wikibase:language \"en\" }
}""" .
