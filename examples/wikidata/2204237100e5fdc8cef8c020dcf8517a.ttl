@prefix sh: <http://www.w3.org/ns/shacl#> .
@prefix rdf: <http://www.w3.org/1999/02/22-rdf-syntax-ns#> .
@prefix rdfs: <http://www.w3.org/2000/01/rdf-schema#> .
@prefix dcterms: <http://purl.org/dc/terms/> .
@prefix schema: <https://schema.org/> .

<https://www.wikidata.org/#query-2204237100e5fdc8cef8c020dcf8517a> a sh:SPARQLExecutable,
    sh:SPARQLSelectExecutable;
  dcterms:isPartOf <https://www.wikidata.org//wiki/Wikidata:SPARQL_query_service/queries/examples/lb>,
    <https://www.wikidata.org//wiki/Wikidata:SPARQL_query_service/queries/examples/th>,
    <https://www.wikidata.org//wiki/Wikidata:SPARQL_query_service/queries/examples/eu>,
    <https://www.wikidata.org//wiki/Wikidata:SPARQL_query_service/queries/examples/en-gb>,
    <https://www.wikidata.org//wiki/Wikidata:SPARQL_query_service/queries/examples/vec>,
    <https://www.wikidata.org//wiki/Wikidata:SPARQL_query_service/queries/examples/hy>,
    <https://www.wikidata.org//wiki/Wikidata:SPARQL_query_service/queries/examples/id>,
    <https://www.wikidata.org//wiki/Wikidata:SPARQL_query_service/queries/examples/be-tarask>,
    <https://www.wikidata.org//wiki/Wikidata:SPARQL_query_service/queries/examples/tr>,
    <https://www.wikidata.org//wiki/Wikidata:SPARQL_query_service/queries/examples/ro>,
    <https://www.wikidata.org//wiki/Wikidata:SPARQL_query_service/queries/examples/he>,
    <https://www.wikidata.org//wiki/Wikidata:SPARQL_query_service/queries/examples/zh>,
    <https://www.wikidata.org//wiki/Wikidata:SPARQL_query_service/queries/examples/pt-br>,
    <https://www.wikidata.org//wiki/Wikidata:SPARQL_query_service/queries/examples/si>,
    <https://www.wikidata.org//wiki/Wikidata:SPARQL_query_service/queries/examples/eo>,
    <https://www.wikidata.org//wiki/Wikidata:SPARQL_query_service/queries/examples/da>,
    <https://www.wikidata.org//wiki/Wikidata:SPARQL_query_service/queries/examples/ar>,
    <https://www.wikidata.org//wiki/Wikidata:SPARQL_query_service/queries/examples/ko>,
    <https://www.wikidata.org//wiki/Wikidata:SPARQL_query_service/queries/examples/pl>,
    <https://www.wikidata.org//wiki/Wikidata:SPARQL_query_service/queries/examples/ms>,
    <https://www.wikidata.org//wiki/Wikidata:SPARQL_query_service/queries/examples/sv>,
    <https://www.wikidata.org//wiki/Wikidata:SPARQL_query_service/queries/examples/lt>,
    <https://www.wikidata.org//wiki/Wikidata:SPARQL_query_service/queries/examples/nl>,
    <https://www.wikidata.org//wiki/Wikidata:SPARQL_query_service/queries/examples/ca>,
    <https://www.wikidata.org//wiki/Wikidata:SPARQL_query_service/queries/examples/uk>,
    <https://www.wikidata.org//wiki/Wikidata:SPARQL_query_service/queries/examples/it>,
    <https://www.wikidata.org//wiki/Wikidata:SPARQL_query_service/queries/examples/ja>,
    <https://www.wikidata.org//wiki/Wikidata:SPARQL_query_service/queries/examples/es>,
    <https://www.wikidata.org//wiki/Wikidata:SPARQL_query_service/queries/examples/cs>,
    <https://www.wikidata.org//wiki/Wikidata:SPARQL_query_service/queries/examples/ru>,
    <https://www.wikidata.org//wiki/Wikidata:SPARQL_query_service/queries/examples/de>,
    <https://www.wikidata.org//wiki/Wikidata:SPARQL_query_service/queries/examples/fr>,
    <https://www.wikidata.org//wiki/Wikidata:SPARQL_query_service/queries/examples/en>,
    <https://www.wikidata.org//wiki/Wikidata:SPARQL_query_service/queries/examples>;
  dcterms:license <https://creativecommons.org/licenses/by-sa/4.0/>;
  sh:prefixes _:genid-4e694113159d4e3db4a1a913894a81d831577-wikidata_prefixes, _:genid-4e694113159d4e3db4a1a913894a81d831577-4CCD68D5F824267B3E24E4FCF737ACE1,
    _:genid-4e694113159d4e3db4a1a913894a81d831577-0AFFC86918F2550E96EFE519ED5C1704, _:genid-4e694113159d4e3db4a1a913894a81d831577-23B912BDA7A93D0846E58E45BC59D117,
    _:genid-4e694113159d4e3db4a1a913894a81d831577-1917167E11C1FBB2ACA76FAF6FA66D6E, _:genid-4e694113159d4e3db4a1a913894a81d831577-E9AFE7A37DD4D07151AE612C3198B1C0,
    _:genid-4e694113159d4e3db4a1a913894a81d831577-B0493E5C6080A1FBC3D71A1168677BC3, _:genid-4e694113159d4e3db4a1a913894a81d831577-56A940974AB66530D0F8E7763627751D,
    _:genid-4e694113159d4e3db4a1a913894a81d831577-AE09F5F6B0FBE5EC7B92D1D750D9CC66, _:genid-4e694113159d4e3db4a1a913894a81d831577-92C9897382670811913FCBF9A6BEBFD0,
    _:genid-4e694113159d4e3db4a1a913894a81d831577-BEF3AB0E6F67280469DE3180DA22CE90, _:genid-4e694113159d4e3db4a1a913894a81d831577-6CAC611DEE0961D8C713F5CC133691FC,
    _:genid-4e694113159d4e3db4a1a913894a81d831577-07FBD72F12F76174C464AF41CE1F3E72, _:genid-4e694113159d4e3db4a1a913894a81d831577-B98A7CCB0129D28D2FDD04906F9BA509,
    _:genid-4e694113159d4e3db4a1a913894a81d831577-5B0785C2DCD34F66D9AE0F5F19D554BB, _:genid-4e694113159d4e3db4a1a913894a81d831577-AAEA3DA1C1156E8A47865F02B1793239,
    _:genid-4e694113159d4e3db4a1a913894a81d831577-7E55BC8DD7642EEC86DC4F90B51F358E, _:genid-4e694113159d4e3db4a1a913894a81d831577-5F4AE8D6F9F670C1187D08724CE11E31,
    _:genid-4e694113159d4e3db4a1a913894a81d831577-4CAECA98F7AA3C9DAA7AC4012008B99A, _:genid-4e694113159d4e3db4a1a913894a81d831577-3E7D7958E13165E62753D88D8A2CDBBE,
    _:genid-4e694113159d4e3db4a1a913894a81d831577-C91BBAF5806493E4C36DF5C7B5717CDE, _:genid-4e694113159d4e3db4a1a913894a81d831577-86D291DA3F37300FFCE62DF161EA2546,
    _:genid-4e694113159d4e3db4a1a913894a81d831577-AF3E59B3F11F9C1D0C5AB3833BBE3723, _:genid-4e694113159d4e3db4a1a913894a81d831577-06FE996A9A5EE5D072EA1AF5C330D368,
    _:genid-4e694113159d4e3db4a1a913894a81d831577-0A959F1349DB546AEC0938F70CF872B4, _:genid-4e694113159d4e3db4a1a913894a81d831577-F6D90F239994292824F57E607FCC7E5B,
    _:genid-4e694113159d4e3db4a1a913894a81d831577-C16DF24A5290365BC9965C6C3F6C1EF7, _:genid-4e694113159d4e3db4a1a913894a81d831577-60DB4FE40AC221319D3EAF212D1EBE1D,
    _:genid-4e694113159d4e3db4a1a913894a81d831577-30AEA0379616F410F3D6F196A96EFE30, _:genid-4e694113159d4e3db4a1a913894a81d831577-23D206B5B8F4C6EACDB108D8034E28FD,
    _:genid-4e694113159d4e3db4a1a913894a81d831577-74D3B2D2FD8C4E2D8BE3D6037FAEFE68, _:genid-4e694113159d4e3db4a1a913894a81d831577-718D807F2EE48A9D007D5B29A07375F7,
    _:genid-4e694113159d4e3db4a1a913894a81d831577-D26F0342E59BDB30D8F69F88325192E9, _:genid-4e694113159d4e3db4a1a913894a81d831577-B90DE7805B0690D82E4529A2226346AC;
  schema:target <https://query.wikidata.org/sparql/>;
  sh:select """PREFIX xsd: <http://www.w3.org/2001/XMLSchema#>
PREFIX wikibase: <http://wikiba.se/ontology#>
PREFIX wdt: <http://www.wikidata.org/prop/direct/>
PREFIX wd: <http://www.wikidata.org/entity/>
PREFIX ps: <http://www.wikidata.org/prop/statement/>
PREFIX pq: <http://www.wikidata.org/prop/qualifier/>
PREFIX p: <http://www.wikidata.org/prop/>
PREFIX bd: <http://www.bigdata.com/rdf#>
SELECT DISTINCT ?item ?itemLabel ?positionLabel ?picture ?start ?end ?days WHERE
{
  ?item wdt:P31 wd:Q5 ;
        p:P39 ?position_statement .
  ?position_statement ps:P39 ?position ;
                      pq:P580 ?start FILTER (?start >= \"1815-01-01T00:00:00Z\"^^xsd:dateTime) .
  ?position wdt:P31|wdt:P279* wd:Q15135541 .
  OPTIONAL { ?position_statement pq:P582 ?x }
  OPTIONAL { ?item wdt:P18 ?picture }
  bind(if(bound(?x), ?x, NOW()) as ?end )
  bind(floor(?end - ?start) as ?days)
  SERVICE wikibase:label { bd:serviceParam wikibase:language \"[AUTO_LANGUAGE],mul,en\" . }
}
ORDER BY DESC(?days) ?itemLabel""" .
