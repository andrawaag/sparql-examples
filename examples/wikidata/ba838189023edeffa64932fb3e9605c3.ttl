@prefix sh: <http://www.w3.org/ns/shacl#> .
@prefix rdf: <http://www.w3.org/1999/02/22-rdf-syntax-ns#> .
@prefix rdfs: <http://www.w3.org/2000/01/rdf-schema#> .
@prefix dcterms: <http://purl.org/dc/terms/> .
@prefix schema: <https://schema.org/> .

<https://www.wikidata.org/#query-ba838189023edeffa64932fb3e9605c3> a sh:SPARQLExecutable,
    sh:SPARQLSelectExecutable;
  dcterms:isPartOf <https://www.wikidata.org//wiki/Wikidata:SPARQL_query_service/queries/examples/lb>,
    <https://www.wikidata.org//wiki/Wikidata:SPARQL_query_service/queries/examples/th>,
    <https://www.wikidata.org//wiki/Wikidata:SPARQL_query_service/queries/examples/eu>,
    <https://www.wikidata.org//wiki/Wikidata:SPARQL_query_service/queries/examples/en-gb>,
    <https://www.wikidata.org//wiki/Wikidata:SPARQL_query_service/queries/examples/vec>,
    <https://www.wikidata.org//wiki/Wikidata:SPARQL_query_service/queries/examples/hy>,
    <https://www.wikidata.org//wiki/Wikidata:SPARQL_query_service/queries/examples/id>,
    <https://www.wikidata.org//wiki/Wikidata:SPARQL_query_service/queries/examples/be-tarask>,
    <https://www.wikidata.org//wiki/Wikidata:SPARQL_query_service/queries/examples/tr>,
    <https://www.wikidata.org//wiki/Wikidata:SPARQL_query_service/queries/examples/ro>,
    <https://www.wikidata.org//wiki/Wikidata:SPARQL_query_service/queries/examples/he>,
    <https://www.wikidata.org//wiki/Wikidata:SPARQL_query_service/queries/examples/zh>,
    <https://www.wikidata.org//wiki/Wikidata:SPARQL_query_service/queries/examples/pt-br>,
    <https://www.wikidata.org//wiki/Wikidata:SPARQL_query_service/queries/examples/si>,
    <https://www.wikidata.org//wiki/Wikidata:SPARQL_query_service/queries/examples/eo>,
    <https://www.wikidata.org//wiki/Wikidata:SPARQL_query_service/queries/examples/da>,
    <https://www.wikidata.org//wiki/Wikidata:SPARQL_query_service/queries/examples/ar>,
    <https://www.wikidata.org//wiki/Wikidata:SPARQL_query_service/queries/examples/ko>,
    <https://www.wikidata.org//wiki/Wikidata:SPARQL_query_service/queries/examples/pl>,
    <https://www.wikidata.org//wiki/Wikidata:SPARQL_query_service/queries/examples/ms>,
    <https://www.wikidata.org//wiki/Wikidata:SPARQL_query_service/queries/examples/sv>,
    <https://www.wikidata.org//wiki/Wikidata:SPARQL_query_service/queries/examples/lt>,
    <https://www.wikidata.org//wiki/Wikidata:SPARQL_query_service/queries/examples/ca>,
    <https://www.wikidata.org//wiki/Wikidata:SPARQL_query_service/queries/examples/uk>,
    <https://www.wikidata.org//wiki/Wikidata:SPARQL_query_service/queries/examples/it>,
    <https://www.wikidata.org//wiki/Wikidata:SPARQL_query_service/queries/examples/ja>,
    <https://www.wikidata.org//wiki/Wikidata:SPARQL_query_service/queries/examples/es>,
    <https://www.wikidata.org//wiki/Wikidata:SPARQL_query_service/queries/examples/cs>,
    <https://www.wikidata.org//wiki/Wikidata:SPARQL_query_service/queries/examples/ru>,
    <https://www.wikidata.org//wiki/Wikidata:SPARQL_query_service/queries/examples/de>;
  dcterms:license <https://creativecommons.org/licenses/by-sa/4.0/>;
  sh:prefixes _:genid-4e694113159d4e3db4a1a913894a81d857440-wikidata_prefixes, _:genid-4e694113159d4e3db4a1a913894a81d857440-63EA6512918F57AA1AAF21F010BE7EFE,
    _:genid-4e694113159d4e3db4a1a913894a81d857440-ED8797799EE3137D014285DCB8934F67, _:genid-4e694113159d4e3db4a1a913894a81d857440-7602B0FBDABF43F757D3F9F60DFD5598,
    _:genid-4e694113159d4e3db4a1a913894a81d857440-07FC8FB02DC9DEBCD8347A0B47B90A4D, _:genid-4e694113159d4e3db4a1a913894a81d857440-F9006642A803A0358FCAE449659ECA6F,
    _:genid-4e694113159d4e3db4a1a913894a81d857440-29FD6AFB15F3874A04F5419E4C3DF8EC, _:genid-4e694113159d4e3db4a1a913894a81d857440-E6A0FE6F8C2AEA78A5932E74CD152046,
    _:genid-4e694113159d4e3db4a1a913894a81d857440-5143E37AD131155FDE11A6A785DD6466, _:genid-4e694113159d4e3db4a1a913894a81d857440-902E62F583C3BEB5EC829F6489899A0C,
    _:genid-4e694113159d4e3db4a1a913894a81d857440-1CEE57CB249305807648B3B45CA07062, _:genid-4e694113159d4e3db4a1a913894a81d857440-32CA298FCCD9E009FA44B1C802F8BA89,
    _:genid-4e694113159d4e3db4a1a913894a81d857440-45E735B76D5554920D72511A9410CC72, _:genid-4e694113159d4e3db4a1a913894a81d857440-522C0BF5A9D4AEF5AC2F7BBFCD70D071,
    _:genid-4e694113159d4e3db4a1a913894a81d857440-1B13BEABD19AF581EFF4E443D79D4013, _:genid-4e694113159d4e3db4a1a913894a81d857440-A496EDB921E7321709230D81639051AB,
    _:genid-4e694113159d4e3db4a1a913894a81d857440-34D173BBBD02DE671D57D2EA9D41165B, _:genid-4e694113159d4e3db4a1a913894a81d857440-179665C8DD5ABC891C4C0E7098EFBAF3,
    _:genid-4e694113159d4e3db4a1a913894a81d857440-46F0B2988CA2B97EFFA59BFD3E6A6183, _:genid-4e694113159d4e3db4a1a913894a81d857440-361E4E4B896C40C5585E2DE6B054A3AC,
    _:genid-4e694113159d4e3db4a1a913894a81d857440-AEE271B17661F3A9B06188DA2BE2461F, _:genid-4e694113159d4e3db4a1a913894a81d857440-9B2A185F0DF6A0469297D85911C4EAB4,
    _:genid-4e694113159d4e3db4a1a913894a81d857440-67292A60173BA48FDA9753AB7C511D18, _:genid-4e694113159d4e3db4a1a913894a81d857440-9CA30D734B1A940E348D4E8DE3592AE5,
    _:genid-4e694113159d4e3db4a1a913894a81d857440-FB0BF9A306BE6575345AE3B763AF1621, _:genid-4e694113159d4e3db4a1a913894a81d857440-B3DD6CA21183E2A72B7EA89056101857,
    _:genid-4e694113159d4e3db4a1a913894a81d857440-459799CEA4D9D92B968D4AA933D737C3, _:genid-4e694113159d4e3db4a1a913894a81d857440-A8EB55020DD6AA083DEA9DAA1C9FDE6A,
    _:genid-4e694113159d4e3db4a1a913894a81d857440-08ED7CED623A6DD296B9AF8C00C866AE, _:genid-4e694113159d4e3db4a1a913894a81d857440-B99D6E7CEE3561A16AFD7D6F1CA679FD;
  schema:target <https://query.wikidata.org/sparql/>;
  sh:select """PREFIX wikibase: <http://wikiba.se/ontology#>
PREFIX wdt: <http://www.wikidata.org/prop/direct/>
PREFIX wd: <http://www.wikidata.org/entity/>
PREFIX bd: <http://www.bigdata.com/rdf#>
#title:<span lang=\"en\" dir=\"ltr\" class=\"mw-content-ltr\">Galaxies ordered by the ones that are most linked from scientific articles</span>
#author: So9q
#date:2021-10-27
#note:I deliberately choose a smaller subgraph (galaxies) to prevent a timeout on WDQS
SELECT ?main_subject ?main_subjectLabel (count(?item) as ?c)
WHERE
{
  ?item wdt:P31 wd:Q13442814;
        wdt:P921 ?main_subject.
  ?main_subject wdt:P31/wdt:P279* wd:Q318.
  SERVICE wikibase:label { bd:serviceParam wikibase:language \"[AUTO_LANGUAGE],mul,en\". }
}
GROUP BY ?main_subject ?main_subjectLabel
ORDER BY DESC(?c)""" .
