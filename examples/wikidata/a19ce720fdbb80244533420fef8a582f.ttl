@prefix sh: <http://www.w3.org/ns/shacl#> .
@prefix rdf: <http://www.w3.org/1999/02/22-rdf-syntax-ns#> .
@prefix rdfs: <http://www.w3.org/2000/01/rdf-schema#> .
@prefix dcterms: <http://purl.org/dc/terms/> .
@prefix schema: <https://schema.org/> .

<https://www.wikidata.org/#query-a19ce720fdbb80244533420fef8a582f> a sh:SPARQLExecutable,
    sh:SPARQLSelectExecutable;
  dcterms:isPartOf <https://www.wikidata.org//wiki/Wikidata:SPARQL_query_service/queries/examples/lb>,
    <https://www.wikidata.org//wiki/Wikidata:SPARQL_query_service/queries/examples/th>,
    <https://www.wikidata.org//wiki/Wikidata:SPARQL_query_service/queries/examples/eu>,
    <https://www.wikidata.org//wiki/Wikidata:SPARQL_query_service/queries/examples/en-gb>,
    <https://www.wikidata.org//wiki/Wikidata:SPARQL_query_service/queries/examples/vec>,
    <https://www.wikidata.org//wiki/Wikidata:SPARQL_query_service/queries/examples/hy>,
    <https://www.wikidata.org//wiki/Wikidata:SPARQL_query_service/queries/examples/id>,
    <https://www.wikidata.org//wiki/Wikidata:SPARQL_query_service/queries/examples/be-tarask>,
    <https://www.wikidata.org//wiki/Wikidata:SPARQL_query_service/queries/examples/tr>,
    <https://www.wikidata.org//wiki/Wikidata:SPARQL_query_service/queries/examples/ro>,
    <https://www.wikidata.org//wiki/Wikidata:SPARQL_query_service/queries/examples/he>,
    <https://www.wikidata.org//wiki/Wikidata:SPARQL_query_service/queries/examples/zh>,
    <https://www.wikidata.org//wiki/Wikidata:SPARQL_query_service/queries/examples/pt-br>,
    <https://www.wikidata.org//wiki/Wikidata:SPARQL_query_service/queries/examples/si>,
    <https://www.wikidata.org//wiki/Wikidata:SPARQL_query_service/queries/examples/eo>,
    <https://www.wikidata.org//wiki/Wikidata:SPARQL_query_service/queries/examples/da>,
    <https://www.wikidata.org//wiki/Wikidata:SPARQL_query_service/queries/examples/ar>,
    <https://www.wikidata.org//wiki/Wikidata:SPARQL_query_service/queries/examples/ko>,
    <https://www.wikidata.org//wiki/Wikidata:SPARQL_query_service/queries/examples/pl>,
    <https://www.wikidata.org//wiki/Wikidata:SPARQL_query_service/queries/examples/ms>,
    <https://www.wikidata.org//wiki/Wikidata:SPARQL_query_service/queries/examples/sv>,
    <https://www.wikidata.org//wiki/Wikidata:SPARQL_query_service/queries/examples/lt>,
    <https://www.wikidata.org//wiki/Wikidata:SPARQL_query_service/queries/examples/nl>,
    <https://www.wikidata.org//wiki/Wikidata:SPARQL_query_service/queries/examples/ca>,
    <https://www.wikidata.org//wiki/Wikidata:SPARQL_query_service/queries/examples/uk>,
    <https://www.wikidata.org//wiki/Wikidata:SPARQL_query_service/queries/examples/it>,
    <https://www.wikidata.org//wiki/Wikidata:SPARQL_query_service/queries/examples/ja>,
    <https://www.wikidata.org//wiki/Wikidata:SPARQL_query_service/queries/examples/es>,
    <https://www.wikidata.org//wiki/Wikidata:SPARQL_query_service/queries/examples/cs>,
    <https://www.wikidata.org//wiki/Wikidata:SPARQL_query_service/queries/examples/ru>,
    <https://www.wikidata.org//wiki/Wikidata:SPARQL_query_service/queries/examples/de>,
    <https://www.wikidata.org//wiki/Wikidata:SPARQL_query_service/queries/examples/fr>,
    <https://www.wikidata.org//wiki/Wikidata:SPARQL_query_service/queries/examples/en>,
    <https://www.wikidata.org//wiki/Wikidata:SPARQL_query_service/queries/examples>;
  dcterms:license <https://creativecommons.org/licenses/by-sa/4.0/>;
  sh:prefixes _:genid-4e694113159d4e3db4a1a913894a81d847591-wikidata_prefixes, _:genid-4e694113159d4e3db4a1a913894a81d847591-A129EFB6F2DB40F30F64F49CCBB7125B,
    _:genid-4e694113159d4e3db4a1a913894a81d847591-EF33BA231551CAD5C3DC985C2DAA1430, _:genid-4e694113159d4e3db4a1a913894a81d847591-E5C9205E2D7ECB55AFF64458D1CDBE66,
    _:genid-4e694113159d4e3db4a1a913894a81d847591-908565E098A57145C2BF8A7A2CB3AA18, _:genid-4e694113159d4e3db4a1a913894a81d847591-D43CDCA0BAE1902CBA9C0DDD6269CCAF,
    _:genid-4e694113159d4e3db4a1a913894a81d847591-458EAA44344EC2E5B263E67DF384BA19, _:genid-4e694113159d4e3db4a1a913894a81d847591-E6B2DE7D19AEFA0E86A23381AD3E8F56,
    _:genid-4e694113159d4e3db4a1a913894a81d847591-19EC4DF76E56D24BED9FD23A3E5B3062, _:genid-4e694113159d4e3db4a1a913894a81d847591-4B03EAFA31CCAA1139F23A867D71A829,
    _:genid-4e694113159d4e3db4a1a913894a81d847591-F6912B08EAB659C71843173251D06A4F, _:genid-4e694113159d4e3db4a1a913894a81d847591-485DB44BD4B2935A3B2CA137BF46EB88,
    _:genid-4e694113159d4e3db4a1a913894a81d847591-5984A598C442C842200F488D5BEDC1B9, _:genid-4e694113159d4e3db4a1a913894a81d847591-84A4C6AD2B8AA4866CEE675E756B3BBD,
    _:genid-4e694113159d4e3db4a1a913894a81d847591-A7FD4C83DD988839A87A1C5A88E25AF5, _:genid-4e694113159d4e3db4a1a913894a81d847591-947C26BCC2F5592FADF25E2C242697CE,
    _:genid-4e694113159d4e3db4a1a913894a81d847591-9AE3F5A97A20F1858E8114C600ECA8B9, _:genid-4e694113159d4e3db4a1a913894a81d847591-51E4F2181A7FBE7A54810C7317E07BB8,
    _:genid-4e694113159d4e3db4a1a913894a81d847591-30142D6B368F65757EEBC5D6D72EB420, _:genid-4e694113159d4e3db4a1a913894a81d847591-1A3112CE12318DBCE6F690ED89B43B8A,
    _:genid-4e694113159d4e3db4a1a913894a81d847591-83DB1261A88851A4502AB302444EAD6D, _:genid-4e694113159d4e3db4a1a913894a81d847591-E1C708F34216C54093971A77FD8D1601,
    _:genid-4e694113159d4e3db4a1a913894a81d847591-7678AE772D8D0F5855F807CB9763247F, _:genid-4e694113159d4e3db4a1a913894a81d847591-8D1C3B9071B3108CC4BF5E4897748644,
    _:genid-4e694113159d4e3db4a1a913894a81d847591-C578BBB0580D29AE7D857492E3CBC9B9, _:genid-4e694113159d4e3db4a1a913894a81d847591-E451FB60A3FC1CF91F15B7D57C96FC85,
    _:genid-4e694113159d4e3db4a1a913894a81d847591-4B8B61C2484C021DC2ED61F7B908EA56, _:genid-4e694113159d4e3db4a1a913894a81d847591-7BC14A44FCF0E457C3C18A771EBE1267,
    _:genid-4e694113159d4e3db4a1a913894a81d847591-477CC5EE70B89ACF017D7E3CD4B751DE, _:genid-4e694113159d4e3db4a1a913894a81d847591-D3F8B094703F416E0DC00040ADF63439,
    _:genid-4e694113159d4e3db4a1a913894a81d847591-4C430465A244F8C54DA15EF76C9E9C81, _:genid-4e694113159d4e3db4a1a913894a81d847591-555DB3ED579F5E30CFFA77AB10907D6B,
    _:genid-4e694113159d4e3db4a1a913894a81d847591-92C4F13C2E04E7801B0A412C8C35A78A, _:genid-4e694113159d4e3db4a1a913894a81d847591-4FC863074FAC7CA5BD53352A61BEC863;
  schema:target <https://query.wikidata.org/sparql/>;
  sh:select """PREFIX wikibase: <http://wikiba.se/ontology#>
PREFIX wdt: <http://www.wikidata.org/prop/direct/>
PREFIX wd: <http://www.wikidata.org/entity/>
PREFIX schema: <http://schema.org/>
PREFIX bd: <http://www.bigdata.com/rdf#>
#added before 2019-02

SELECT ?item ?itemLabel ?cnt WHERE {
{
  SELECT ?item (COUNT(?sitelink) AS ?cnt) WHERE {
  ?item wdt:P27|wdt:P205|wdt:P17 wd:Q16 . #Canadian subjects.
  MINUS {?item wdt:P106 wd:Q488111 .} #Minus occupations that would be inappropriate in most situations.
  MINUS {?item wdt:P106 wd:Q3286043 .}
  MINUS {?item wdt:P106 wd:Q4610556 .}
  ?sitelink schema:about ?item .
  FILTER NOT EXISTS {
    ?article schema:about ?item .
    ?article schema:isPartOf <https://en.wikipedia.org/> . #Targeting Wikipedia language where subjects has no article.
  }
  } GROUP BY ?item ORDER BY DESC (?cnt) LIMIT 1000 #Sorted by amount of articles in other languages. Result limited to 1000 lines to not have a timeout error.
}
SERVICE wikibase:label { bd:serviceParam wikibase:language \"[AUTO_LANGUAGE],mul,en,fr,es,de\" } #Service to resolve labels in (fallback) languages: automatic user language, default for all languages, English, French, Spanish, German.
} ORDER BY DESC (?cnt)""" .
