@prefix sh: <http://www.w3.org/ns/shacl#> .
@prefix rdf: <http://www.w3.org/1999/02/22-rdf-syntax-ns#> .
@prefix rdfs: <http://www.w3.org/2000/01/rdf-schema#> .
@prefix dcterms: <http://purl.org/dc/terms/> .
@prefix schema: <https://schema.org/> .

<https://www.wikidata.org/#query-dbff7899c3801eefa89a80d1f4f97b44> a sh:SPARQLExecutable,
    sh:SPARQLSelectExecutable;
  dcterms:isPartOf <https://www.wikidata.org//wiki/Wikidata:Request_a_query/Archive/2021/08>,
    <https://www.wikidata.org//wiki/User:Back_ache>;
  dcterms:license <https://creativecommons.org/licenses/by-sa/4.0/>;
  sh:prefixes _:genid-4e694113159d4e3db4a1a913894a81d838795-wikidata_prefixes, _:genid-4e694113159d4e3db4a1a913894a81d838795-38D3D608773558C8F49576B5D5B61CF3;
  schema:target <https://query.wikidata.org/sparql/>;
  rdfs:comment """  Back ache is currently: Somewhere Check my status history for more info. Update: On • Busy • Class • Away Wikibreak • Asleep • Holiday • OffMy current project comes from the back of me needing to become prificanent in the computer language \"powershell\" and API's, rather then make examples , I am using this as an opportunity to \"fill in the blanks\" in wikidata entries by calling publicly available data using API's Babel user information en-GB-N This user has a native understanding of British English. en-N This user has a native understanding of English. es-1 Este usuario tiene un conocimiento básico del español. Users by language I have been reading public domain poems and adding the recordings to commons, Wikipedia and Wikidata, and wondered if a querys could help find me more that need doing.Looking at Q3072813 I can see that it would be something likeinstance of P31 = poem Q5185279 copyright status P6216 = public domain Q19652and has no entry or value forspoken text audio (P989)and is either in English (Q1860) or not tagged in as having a language at alllanguage of work or name (P407)https://hay.toolforge.org/vizquery/I have tried adapting an existing query's as it seems more than 6000 of the poems haven't been tagged for the language they are in, #Public Domain Poems, without audio or a language
#defaultView:Table
SELECT ?item ?itemLabel ?author 
WHERE
{
?item wdt:P31 wd:Q5185279 .
?item wdt:P6216 wd:Q19652 .
?item wdt:P50 ?author  
    MINUS {?item wdt:P989 [] } .
    MINUS {?item wdt:P407 [] } .
SERVICE wikibase:label { bd:serviceParam wikibase:language \"[AUTO_LANGUAGE],en\" }
}
ORDER BY DESC(?author)
 Try it! #Public Domain Poems, in English but without audio
#defaultView:Table
SELECT ?item ?itemLabel ?pic
WHERE
{
?item wdt:P31 wd:Q5185279 .
?item wdt:P6216 wd:Q19652 .  
    MINUS {?item wdt:P989 [] } .
?item wdt:P407 wd:Q1860 .
SERVICE wikibase:label { bd:serviceParam wikibase:language \"[AUTO_LANGUAGE],en\" }
}
 Try it! @Back ache: #Public Domain Poems, in English  or with no P407 but without audio
SELECT ?item ?itemLabel WHERE
{
  ?item wdt:P31 wd:Q5185279 .
  ?item wdt:P6216 wd:Q19652 .  
  filter not exists  {?item wdt:P989 []. } 
  {?item wdt:P407 wd:Q1860 .}
  UNION 
  {FILTER NOT EXISTS {?item wdt:P407 [].} }
  SERVICE wikibase:label { bd:serviceParam wikibase:language \"[AUTO_LANGUAGE],en\" }
}
 Try it! --Tagishsimon (talk) 12:41, 29 June 2021 (UTC) #Poets, who write in English but don't have a Librivox link
#defaultView:Table
SELECT ?item ?itemLabel ?pic
WHERE
{
?item wdt:P106 wd:Q49757  .
?item wdt:P6886 wd:Q1860  .
    MINUS {?item wdt:P1899 [] } .
SERVICE wikibase:label { bd:serviceParam wikibase:language \"[AUTO_LANGUAGE],en\" }
}
 Try it! #Public Domain Poems, in English and with audio
#defaultView:Table
SELECT ?item ?itemLabel ?audio
WHERE
{
?item wdt:P31 wd:Q5185279 .
?item wdt:P6216 wd:Q19652 .  
?item wdt:P989 ?audio  .
?item wdt:P407 wd:Q1860 .
SERVICE wikibase:label { bd:serviceParam wikibase:language \"[AUTO_LANGUAGE],en\" }
}
 Try it! #Public Domain Limericks, in English and with audio
#defaultView:Table
SELECT ?item ?itemLabel ?audio
WHERE
{
?item wdt:P31 wd:Q204698 .
?item wdt:P989 ?audio  .

SERVICE wikibase:label { bd:serviceParam wikibase:language \"[AUTO_LANGUAGE],en\" }
}
 Try it!  #Poe Poens not marked as an instance of a translation, but has a translator
#defaultView:Table
SELECT ?item ?itemLabel ?translator
WHERE
{
?item wdt:P31 wd:Q5185279 .
?item wdt:P50 wd:Q16867 .
?item wdt:P655 ?translator
  FILTER NOT EXISTS { 
    ?item wdt:P31 wd:Q3331189 .  
}
  

SERVICE wikibase:label { bd:serviceParam wikibase:language \"[AUTO_LANGUAGE],en\" }
}
 Try it! #Wikidata items of files in Category:Audio files of poetry WITHOUT anything in its P180
SELECT ?file ?title ?item
WITH
{
  SELECT ?file ?title
  WHERE
  {
    SERVICE wikibase:mwapi
    {
      bd:serviceParam wikibase:api \"Generator\" .
      bd:serviceParam wikibase:endpoint \"commons.wikimedia.org\" .
      bd:serviceParam mwapi:gcmtitle \"Category:Audio files of poetry\" .
      bd:serviceParam mwapi:generator \"categorymembers\" .
      bd:serviceParam mwapi:gcmtype \"file\" .
      bd:serviceParam mwapi:gcmlimit \"max\" .
      ?title wikibase:apiOutput mwapi:title .
      ?pageid wikibase:apiOutput \"@pageid\" .
    }
    BIND (URI(CONCAT('https://commons.wikimedia.org/entity/M', ?pageid)) AS ?file).
    MINUS {?item wdt:P180 [] }
  }
} AS %get_files
WHERE
{
  INCLUDE %get_files
 }
 Try it! """@en;
  sh:select """PREFIX wikibase: <http://wikiba.se/ontology#>
PREFIX wdt: <http://www.wikidata.org/prop/direct/>
PREFIX bd: <http://www.bigdata.com/rdf#>
#title:Commons files in Category:Audio files of poetry WITHOUT anything in its P180
SELECT ?file ?title 
WITH
{
  SELECT ?file ?title
  WHERE
  {
    SERVICE wikibase:mwapi
    {
      bd:serviceParam wikibase:api \"Generator\" .
      bd:serviceParam wikibase:endpoint \"commons.wikimedia.org\" .
      bd:serviceParam mwapi:gcmtitle \"Category:Audio files of poetry\" .
      bd:serviceParam mwapi:generator \"categorymembers\" .
      bd:serviceParam mwapi:gcmtype \"file\" .
      bd:serviceParam mwapi:gcmlimit \"max\" .
      ?title wikibase:apiOutput mwapi:title .
      ?pageid wikibase:apiOutput \"@pageid\" .
    }
    BIND (URI(CONCAT('https://commons.wikimedia.org/entity/M', ?pageid)) AS ?file).
   }
} AS %get_files
WHERE
{
  INCLUDE %get_files
  MINUS {?file wdt:P180 [] .}
}""" .
