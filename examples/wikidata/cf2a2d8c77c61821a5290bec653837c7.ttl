@prefix sh: <http://www.w3.org/ns/shacl#> .
@prefix rdf: <http://www.w3.org/1999/02/22-rdf-syntax-ns#> .
@prefix rdfs: <http://www.w3.org/2000/01/rdf-schema#> .
@prefix dcterms: <http://purl.org/dc/terms/> .
@prefix schema: <https://schema.org/> .

<https://www.wikidata.org/#query-cf2a2d8c77c61821a5290bec653837c7> a sh:SPARQLExecutable;
  rdfs:comment """Contents 1 Page creation 2 Splitting ? 3 Translation 4 Map a list of IDs to the corresponding values for other properties 5 Query involving elevation above sea level (P2044) 6 Add link to this page from query service page? 7 Suggestion of an improvement in the \"Recent events\" query 8 Categorize queries by SPARQL functions too 9 Add example for IF EXISTS 10 Federated queries examples? 11 Example with deprecated ranks 12 Wikisource and Commons 13 Translate the name of queries 14 Too many templates 15 CC0? 16 wikibase:api 17 Bug in query for Yearly Population stacked by country 18 Really needs an overhaul 19 Request for example for showing all items which have a property 20 Creating map images based on queries 21 Statements originating from a specific DOI 22 Exclude items with time qualifier before timestamp 23 Template transclusion not working all the way down to the bottom of the page 24 Cashed results 25 Vermeer 26 \"OR\" 27 Update query 28 A kind of test 29 WITH ... AS ... 30 Coloring of edges in graph views 31 Complex objects through values 32 Tree / Continents, countries, regions and capitals - example is not valid 33 Scholarly articles with \"Zika\" in the item label 34 Error in query service 35 Changes to Wikidata Query Service UI’s example loading 36 Example doesn't work 37 Articles of a category without Wikidata items 38 Largest cities with mayors who identify as female 39 error in example query Public_art_in_Paris 40 Pls. correct \"Places with continent Antarctica more than 3000?km north of south pole\" 41 The Doctor Who example is wrong, I think 42 The output of \"The Simpsons series episodes list by season\" example is incorrect 43 Proposition of a new example 44 Error in query \"Find drugs for cancers that target genes related to cell proliferation\" 45 Error in \"Map of places mentioned in travel stories with text in French accessible online\" 46 Periods of Japanese history and what they were named after 47 Existing countries by a given date 48 examples with the {{SPARQL2}} template have rownums in query 49 Prolific fathers timing out 50 Better \"number of sitelinks to Wikipedia\" query 51 Why not the \"AUTO_LANGUAGE\"? 52 More translatable for comments 53 N°7.23 Query does not work 54 Zika label query 55 Descriptive tvar names 56 Finding Category Translations 57 StackOverflowError for \"Largest cities per country\" 58 Adding explanations in natural language 59 example query timeout seems dependent on time of day 60 Problem in ImageGrid with 2 variables in Presidents and spouses example 61 Recent (March 2024) problem with Compare versions 62 Rename to WDQS_examples 63 Can we have a \"shallow end\" in this pool 64 Effect on putting a title inside a query 65 Header markup generation change fallout 66 UN member states has UK twice Page creation [edit] I have moved the examples from https://www.mediawiki.org/wiki/Wikibase/Indexing/SPARQL_Query_Examples to here. I will change query.wikidata.org to load the examples from here within the next weeks. Please help to maintain this list of query examples!Thanks, --Jonas Kress (WMDE) (talk) 19:01, 17 July 2016 (UTC)[reply] @Smalyshev (WMF):: I like the new template, but it seems to fail for the samples at the end of the page. Supposedly because of the limit of 500. --- Jura 21:42, 19 September 2016 (UTC)[reply] @Jura1: Not sure why we've got fails in SPARQL2, that didn't happen before. Maybe something changed since last time I checked. --Smalyshev (WMF) (talk) 22:01, 19 September 2016 (UTC)[reply] Oh of course, somebody added using Q template there. Which uses expensive functions. Adding widgets is nice but I'll have to roll it back. --Smalyshev (WMF) (talk) 22:07, 19 September 2016 (UTC)[reply] It still fails. Given the help offered by Lea [1], maybe she can do something about the 500 limit @Lea Lacroix (WMDE):. --- Jura 11:03, 20 September 2016 (UTC)[reply] @Jura1: Seems to be fine now. --Smalyshev (WMF) (talk) 19:43, 21 September 2016 (UTC)[reply] Looks good. Did you do something or is just my screen? --- Jura 20:56, 21 September 2016 (UTC)[reply] I fixed the templates and converted a bunch of them to SPARQL2 (which should be used from now on). --Smalyshev (WMF) (talk) 19:28, 22 September 2016 (UTC)[reply] Good. BTW, the wordcloud on WQS doesn't seem to take input from the module. --- Jura 00:06, 26 September 2016 (UTC)[reply] @Smalyshev (WMF): --- Jura 19:28, 28 September 2016 (UTC)[reply] @Jura1: Example of missing things would help. --Smalyshev (WMF) (talk) 19:32, 28 September 2016 (UTC)[reply] @Smalyshev (WMF): \"cat\"? I think it's easier to check what's there and then go to the sample and look at the source text. You will noticed that they all use the old format. --- Jura 19:37, 28 September 2016 (UTC)[reply] @Jura1: I have a feeling I didn't understand your question. I type \"cat\" in filter in query examples and it shows me the cats queries. Looks like you're talking about something else. So maybe it'd be better to do it this way: please describe, in maximum possible detail, 1) what you were doing 2) which result you expected to see 3) which result you observed instead and how it is different from the result you expected (unless its obvious). Or submit a bug report on phabricator, that'd work too :) --Smalyshev (WMF) (talk) 19:48, 28 September 2016 (UTC)[reply] @Smalyshev (WMF): It's about the wordcloud above the filter. \"cat\" should appear there (or at least more than the ones that are visible now). All words in that cloud seem to be from samples using the old format. Click \"pope (Q19564)\" and look at the three queries starting Wikidata:SPARQL_query_service/queries/examples#List_of_popes. If you type \"cat\" in the filter, you get section headers (that works). --- Jura 19:57, 28 September 2016 (UTC)[reply] OK, I see what you mean now, will check it. --Smalyshev (WMF) (talk) 22:45, 6 October 2016 (UTC)[reply] @Jura1: @Smalyshev (WMF): Should we convert all examples to sparql2 template? --Jonas Kress (WMDE) (talk) 19:53, 7 October 2016 (UTC)[reply] @Jonas Kress (WMDE): see discussion here: https://www.wikidata.org/w/index.php?title=Topic:Tcxv4rdaqcpa1f2q&topic_showPostId=tcyp5r1n22868jtu&fromnotif=1#flow-post-tcyp5r1n22868jtu there may be some issues with that, need closer look. --Smalyshev (WMF) (talk) 19:56, 7 October 2016 (UTC)[reply] @Smalyshev (WMF): What is the current status with migrating to SPARQL2 template? --Jonas Kress (WMDE) (talk) 08:15, 22 May 2017 (UTC)[reply] Haven't had much time to look into it, so same as before I imagine... :\\. Probably needs somebody to look into it, but I'm pretty busy so far, maybe in a couple of weeks... --Smalyshev (WMF) (talk) 18:50, 23 May 2017 (UTC)[reply] Splitting ? [edit] The page is becoming quite heavy. What about a split ? author TomT0m / talk page 18:32, 25 September 2016 (UTC)[reply] Examples are a good way to learn SPARQL, but not the only way. There are things you can´t learn this way. For example, I would like to understand how to use RDF_Dump_Format#Ontology. One problem I have never understand, when do I have to use wdt:P123, p:P123, pr:P123, etc. So far I´m looking for an example and then I´m adapting that example to what I want. We should rather have next to the examples a textbook for SPARQL. --Molarus 00:03, 26 September 2016 (UTC)[reply] Or move each one into \"Query\" namespace? Listeria could read from there as well. --- Jura 14:46, 26 September 2016 (UTC)[reply] That would also avoid having to date them, what do you think @Smalyshev (WMF):? As more complex queries eventually tend to break or timeout, I think it's an advantage to know when/by whom it was written. --- Jura 10:09, 8 October 2016 (UTC)[reply] I'm still not sure why we need to date them... but splitting may be a good idea, if we find a good way to expose all. The problem with splitting would be that people would not see the examples immediately, so it'd be harder to explore it. But maybe that's what needs to happen. If you have a good idea how to organize it, let's discuss it. Maybe even better on wikidata list? --Smalyshev (WMF) (talk) 18:27, 8 October 2016 (UTC)[reply] We made a summary of queries at Wikidata:Database reports/Complex constraints. It's updated daily from property talk pages. Obviously, if we have [[Query:]], we might end up having statements on these, just to better consolidate them ;) --- Jura 12:26, 9 October 2016 (UTC)[reply] @jura1, Smalyshev (WMF), TomT0m: The page is now so big that it fails to show all examples. See https://phabricator.wikimedia.org/T132690--So9q (talk) 13:04, 22 November 2019 (UTC)[reply] Translation [edit] @Jonas Kress (WMDE), Smalyshev (WMF): How to translate all this without breaking the parser that import all of this into wdqs ? I notice that the query service itself is not translated, but it should be possible to parse the resulting page for each language and feed this into translations for wdqs in all those languages. author TomT0m / talk page 11:15, 15 October 2016 (UTC)[reply] @TomT0m: WDQS scrapes the html content of this page, so when this page is translated we could show it in WDQS. --Jonas Kress (WMDE) (talk) 12:27, 15 October 2016 (UTC)[reply] Thanks, so no problems translating it. I'll put the \"translate\" tags. author TomT0m / talk page 12:30, 15 October 2016 (UTC)[reply] And than everything was broken. I reverted all the translate stuff. Please first test in some sandbox first before doing a next try. Why do we want to add translations to this page anyway? It makes the source unreadable. Multichill (talk) 19:53, 16 October 2016 (UTC)[reply] @Multichill: My guess is that very few people read the source compared to the person who have to read the examples. OK, putting tags makes the stuff sighty less readable but one of the next WMF move is to modernize the texteditor and has been visual editor. Please ask themselves to take care of the translate extension to remove the burden ;) This is the best way to deal with stuff. Not to refuse translations ... author TomT0m / talk page 06:23, 17 October 2016 (UTC)[reply] Another note: loading revision with translate tags[2] takes 26 seconds, loading revision without translate tags[3] takes 7 seconds. For whatever reason parser cache did not work there (or was invalidated too often) when revision with translate tags was the latest one. It was very annoying. --Lockal (talk) 07:29, 17 October 2016 (UTC)[reply] Seven seconds is already way too long imho. But I'll post a butreport on translation extension phabricator to understand if there is no performance issue with this. But somethinh that might invalidate the cache, I don't know how the page is coded, is that some templates like {{Query labels}} uses {{Int:lang}} ... so the page depends of the language of the reader. author TomT0m / talk page 16:45, 17 October 2016 (UTC)[reply] Tracked in Phabricator Task T148446 Tracked in Phabricator Task T131516 Tracked in Phabricator Task T148442 Wouldn't it be the best to first request translations for https://query.wikidata.org? --Pasleim (talk) 08:14, 17 October 2016 (UTC)[reply] @Pasleim: My understanding is that this page is used as standalone example provider as well if people are annoyed by the loading time so transate all of this might be useful for non-english speakers as well here. author TomT0m / talk page 16:45, 17 October 2016 (UTC)[reply] Map a list of IDs to the corresponding values for other properties [edit] It would be good to have an example query which does what toollabs:wikidata-todo/multibeacon.php does (or used to do). --Nemo 10:22, 5 December 2016 (UTC)[reply] Query involving elevation above sea level (P2044) [edit] The SPARQL example query Italian mountains higher than 4000 m seems to return results of mountains with elevation higher than 4000 feet. Does anyone know a proper way to rephrase this query, to get only the correct results? --Zhenqinli (talk) 03:11, 10 March 2017 (UTC)[reply] I looks like results for this query are all in meters at this moment, but I updated it anyway to use normalized values. --Lockal (talk) 10:55, 16 March 2017 (UTC)[reply] Add link to this page from query service page? [edit] It was a little hard to find. Would be nice to have an 'edit' button on the top of the examples list that directed the user to here. --I9606 (talk) 20:09, 15 March 2017 (UTC)[reply] Suggestion of an improvement in the \"Recent events\" query [edit] The Recent events query currently uses the following syntax: # with a point in time or start date
OPTIONAL { ?event wdt:P585 ?date. }
OPTIONAL { ?event wdt:P580 ?date. }
# but at least one of those
FILTER(BOUND(?date) && DATATYPE(?date) = xsd:dateTime). but that sounds a bit weird to me to use \"OPTIONAL\" for something that isn't actually optional. Why don't we do something like this? """@en;
  dcterms:isPartOf <https://www.wikidata.org//wiki/Wikidata_talk:SPARQL_query_service/queries/examples>;
  dcterms:license <https://creativecommons.org/licenses/by-sa/4.0/>;
  sh:prefixes _:wikidata_prefixes;
  schema:target <https://query.wikidata.org/sparql/> .
