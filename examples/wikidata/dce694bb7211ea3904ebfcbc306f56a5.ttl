@prefix sh: <http://www.w3.org/ns/shacl#> .
@prefix rdf: <http://www.w3.org/1999/02/22-rdf-syntax-ns#> .
@prefix rdfs: <http://www.w3.org/2000/01/rdf-schema#> .
@prefix dcterms: <http://purl.org/dc/terms/> .
@prefix schema: <https://schema.org/> .

<https://www.wikidata.org/#query-dce694bb7211ea3904ebfcbc306f56a5> a sh:SPARQLExecutable,
    sh:SPARQLSelectExecutable;
  dcterms:isPartOf <https://www.wikidata.org//wiki/Wikidata:SPARQL_query_service/queries/examples/lb>,
    <https://www.wikidata.org//wiki/Wikidata:SPARQL_query_service/queries/examples/th>,
    <https://www.wikidata.org//wiki/Wikidata:SPARQL_query_service/queries/examples/eu>,
    <https://www.wikidata.org//wiki/Wikidata:SPARQL_query_service/queries/examples/en-gb>,
    <https://www.wikidata.org//wiki/Wikidata:SPARQL_query_service/queries/examples/vec>,
    <https://www.wikidata.org//wiki/Wikidata:SPARQL_query_service/queries/examples/hy>,
    <https://www.wikidata.org//wiki/Wikidata:SPARQL_query_service/queries/examples/id>,
    <https://www.wikidata.org//wiki/Wikidata:SPARQL_query_service/queries/examples/be-tarask>,
    <https://www.wikidata.org//wiki/Wikidata:SPARQL_query_service/queries/examples/tr>,
    <https://www.wikidata.org//wiki/Wikidata:SPARQL_query_service/queries/examples/ro>,
    <https://www.wikidata.org//wiki/Wikidata:SPARQL_query_service/queries/examples/he>,
    <https://www.wikidata.org//wiki/Wikidata:SPARQL_query_service/queries/examples/zh>,
    <https://www.wikidata.org//wiki/Wikidata:SPARQL_query_service/queries/examples/pt-br>,
    <https://www.wikidata.org//wiki/Wikidata:SPARQL_query_service/queries/examples/si>,
    <https://www.wikidata.org//wiki/Wikidata:SPARQL_query_service/queries/examples/eo>,
    <https://www.wikidata.org//wiki/Wikidata:SPARQL_query_service/queries/examples/da>,
    <https://www.wikidata.org//wiki/Wikidata:SPARQL_query_service/queries/examples/ar>,
    <https://www.wikidata.org//wiki/Wikidata:SPARQL_query_service/queries/examples/ko>,
    <https://www.wikidata.org//wiki/Wikidata:SPARQL_query_service/queries/examples/pl>,
    <https://www.wikidata.org//wiki/Wikidata:SPARQL_query_service/queries/examples/ms>,
    <https://www.wikidata.org//wiki/Wikidata:SPARQL_query_service/queries/examples/sv>,
    <https://www.wikidata.org//wiki/Wikidata:SPARQL_query_service/queries/examples/lt>,
    <https://www.wikidata.org//wiki/Wikidata:SPARQL_query_service/queries/examples/nl>,
    <https://www.wikidata.org//wiki/Wikidata:SPARQL_query_service/queries/examples/ca>,
    <https://www.wikidata.org//wiki/Wikidata:SPARQL_query_service/queries/examples/uk>,
    <https://www.wikidata.org//wiki/Wikidata:SPARQL_query_service/queries/examples/it>,
    <https://www.wikidata.org//wiki/Wikidata:SPARQL_query_service/queries/examples/ja>,
    <https://www.wikidata.org//wiki/Wikidata:SPARQL_query_service/queries/examples/es>,
    <https://www.wikidata.org//wiki/Wikidata:SPARQL_query_service/queries/examples/cs>,
    <https://www.wikidata.org//wiki/Wikidata:SPARQL_query_service/queries/examples/ru>,
    <https://www.wikidata.org//wiki/Wikidata:SPARQL_query_service/queries/examples/de>,
    <https://www.wikidata.org//wiki/Wikidata:SPARQL_query_service/queries/examples/fr>,
    <https://www.wikidata.org//wiki/Wikidata:SPARQL_query_service/queries/examples/en>,
    <https://www.wikidata.org//wiki/Wikidata:SPARQL_query_service/queries/examples>;
  dcterms:license <https://creativecommons.org/licenses/by-sa/4.0/>;
  sh:prefixes _:genid-4e694113159d4e3db4a1a913894a81d830032-wikidata_prefixes, _:genid-4e694113159d4e3db4a1a913894a81d830032-C06B424623B18666AD1AAD5A49058558,
    _:genid-4e694113159d4e3db4a1a913894a81d830032-D29A5F862C2CDEE08EF119F90D6AC6DF, _:genid-4e694113159d4e3db4a1a913894a81d830032-91D9CB142257E1E393F41DE6C8428637,
    _:genid-4e694113159d4e3db4a1a913894a81d830032-CDF1EF20040ED90A9FDDA8AA963C875C, _:genid-4e694113159d4e3db4a1a913894a81d830032-38A57BC960F5765B9A65F5A0C91451C7,
    _:genid-4e694113159d4e3db4a1a913894a81d830032-5990BCE83A551658B48E11CEBBA8D1EB, _:genid-4e694113159d4e3db4a1a913894a81d830032-0F44C75D3CDB40A32E824769DBF0AB60,
    _:genid-4e694113159d4e3db4a1a913894a81d830032-0862E1658028AFE4CB7F8271716BB752, _:genid-4e694113159d4e3db4a1a913894a81d830032-0CB26A5CE99BFDFF2AE1EE599509CC19,
    _:genid-4e694113159d4e3db4a1a913894a81d830032-9D2207F6AC963ED780597F7CD17B7A45, _:genid-4e694113159d4e3db4a1a913894a81d830032-3A49122110E5F6C74B7790146FC8394A,
    _:genid-4e694113159d4e3db4a1a913894a81d830032-BF894C1DD466EC884F49A70128DB055B, _:genid-4e694113159d4e3db4a1a913894a81d830032-AABF1546B20C541EB9C4923192F1C4F5,
    _:genid-4e694113159d4e3db4a1a913894a81d830032-C88427D459380E8540D0651A0907B0E4, _:genid-4e694113159d4e3db4a1a913894a81d830032-EAF38CA9C7D1E703AE95469BE10EDDAA,
    _:genid-4e694113159d4e3db4a1a913894a81d830032-9151C0D5D7CA4CFFA77EE2A157286DBD, _:genid-4e694113159d4e3db4a1a913894a81d830032-AC8671ACD2124D7BB5929C256F53D609,
    _:genid-4e694113159d4e3db4a1a913894a81d830032-1EB88D56AAB36F587FA2437CD2B77E2F, _:genid-4e694113159d4e3db4a1a913894a81d830032-3F047600EF4C2CACFE15812D74197D66,
    _:genid-4e694113159d4e3db4a1a913894a81d830032-7534C3CF26E32A5F95CA5563DD590B3E, _:genid-4e694113159d4e3db4a1a913894a81d830032-EE1EEA81448B6FFA156E91B3026F670C,
    _:genid-4e694113159d4e3db4a1a913894a81d830032-E4D814301555670EBF1487A1B92C6191, _:genid-4e694113159d4e3db4a1a913894a81d830032-F2F37514787EDFFFEE32F7BE52D82FDD,
    _:genid-4e694113159d4e3db4a1a913894a81d830032-139E40C8E24FF4E23F44E2BEF6D6B856, _:genid-4e694113159d4e3db4a1a913894a81d830032-2C1972CD752D08736594832F2D14153F,
    _:genid-4e694113159d4e3db4a1a913894a81d830032-EE93E66DB060E0D5A400D951C480CFA3, _:genid-4e694113159d4e3db4a1a913894a81d830032-45888C9B886F805A1E420B6DB634715F,
    _:genid-4e694113159d4e3db4a1a913894a81d830032-739B972458FC84B9DE2FAAAD58087FED, _:genid-4e694113159d4e3db4a1a913894a81d830032-434F472AC09094E346DDC768AD11E962,
    _:genid-4e694113159d4e3db4a1a913894a81d830032-2A52D5B4BA237A5A82FE36B58FC5062A, _:genid-4e694113159d4e3db4a1a913894a81d830032-86ECD35A5F0DB2C6428C5465DA3353D5,
    _:genid-4e694113159d4e3db4a1a913894a81d830032-6602FAAAE1C6385C871AA9F8631BAECF, _:genid-4e694113159d4e3db4a1a913894a81d830032-E05E651FF5BB97AAA2D3A97720F93F4E;
  schema:target <https://query.wikidata.org/sparql/>;
  sh:select """PREFIX wikibase: <http://wikiba.se/ontology#>
PREFIX wdt: <http://www.wikidata.org/prop/direct/>
PREFIX wd: <http://www.wikidata.org/entity/>
PREFIX bd: <http://www.bigdata.com/rdf#>
#Interesting maintenance query that shows the relative prominence of a country's current (living) population on Wikidata. The query tends to time out when using all countries at once, but it might be possible to get the figures for each individual country by using uncommenting the line as indicated below
SELECT
  ?country ?countryLabel
  ?wikiPersons
  ?population
  (ROUND(?wikiPersons/?population*1000000) AS ?wikiPersonsPerM)
WHERE
{
  { SELECT ?country (count(*) as ?wikiPersons) WHERE {
    {SELECT DISTINCT ?person ?country WHERE {
      wd:Q458 wdt:P150 ?country . # European Union contains administrative territorial entity
      # BIND( wd:Q30 AS ?country ) # use instead of previous line to check individual countries
      ?person wdt:P31 wd:Q5 .
      ?person wdt:P27 ?country .
      FILTER NOT EXISTS{ ?person wdt:P570 ?date } # only count living people
    } }
  } GROUP BY ?country }
  ?country wdt:P1082 ?population
  SERVICE wikibase:label { bd:serviceParam wikibase:language \"[AUTO_LANGUAGE],mul,en\" }
}
ORDER BY DESC(?wikiPersonsPerM)""" .
