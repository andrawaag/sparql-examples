@prefix sh: <http://www.w3.org/ns/shacl#> .
@prefix rdf: <http://www.w3.org/1999/02/22-rdf-syntax-ns#> .
@prefix rdfs: <http://www.w3.org/2000/01/rdf-schema#> .
@prefix dcterms: <http://purl.org/dc/terms/> .
@prefix schema: <https://schema.org/> .

<https://www.wikidata.org/#query-f48583a114f9c8fcc3faeb66c87f6394> a sh:SPARQLExecutable,
    sh:SPARQLSelectExecutable;
  rdfs:comment "Properties: instance of (P31)   , subclass of (P279)   , title (P1476)   , performer (P175)   , YouTube video ID (P1651)   , determination method (P459)   , point in time (P585)   , charted in (P2291)   , ranking (P1352)   "@en;
  dcterms:isPartOf <https://www.wikidata.org//wiki/Wikidata:WikiProject_Music/cs>, <https://www.wikidata.org//wiki/Wikidata:WikiProject_Music/ar>,
    <https://www.wikidata.org//wiki/Wikidata:WikiProject_Music/de>, <https://www.wikidata.org//wiki/Wikidata:WikiProject_Music/ru>,
    <https://www.wikidata.org//wiki/Wikidata:WikiProject_Music/uk>, <https://www.wikidata.org//wiki/Wikidata:WikiProject_Music/fr>,
    <https://www.wikidata.org//wiki/Wikidata:WikiProject_Music/en>, <https://www.wikidata.org//wiki/Wikidata:WikiProject_Music>,
    <https://www.wikidata.org//wiki/Wikidata:WikiProject_Music/be-tarask>, <https://www.wikidata.org//wiki/Wikidata:WikiProject_Music/ha>,
    <https://www.wikidata.org//wiki/Wikidata:WikiProject_Music/pt>, <https://www.wikidata.org//wiki/Wikidata:WikiProject_Music/he>,
    <https://www.wikidata.org//wiki/Wikidata:WikiProject_Music/zh>, <https://www.wikidata.org//wiki/Wikidata:WikiProject_Music/ca>,
    <https://www.wikidata.org//wiki/Wikidata:WikiProject_Music/dtp>, <https://www.wikidata.org//wiki/Wikidata:WikiProject_Music/id>,
    <https://www.wikidata.org//wiki/Wikidata:WikiProject_Music/syl>, <https://www.wikidata.org//wiki/Wikidata:WikiProject_Music/bn>,
    <https://www.wikidata.org//wiki/Wikidata:WikiProject_Music/ms>, <https://www.wikidata.org//wiki/Wikidata:WikiProject_Music/ms-arab>,
    <https://www.wikidata.org//wiki/Wikidata:WikiProject_Music/es>, <https://www.wikidata.org//wiki/Wikidata:WikiProject_Music/ja>,
    <https://www.wikidata.org//wiki/Wikidata:WikiProject_Music/tr>, <https://www.wikidata.org//wiki/Wikidata:WikiProject_Music/hy>,
    <https://www.wikidata.org//wiki/Wikidata:WikiProject_Music/nl>, <https://www.wikidata.org//wiki/Wikidata:WikiProject_Music/gu>,
    <https://www.wikidata.org//wiki/Wikidata:WikiProject_Music/da>, <https://www.wikidata.org//wiki/Wikidata:WikiProject_Music/it>,
    <https://www.wikidata.org//wiki/Wikidata:WikiProject_Music/sv>, <https://www.wikidata.org//wiki/Wikidata:WikiProject_Music/pl>;
  dcterms:license <https://creativecommons.org/licenses/by-sa/4.0/>;
  sh:prefixes _:genid-4e694113159d4e3db4a1a913894a81d851236-wikidata_prefixes, _:genid-4e694113159d4e3db4a1a913894a81d851236-849E6CDB48D3365C1AFDD041DE7356D3,
    _:genid-4e694113159d4e3db4a1a913894a81d851236-0DB0ACA8A08F1DA15EDB436C6C9643E1, _:genid-4e694113159d4e3db4a1a913894a81d851236-08E5BA0A2345D22385595FF7C93A3018,
    _:genid-4e694113159d4e3db4a1a913894a81d851236-F221BA01148B3E425DD2D6BF9EE52305, _:genid-4e694113159d4e3db4a1a913894a81d851236-0E509377805BD31E71F2AFBD9879ADAE,
    _:genid-4e694113159d4e3db4a1a913894a81d851236-467BB1A3C2AA39DC774450B04BFB27E5, _:genid-4e694113159d4e3db4a1a913894a81d851236-1F17D90677023BB69EAB21B21AF370D9,
    _:genid-4e694113159d4e3db4a1a913894a81d851236-F3C1D4FE8522DBA2CFD772196A4B7024, _:genid-4e694113159d4e3db4a1a913894a81d851236-01116264F22BCDB9951C5A59E9DBB86B,
    _:genid-4e694113159d4e3db4a1a913894a81d851236-0560E7AFC4277413DD05E35D2DCDC491, _:genid-4e694113159d4e3db4a1a913894a81d851236-A2CF7952854F9A89BD27995FB9469370,
    _:genid-4e694113159d4e3db4a1a913894a81d851236-B03D4222842A87CC18B749B5650A8186, _:genid-4e694113159d4e3db4a1a913894a81d851236-FCAF7E4F9BE70018014993F35B4DE71D,
    _:genid-4e694113159d4e3db4a1a913894a81d851236-BFB19475E1E4A25B9C0FDFDC77E481BE, _:genid-4e694113159d4e3db4a1a913894a81d851236-5D8C884F1A23288919142702AE326AA0,
    _:genid-4e694113159d4e3db4a1a913894a81d851236-6E5020077986CDD747CBFCA5B3E7321E, _:genid-4e694113159d4e3db4a1a913894a81d851236-6498E3CA039E11622564318493D8A453,
    _:genid-4e694113159d4e3db4a1a913894a81d851236-8538C615A65CA9ABD44BDF0562C3DB36, _:genid-4e694113159d4e3db4a1a913894a81d851236-9CA713C76530504A514E96A8FFC4919D,
    _:genid-4e694113159d4e3db4a1a913894a81d851236-729AE8772F69FC85BEFB9ABA0D251C73, _:genid-4e694113159d4e3db4a1a913894a81d851236-1C92084F0431F28853DC435C9B99E5DD,
    _:genid-4e694113159d4e3db4a1a913894a81d851236-F4B8C7B1052CB109ED99F8C34CDD72A7, _:genid-4e694113159d4e3db4a1a913894a81d851236-CF5634CE356201BDAC2404DD7BCC00E5,
    _:genid-4e694113159d4e3db4a1a913894a81d851236-FF5E8E89CA70A6FA2D0A9C2F7D1F9CAF, _:genid-4e694113159d4e3db4a1a913894a81d851236-7B1832E62B8819D9A9224A433C1C2CFA,
    _:genid-4e694113159d4e3db4a1a913894a81d851236-7763CF27EEA8D6ABA9659F9F24F7E895, _:genid-4e694113159d4e3db4a1a913894a81d851236-C6390698EEAFFDADAC74B483F65C4E6A,
    _:genid-4e694113159d4e3db4a1a913894a81d851236-B585C3A0E55EF98509D1C34901C743C9, _:genid-4e694113159d4e3db4a1a913894a81d851236-B77E3E91D58BB90358C61EAFB50563C8,
    _:genid-4e694113159d4e3db4a1a913894a81d851236-71F3699FB4970A6D01A6AC9F6ADBEAED, _:genid-4e694113159d4e3db4a1a913894a81d851236-E4C25E7D86798118672FD4D6A6692FEC,
    _:genid-4e694113159d4e3db4a1a913894a81d851236-3C5D743803DB36618E4E2065C34C9765, _:genid-4e694113159d4e3db4a1a913894a81d851236-F9BFB51F7FC02430D4E66285AA5F006E,
    _:genid-4e694113159d4e3db4a1a913894a81d851236-01BC2286A584F74C8BE695DB96AE6B48, _:genid-4e694113159d4e3db4a1a913894a81d851236-1D1D806B92E47524ED5B3D7469498751,
    _:genid-4e694113159d4e3db4a1a913894a81d851236-0CF1AB7C1C4F89C0E33F515E15F03A41, _:genid-4e694113159d4e3db4a1a913894a81d851236-567F87D29459094B6A2B6F748FE8A432;
  schema:target <https://query.wikidata.org/sparql/>;
  sh:select """PREFIX wikibase: <http://wikiba.se/ontology#>
PREFIX wdt: <http://www.wikidata.org/prop/direct/>
PREFIX wd: <http://www.wikidata.org/entity/>
PREFIX rdfs: <http://www.w3.org/2000/01/rdf-schema#>
PREFIX ps: <http://www.wikidata.org/prop/statement/>
PREFIX pq: <http://www.wikidata.org/prop/qualifier/>
PREFIX p: <http://www.wikidata.org/prop/>
PREFIX bd: <http://www.bigdata.com/rdf#>
SELECT ?musical_composition ?title (GROUP_CONCAT(DISTINCT ?performerLabel; separator=\", \") AS ?performers) (YEAR(?chart_year) AS ?year) ?ranking (SAMPLE(?youtube_video_candidate) AS ?youtube_video) WHERE {
  SERVICE wikibase:label {
    bd:serviceParam wikibase:language \"[AUTO_LANGUAGE],en\".
    ?performer rdfs:label ?performerLabel  
  }
  ?musical_composition wdt:P31/wdt:P279* wd:Q2188189.
  ?musical_composition p:P2291 ?charted_in.
  OPTIONAL { ?musical_composition wdt:P1476 ?title }.
  OPTIONAL { ?musical_composition wdt:P175 ?performer }.
  OPTIONAL { ?musical_composition wdt:P1651 ?youtube_video_id }.
  BIND(CONCAT(\"https://www.youtube.com/watch?v=\", ?youtube_video_id) AS ?youtube_video_candidate).
  ?charted_in ps:P2291 ?chart.
  ?charted_in pq:P1352 ?ranking.
  ?chart wdt:P459 wd:Q17036134.
  ?chart wdt:P585 ?chart_year.
}
GROUP BY ?musical_composition ?charted_in ?title ?chart ?ranking ?chart_year
ORDER BY DESC(?year) ASC(?ranking)""" .
