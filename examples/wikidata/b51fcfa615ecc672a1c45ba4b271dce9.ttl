@prefix sh: <http://www.w3.org/ns/shacl#> .
@prefix rdf: <http://www.w3.org/1999/02/22-rdf-syntax-ns#> .
@prefix rdfs: <http://www.w3.org/2000/01/rdf-schema#> .
@prefix dcterms: <http://purl.org/dc/terms/> .
@prefix schema: <https://schema.org/> .

<https://www.wikidata.org/#query-b51fcfa615ecc672a1c45ba4b271dce9> a sh:SPARQLExecutable;
  rdfs:comment """Other languages: Bahasa Indonesia British English Deutsch English Esperanto Lëtzebuergesch Nederlands Türkçe català dansk español français italiano polski svenska Ελληνικά беларуская (тарашкевіца) русский српски / srpski українська հայերեն עברית العربية བོད་ཡིག 中文 日本語 粵語 WDQS interface Tooltips when hovering SPARQL code WDQS result display selection Link to show script in WDQS results window after a Try It  このページはSPARQLクエリサービスの結果表示について、利用者にどんな選択肢があるか理解する手助けになります。 クエリのサンプルページには自分で試せる良いサンプルが多数あります！ Open the WDQS interface and then: select your language in of the upper tool bar. write a valid SPARQL code in the text area. check your script by hovering the elements with your mouse; tooltips appear and should be consistent with what you intend to do. They adopt the language you have selected (default to english). then click on blue button Execute query of the sidebar to launch the request. Red square is lit in the sidebar while the command executes. クエリ実行後、結果の表示方法を「表示」ボタンで選択できます。クエリやデータ型に応じて、いくつかの表示方法が利用できます。 Source example # Recent events
SELECT ?event ?eventLabel ?date
WHERE
{
  # find events
  ?event wdt:P31/wdt:P279* wd:Q1190554.
  # with a point in time or start date
  OPTIONAL { ?event wdt:P585 ?date. }
  OPTIONAL { ?event wdt:P580 ?date. }
  # but at least one of those
  FILTER(BOUND(?date) && DATATYPE(?date) = xsd:dateTime).
  # not in the future, and not more than 31 days ago
  BIND(NOW() - ?date AS ?distance).
  FILTER(0 <= ?distance && ?distance < 31).
  # and get a label as well
  OPTIONAL {
    ?event rdfs:label ?eventLabel.
    FILTER(LANG(?eventLabel) = \"en\").
    }
}
# limit to 10 results so we don't timeout
LIMIT 10 Note: You can also run directly a hardcoded request via the TryIt links of this page. When it brings you directly to the result display you can always return to the source script unsing the link at the bottom of the interface. Contents 1 表 (デフォルト) 2 画像グリッド 2.1 オプション 3 地図 3.1 オプション 4 グラフの種類：折れ線、棒、分布、面 5 バブルチャート 6 ツリーマップ 7 木構造 8 タイムライン 8.1 オプション 9 次元 10 グラフ 11 追加情報 11.1 RDF データ型のマッピング 11.2 フォーマットする 11.3 モバイル / レスポンシブ 11.4 埋め込みモード 11.5 結果のダウンロード 11.6 デフォルトのビュー 11.7 結果のビューの選択肢 11.8 タイトル 11.9 List of WDQS tags 11.10 言語の自動設定 11.11 座標の自動設定 表 (デフォルト) 結果データを表として表示します。これは結果表示のデフォルトのビューで、あらゆるデータ型を表示できます。SPARQLセレクト句の全ての変数を定型表のカラムにマッピングします。 表形式の結果 小さな画面でのカラムを入れ替えた表形式の結果  画像グリッド 画像グリッド 試す結果データを画像グリッドとして表示。グリッド項目ごとに大きな画像があり、クリックすると画像ギャラリーが開きます。コンテンツの項目は表形式の行データです。 変数 データ型 マッピング 説明 * コモンズのメディア グリッド項目 画像カラムはグリッド項目を生成します。 画像のない行は無視されます。 It’s nonetheless possible to include no image rows in the result by modifying the sparql by including a default image in case the image variable is not bound: optional {
    ?item wdt:P18 ?img_ .
  }
  bind (if(bound(?img_), 
           ?img_, 
           <http://commons.wikimedia.org/wiki/Special:FilePath/File:Profile_avatar_placeholder_large.png>) as ?image) # [[:commons:File:Profile_avatar_placeholder_large.png]] as a placeholder Here the file commons:File:Profile avatar placeholder large.png is used as a placeholder, you can use your own. See a complete query example using this technique.  オプション オプション名 型 説明 hide 1つまたは複数の変数名（?で始まる文字列）、単一の値または配列 これらの変数を結果に表示しない。  地図 結果のデータをOpenStreetMapのデータとともに表示します。 変数 データ型 マッピング 説明 * 座標または地理的シェイプ 地図のマーカー カラムから地図上にマーカーが生成されます。 各マーカーのコンテンツは表形式の行データです。 ?layer 地図マーカーレイヤー フィルタリングできる色付きの地図レイヤーを生成します。 ?rgb 色 色付きの地図マーカー 例: 黒色は００００００ 複数のレイヤーがある地図 試す ベルギー国内の空港の分布図 試す 技術的には、地点座標だけでなく、どのWKTリテラルも表示可能です。 非点ジオメトリ値はウィキデータに格納されませんが、SPARQLでCONCAT()やSTRDT()などの関数を使うことで構築できます。LINESTRING()ジオメトリの例としてチェコの鉄道線の地図を参照してください。 オプション 例えば、#defaultView:Map{\"hide\":[\"?foo\", \"?bar\"],\"layer\":\"?bar\"}を使って、複数の値のときは配列を使って指定してください。 オプション名 型 説明 hide 1つまたは複数の変数名（?で始まる文字列）、単一の値または配列 これらの変数を結果に表示しない。 layer 1つまたは複数の変数名（?で始まる文字列）、単一の値または配列 それらの変数は地図のレイヤーで、既定の?layerLabelあるいは?layerの代わりに用います。 markercluster ブール値またはオブジェクト * 値がオブジェクトの場合、周辺の地図マーカをクラスタリングする地図プラグインのLeaflet.markerclusterへ渡します。（もし値が空白{}の場合、既定のオプションで Leaflet.markercluster が有効になります。） もし値がtrue（地図レイヤーのないクエリの既定）の場合、Leaflet.markercluster は周辺の地図マーカをクラスタリングしない特別な選択肢のセット（まったく同一の座標にあるマーカを「散らして spiderfy」）可能な限り既定の地図の表示を複製しようとします。 値がfalse（地図レイヤのクエリの既定）の場合、Leaflet.markercluster はむこうのままです。 (If the value is the empty object {}, Leaflet.markercluster is enabled with its default options.) If the value is true (default for queries without map layers), Leaflet.markercluster is enabled with a special set of options that doesn’t cluster any nearby map markers (it only “spiderfies” markers with exactly identical coordinates) and attempts to replicate the default map look as much as possible. If the value is false (default for queries with map layers), Leaflet.markercluster is not enabled.  グラフの種類：折れ線、棒、分布、面 グラフの種類を例とともに示します。 変数 データ型 マッピング 説明 * 数値 ラベル 日付時刻 x軸 y軸 最初の項目はx軸、2番目はy軸 * ラベル カテゴリ/凡例の項目（オプション） 上述の項目が分布されるまで保留 * ラベル ストーリーボード/動画（オプション） 上述の項目が分布されるまで保留 折れ線グラフ 試す 面グラフ 試す 棒グラフ（動画付き） 試す 散布図（アニメーション付き） 試す  バブルチャート バブルチャート 試す バブルのサイズと色を構成できるバブルチャートを表示。項目を与えたときに生成されるバブルは、Wikidata.orgにリンクされます。 変数 データ型 マッピング * ラベル バブルのラベル * 数値 バブルのサイズ * 項目 バブルのリンク（オプション） ?rgb 色 バブルの色（オプション）  ツリーマップ ツリーマップ 試す ズームできるツリーマップを表示 変数 データ型 マッピング 説明 * ラベル ラベル 行の最初のラベルはツリーマップの最初のレベルに対応。 2番目のラベルは2番目のレベルに対応。 3番目のラベルは3番目のラベル。以下同じ。 * 項目 リンク（オプション） * 量 サイズ  木構造 展開可能なツリーを表示。 木構造 試す 変数 データ型 マッピング 説明 * 項目 ノード識別子 最初の項目でルートのノードに設定、同じ行の2番目以下を入れ子にします。 * ラベル ノードのラベル（オプション） 現在のノードにラベルを追加します。 * 数値 ノードのラベル（オプション） * コモンズのメディア 項目の画像  タイムライン タイムライン 試す 探索可能なタイムラインを表示します。 変数 データ型 マッピング 説明 * 日付時刻 項目の時点 項目の終了時点 最初の日付でタイムライン上の項目の位置を設定。 2番目の日付がある場合、最初と2番目の値で開始と終了の日付を設定。 * コモンズのメディア 項目の画像  オプション オプション名 型 説明 hide 1つまたは複数の変数名（?で始まる文字列）、単一の値または配列 これらの変数を結果に表示しない。  次元 次元 試す 次元とそのリンクを表示します。また軸の部分を選択すると、フィルタリングできます。このグラフの型はparallel coordinatesとしても知られています。 変数 データ型 マッピング 説明 * ラベル 次元 結果内の全てのカラムは次元にマッピングされます * 数値 * 日付時刻  グラフ 階層的な順序付けと項目の探索ができるインタラクティブなグラフを表示します。 変数 データ型 マッピング 説明 * 項目 ノードID 行の最初の項目に同じ行の項目をポイントする矢印があります * ラベル ノードのラベル（オプション） * コモンズのメディア ノードの画像（オプション） ?rgb 色 ノードの色（オプション） 例：黒色は000000。 * 数値 ノードのサイズ（オプション） ?edgeLabel ラベル エッジのラベル（オプション） グラフ File:エイブラハム・リンカーンを閲覧するグラフ  追加情報  RDF データ型のマッピング RDF 型 RDF データ型 制約 データ型 URI 始まりの文字列 http://www.wikidata.org/entity/Q Entity URI 始まりの文字列 http://commons.wikimedia.org/wiki/Special:FilePath コモンズのメディア Literal http://www.w3.org/2001/XMLSchema#dateTime DateTime Literal http://www.opengis.net/ont/geosparql#wktLiteral Coordinate Literal http://www.w3.org/2001/XMLSchema#double http://www.w3.org/2001/XMLSchema#float http://www.w3.org/2001/XMLSchema#decimal http://www.w3.org/2001/XMLSchema#integer http://www.w3.org/2001/XMLSchema#long http://www.w3.org/2001/XMLSchema#int http://www.w3.org/2001/XMLSchema#short http://www.w3.org/2001/XMLSchema#nonNegativeInteger http://www.w3.org/2001/XMLSchema#positiveInteger http://www.w3.org/2001/XMLSchema#unsignedLong http://www.w3.org/2001/XMLSchema#unsignedInt http://www.w3.org/2001/XMLSchema#unsignedShort http://www.w3.org/2001/XMLSchema#nonPositiveInteger http://www.w3.org/2001/XMLSchema#negativeInteger 数値 Literal RDF データ型がありません ラベル Literal プロパティを持っています xml:lang ラベル Literal 文字列が一致 /^[0-9A-F]{6}$/ 色  フォーマットする 以下のデータ型には特別な形式があります： データ型 形式 Entity Wikidata.orgにリンク ラベルは次のように短縮化されます wd:Qxx 項目を探索（拡大アイコン） DateTime MM DD, YYYY ツールチップは生のISOタイムスタンプを表示します Commons Media Commons.Wikimedia.orgにリンク ギャラリーを表示（画像アイコン）  モバイル / レスポンシブ 結果ビューは様々な装置や解像度で動作するように作られています。見た目は利用できるスペースに依存します。 埋め込みモード 結果ビューは「iframe」を通じてリンクしたり埋め込んだりできます。必要なリンクやコードは「上記メニュー内のリンク」をクリックして取得できます。 差異を見る： クエリヘのリンク 及び 結果へのリンク あるいは埋め込みコード： <iframe style=\"width:80vw; height:50vh;\" scrolling=\"yes\" frameborder=\"0\" src=\"http://tinyurl.com/zwf4k2w\">  結果のダウンロード 結果のダウンロードボタン クエリの結果をエクスポートする方法はいくつかあります。ダウンロードタブから、JSON、TSV、およびCSVというの3つのオープン標準な形式でデータをダウンロードすることができます。 XML形式で取得したい場合は、リンク > SPARQLエンドポイントをクリックしてください。グラフィックなビューにはSVGファイルとしてダウンロードできるものもあります：この機能の例外は表、画像グリッド、タイムライン、グラフ・ビルダー、地図及びグラフのビューで、それ以外では有効です。 デフォルトのビュー デフォルトのビューは、コメントを使うことで各SPARQLクエリにおいて変更できます： #defaultView:[NAME] 例: #defaultView:ImageGrid  結果のビューの選択肢 結果のビューはさまざまな選択肢で定義され、JSON (Q2063)形式の指定でdefaultViewコメント（前項を参照）もしくは別のviewコメントに準拠します。 #defaultView:Map{\"layer\": \"?typeLabel\"}
#view:ImageGrid{\"hide\": \"?coords\"}  タイトル 結果ビューにタイトルを表示することができます。タイトルはtitleコメントによって設定することができます。 #title:A title of your choice List of WDQS tags WDQS tag Display options Notes #defaultView:Table Table default format when omitted #defaultView:ImageGrid Image grid Graph builder access to the graph builder tool #defaultView:Map Map #defaultView:LineChart Line chart #defaultView:BarChart Bar chart #defaultView:ScatterChart Scatter chart #defaultView:AreaChart Area chart #defaultView:BubbleChart Bubble chart #defaultView:TreeMap Tree map #defaultView:Tree Tree #defaultView:Timeline Timeline #defaultView:Dimensions Dimensions #defaultView:Graph Graph #title: title of the WDQS results frame #view: equivalent to prefix #defaultView: 言語の自動設定 マジックキーワード[AUTO_LANGUAGE]を使うと、クエリを送信するときに利用者の使用言語に置き換えられます。これにより、利用者の使用言語を使って結果を表示するクエリを書くことができます。例: """@en;
  dcterms:isPartOf <https://www.wikidata.org//wiki/Wikidata:SPARQL_query_service/Wikidata_Query_Help/Result_Views/ja>;
  dcterms:license <https://creativecommons.org/licenses/by-sa/4.0/>;
  sh:prefixes _:wikidata_prefixes;
  schema:target <https://query.wikidata.org/sparql/> .
