@prefix sh: <http://www.w3.org/ns/shacl#> .
@prefix rdf: <http://www.w3.org/1999/02/22-rdf-syntax-ns#> .
@prefix rdfs: <http://www.w3.org/2000/01/rdf-schema#> .
@prefix dcterms: <http://purl.org/dc/terms/> .
@prefix schema: <https://schema.org/> .

<https://www.wikidata.org/#query-2995f8b47d8de2e531ec355ce539cc45> a sh:SPARQLExecutable,
    sh:SPARQLSelectExecutable;
  dcterms:isPartOf <https://www.wikidata.org//wiki/Wikidata:SPARQL_query_service/queries/examples/lb>,
    <https://www.wikidata.org//wiki/Wikidata:SPARQL_query_service/queries/examples/th>,
    <https://www.wikidata.org//wiki/Wikidata:SPARQL_query_service/queries/examples/eu>,
    <https://www.wikidata.org//wiki/Wikidata:SPARQL_query_service/queries/examples/en-gb>,
    <https://www.wikidata.org//wiki/Wikidata:SPARQL_query_service/queries/examples/vec>,
    <https://www.wikidata.org//wiki/Wikidata:SPARQL_query_service/queries/examples/hy>,
    <https://www.wikidata.org//wiki/Wikidata:SPARQL_query_service/queries/examples/id>,
    <https://www.wikidata.org//wiki/Wikidata:SPARQL_query_service/queries/examples/be-tarask>,
    <https://www.wikidata.org//wiki/Wikidata:SPARQL_query_service/queries/examples/tr>,
    <https://www.wikidata.org//wiki/Wikidata:SPARQL_query_service/queries/examples/ro>,
    <https://www.wikidata.org//wiki/Wikidata:SPARQL_query_service/queries/examples/he>,
    <https://www.wikidata.org//wiki/Wikidata:SPARQL_query_service/queries/examples/zh>,
    <https://www.wikidata.org//wiki/Wikidata:SPARQL_query_service/queries/examples/pt-br>,
    <https://www.wikidata.org//wiki/Wikidata:SPARQL_query_service/queries/examples/si>,
    <https://www.wikidata.org//wiki/Wikidata:SPARQL_query_service/queries/examples/eo>,
    <https://www.wikidata.org//wiki/Wikidata:SPARQL_query_service/queries/examples/da>,
    <https://www.wikidata.org//wiki/Wikidata:SPARQL_query_service/queries/examples/ar>,
    <https://www.wikidata.org//wiki/Wikidata:SPARQL_query_service/queries/examples/ko>,
    <https://www.wikidata.org//wiki/Wikidata:SPARQL_query_service/queries/examples/pl>,
    <https://www.wikidata.org//wiki/Wikidata:SPARQL_query_service/queries/examples/ms>,
    <https://www.wikidata.org//wiki/Wikidata:SPARQL_query_service/queries/examples/sv>,
    <https://www.wikidata.org//wiki/Wikidata:SPARQL_query_service/queries/examples/lt>,
    <https://www.wikidata.org//wiki/Wikidata:SPARQL_query_service/queries/examples/nl>,
    <https://www.wikidata.org//wiki/Wikidata:SPARQL_query_service/queries/examples/ca>,
    <https://www.wikidata.org//wiki/Wikidata:SPARQL_query_service/queries/examples/uk>,
    <https://www.wikidata.org//wiki/Wikidata:SPARQL_query_service/queries/examples/it>,
    <https://www.wikidata.org//wiki/Wikidata:SPARQL_query_service/queries/examples/ja>,
    <https://www.wikidata.org//wiki/Wikidata:SPARQL_query_service/queries/examples/es>,
    <https://www.wikidata.org//wiki/Wikidata:SPARQL_query_service/queries/examples/cs>,
    <https://www.wikidata.org//wiki/Wikidata:SPARQL_query_service/queries/examples/ru>,
    <https://www.wikidata.org//wiki/Wikidata:SPARQL_query_service/queries/examples/de>,
    <https://www.wikidata.org//wiki/Wikidata:SPARQL_query_service/queries/examples/fr>,
    <https://www.wikidata.org//wiki/Wikidata:SPARQL_query_service/queries/examples/en>,
    <https://www.wikidata.org//wiki/Wikidata:SPARQL_query_service/queries/examples>;
  dcterms:license <https://creativecommons.org/licenses/by-sa/4.0/>;
  sh:prefixes _:genid-4e694113159d4e3db4a1a913894a81d856969-wikidata_prefixes, _:genid-4e694113159d4e3db4a1a913894a81d856969-69A4E1E6C782B0418E392103CFEFD0E6,
    _:genid-4e694113159d4e3db4a1a913894a81d856969-607B39971E9BD10DAF66AB66370A3C3C, _:genid-4e694113159d4e3db4a1a913894a81d856969-94237706555111647A29EB1973AB3389,
    _:genid-4e694113159d4e3db4a1a913894a81d856969-2B11030DB463D64D71A72A2135A45A2F, _:genid-4e694113159d4e3db4a1a913894a81d856969-9C9CC016221C652432C0BDCFF7B226E9,
    _:genid-4e694113159d4e3db4a1a913894a81d856969-969CCAF82C6EEFB8210F679B20835711, _:genid-4e694113159d4e3db4a1a913894a81d856969-B3932DC82E09B8C80690A04BA55387C3,
    _:genid-4e694113159d4e3db4a1a913894a81d856969-41844FC4F813FEFA0CCAF1867FC08C73, _:genid-4e694113159d4e3db4a1a913894a81d856969-D035DBE0B53244C86C5968C3B4BC4858,
    _:genid-4e694113159d4e3db4a1a913894a81d856969-2F8BAC4B2006B2EB2893E202A09ECD17, _:genid-4e694113159d4e3db4a1a913894a81d856969-69BE19E39722DB3798291320833C3C93,
    _:genid-4e694113159d4e3db4a1a913894a81d856969-D63168A8ECFE5D50DBF18A585D0003A2, _:genid-4e694113159d4e3db4a1a913894a81d856969-7B163E73B9349A6DF0DAD49E750A7480,
    _:genid-4e694113159d4e3db4a1a913894a81d856969-5697819A5D6BC57AD82E1BEDA2D72415, _:genid-4e694113159d4e3db4a1a913894a81d856969-41C7F9F7FD98E0B6D0C625A6D7AE0171,
    _:genid-4e694113159d4e3db4a1a913894a81d856969-D2CAFF392BB041D18462F8DC46DCC043, _:genid-4e694113159d4e3db4a1a913894a81d856969-4DFBAE0556A9C433DA4EA98EEC051238,
    _:genid-4e694113159d4e3db4a1a913894a81d856969-60529738215AEAFED1E15431595B45D7, _:genid-4e694113159d4e3db4a1a913894a81d856969-35A662722900631A6F310670513F5926,
    _:genid-4e694113159d4e3db4a1a913894a81d856969-6596C1E5061F3D0F3D17752AAEF68EC9, _:genid-4e694113159d4e3db4a1a913894a81d856969-E5E946E2595B4454405947A24AF65458,
    _:genid-4e694113159d4e3db4a1a913894a81d856969-8E738D85FD19DA27B87C8140F5487AA2, _:genid-4e694113159d4e3db4a1a913894a81d856969-8E2EA27786D1A733E97DD41C4465E422,
    _:genid-4e694113159d4e3db4a1a913894a81d856969-4A1D3E46FDEE15C82F48B29544AF7C36, _:genid-4e694113159d4e3db4a1a913894a81d856969-A2B93B07E1A76B5C8DC8FC64789EBA44,
    _:genid-4e694113159d4e3db4a1a913894a81d856969-FB008F51325C322A1883E4FD50E24522, _:genid-4e694113159d4e3db4a1a913894a81d856969-BA30DB13B731F736E7521A2A51B1C2BB,
    _:genid-4e694113159d4e3db4a1a913894a81d856969-6967D7DFF11EC333094372B0ED77D6F0, _:genid-4e694113159d4e3db4a1a913894a81d856969-764465293D1547F9452F1EC4CBA67628,
    _:genid-4e694113159d4e3db4a1a913894a81d856969-DD48D6DADCCB39F754E94E758DC7C9DA, _:genid-4e694113159d4e3db4a1a913894a81d856969-669702A58ED269D0C0AA46E7CFA61269,
    _:genid-4e694113159d4e3db4a1a913894a81d856969-244F1D3A8936B18170D62B55E607DA4D, _:genid-4e694113159d4e3db4a1a913894a81d856969-5DBC8D510C1231422B62CAC6D297FA69;
  schema:target <https://query.wikidata.org/sparql/>;
  sh:select """PREFIX wikibase: <http://wikiba.se/ontology#>
PREFIX wdt: <http://www.wikidata.org/prop/direct/>
PREFIX wd: <http://www.wikidata.org/entity/>
PREFIX bd: <http://www.bigdata.com/rdf#>
SELECT ?country ?countryLabel ?population ?totalCityPopulation (?population / ?totalCityPopulation AS ?ratio) {
  ?country wdt:P1082 ?population .
  SERVICE wikibase:label { bd:serviceParam wikibase:language \"[AUTO_LANGUAGE],mul,en\" }
  {
    SELECT ?country (SUM(?cityPopulation) AS ?totalCityPopulation) WHERE {
      ?city wdt:P31 wd:Q515 .
      ?city wdt:P17 ?country .
      ?city wdt:P1082 ?cityPopulation .
    } GROUP BY ?country
  }
} ORDER BY ?ratio""" .
