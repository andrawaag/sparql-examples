@prefix sh: <http://www.w3.org/ns/shacl#> .
@prefix rdf: <http://www.w3.org/1999/02/22-rdf-syntax-ns#> .
@prefix rdfs: <http://www.w3.org/2000/01/rdf-schema#> .
@prefix dcterms: <http://purl.org/dc/terms/> .
@prefix schema: <https://schema.org/> .

<https://www.wikidata.org/#query-8ccad5be107007ee7c8b8d57c71c1ee4> a sh:SPARQLExecutable,
    sh:SPARQLSelectExecutable;
  dcterms:isPartOf <https://www.wikidata.org//wiki/Wikidata:SPARQL_query_service/queries/examples/lb>,
    <https://www.wikidata.org//wiki/Wikidata:SPARQL_query_service/queries/examples/th>,
    <https://www.wikidata.org//wiki/Wikidata:SPARQL_query_service/queries/examples/eu>,
    <https://www.wikidata.org//wiki/Wikidata:SPARQL_query_service/queries/examples/en-gb>,
    <https://www.wikidata.org//wiki/Wikidata:SPARQL_query_service/queries/examples/vec>,
    <https://www.wikidata.org//wiki/Wikidata:SPARQL_query_service/queries/examples/hy>,
    <https://www.wikidata.org//wiki/Wikidata:SPARQL_query_service/queries/examples/id>,
    <https://www.wikidata.org//wiki/Wikidata:SPARQL_query_service/queries/examples/be-tarask>,
    <https://www.wikidata.org//wiki/Wikidata:SPARQL_query_service/queries/examples/tr>,
    <https://www.wikidata.org//wiki/Wikidata:SPARQL_query_service/queries/examples/ro>,
    <https://www.wikidata.org//wiki/Wikidata:SPARQL_query_service/queries/examples/he>,
    <https://www.wikidata.org//wiki/Wikidata:SPARQL_query_service/queries/examples/zh>,
    <https://www.wikidata.org//wiki/Wikidata:SPARQL_query_service/queries/examples/pt-br>,
    <https://www.wikidata.org//wiki/Wikidata:SPARQL_query_service/queries/examples/si>,
    <https://www.wikidata.org//wiki/Wikidata:SPARQL_query_service/queries/examples/eo>,
    <https://www.wikidata.org//wiki/Wikidata:SPARQL_query_service/queries/examples/da>,
    <https://www.wikidata.org//wiki/Wikidata:SPARQL_query_service/queries/examples/ar>,
    <https://www.wikidata.org//wiki/Wikidata:SPARQL_query_service/queries/examples/ko>,
    <https://www.wikidata.org//wiki/Wikidata:SPARQL_query_service/queries/examples/pl>,
    <https://www.wikidata.org//wiki/Wikidata:SPARQL_query_service/queries/examples/ms>,
    <https://www.wikidata.org//wiki/Wikidata:SPARQL_query_service/queries/examples/sv>,
    <https://www.wikidata.org//wiki/Wikidata:SPARQL_query_service/queries/examples/lt>,
    <https://www.wikidata.org//wiki/Wikidata:SPARQL_query_service/queries/examples/nl>,
    <https://www.wikidata.org//wiki/Wikidata:SPARQL_query_service/queries/examples/ca>,
    <https://www.wikidata.org//wiki/Wikidata:SPARQL_query_service/queries/examples/uk>,
    <https://www.wikidata.org//wiki/Wikidata:SPARQL_query_service/queries/examples/it>,
    <https://www.wikidata.org//wiki/Wikidata:SPARQL_query_service/queries/examples/ja>,
    <https://www.wikidata.org//wiki/Wikidata:SPARQL_query_service/queries/examples/es>,
    <https://www.wikidata.org//wiki/Wikidata:SPARQL_query_service/queries/examples/cs>,
    <https://www.wikidata.org//wiki/Wikidata:SPARQL_query_service/queries/examples/ru>,
    <https://www.wikidata.org//wiki/Wikidata:SPARQL_query_service/queries/examples/de>,
    <https://www.wikidata.org//wiki/Wikidata:SPARQL_query_service/queries/examples/fr>,
    <https://www.wikidata.org//wiki/Wikidata:SPARQL_query_service/queries/examples/en>,
    <https://www.wikidata.org//wiki/Wikidata:SPARQL_query_service/queries/examples>;
  dcterms:license <https://creativecommons.org/licenses/by-sa/4.0/>;
  sh:prefixes _:genid-4e694113159d4e3db4a1a913894a81d849181-wikidata_prefixes, _:genid-4e694113159d4e3db4a1a913894a81d849181-7F5DB6E87B2482100DD444B82D653330,
    _:genid-4e694113159d4e3db4a1a913894a81d849181-4BED005E0CF39D992785B8798188B601, _:genid-4e694113159d4e3db4a1a913894a81d849181-1A6113BCF53F9683D85D78058F65F49C,
    _:genid-4e694113159d4e3db4a1a913894a81d849181-AF076048AA4A18527E1F928B920EFA58, _:genid-4e694113159d4e3db4a1a913894a81d849181-B93ED549BA4C0D23200BFFE018D504D8,
    _:genid-4e694113159d4e3db4a1a913894a81d849181-58388E4EC21E8B78DF7BA4369704ACC1, _:genid-4e694113159d4e3db4a1a913894a81d849181-8C72C19117161658A2C2EF37F0A04213,
    _:genid-4e694113159d4e3db4a1a913894a81d849181-203766BE93D9E297B72197241FD354D8, _:genid-4e694113159d4e3db4a1a913894a81d849181-25226D50A31D01F785D56CC4BCFC08E0,
    _:genid-4e694113159d4e3db4a1a913894a81d849181-BEA2CC8AE4CB400924168039486858E1, _:genid-4e694113159d4e3db4a1a913894a81d849181-36447BEA0D81E493C2862EA38EF6732B,
    _:genid-4e694113159d4e3db4a1a913894a81d849181-BCCA7A7EECEE5C73CAE625A2C492A97E, _:genid-4e694113159d4e3db4a1a913894a81d849181-C14406EC9CA3082FA7D8115514F76EAE,
    _:genid-4e694113159d4e3db4a1a913894a81d849181-36C772E8AE764CFC594EBB30D5390256, _:genid-4e694113159d4e3db4a1a913894a81d849181-E6B882FC556911C5D3965A244DDF197E,
    _:genid-4e694113159d4e3db4a1a913894a81d849181-23697D5455674B24AFD7531DDB91853F, _:genid-4e694113159d4e3db4a1a913894a81d849181-5DA8B615A02A6601487F62BC968F252C,
    _:genid-4e694113159d4e3db4a1a913894a81d849181-8B6A291D13F33D37CD84BADDDD9E9A42, _:genid-4e694113159d4e3db4a1a913894a81d849181-C704F2ECAE231749A1D14A16CA16F762,
    _:genid-4e694113159d4e3db4a1a913894a81d849181-65981C58391D0A51530B74013896DEF3, _:genid-4e694113159d4e3db4a1a913894a81d849181-F5DDC3ED4FBD5965AC84C95F767326EC,
    _:genid-4e694113159d4e3db4a1a913894a81d849181-E236AD12C231BAA5BC436FD40A42BB80, _:genid-4e694113159d4e3db4a1a913894a81d849181-67674F5F277D4165193D175F055777A7,
    _:genid-4e694113159d4e3db4a1a913894a81d849181-10E06C14C6748761FC5511FD56DB012F, _:genid-4e694113159d4e3db4a1a913894a81d849181-C7335695FB302E010C1CE796DDE15A9F,
    _:genid-4e694113159d4e3db4a1a913894a81d849181-8CC0000374F9557826708CB81FE018CA, _:genid-4e694113159d4e3db4a1a913894a81d849181-946AEAE166DA7A448ACA5F756913B207,
    _:genid-4e694113159d4e3db4a1a913894a81d849181-18ADAE639D043C7B3190E47F906461C1, _:genid-4e694113159d4e3db4a1a913894a81d849181-AA0D6FE3CA2F99EFDA3464DFF1BEE9EC,
    _:genid-4e694113159d4e3db4a1a913894a81d849181-9DF89322AA2017A5E67CE1B0ACFF5A7C, _:genid-4e694113159d4e3db4a1a913894a81d849181-D1748763F395CF552AB4D637489C8619,
    _:genid-4e694113159d4e3db4a1a913894a81d849181-DA3587C62274F236E36057F8A1F24193, _:genid-4e694113159d4e3db4a1a913894a81d849181-94CF61DE001C9E2D31A4BDFD437D2267;
  schema:target <https://query.wikidata.org/sparql/>;
  sh:select """PREFIX wikibase: <http://wikiba.se/ontology#>
PREFIX wdt: <http://www.wikidata.org/prop/direct/>
PREFIX rdfs: <http://www.w3.org/2000/01/rdf-schema#>
PREFIX bd: <http://www.bigdata.com/rdf#>
SELECT DISTINCT ?book ?bookLabel ?authorLabel (GROUP_CONCAT(?genre_label) as ?genres) (MIN(?publicationDate) as ?firstPublication)
WHERE
{
  ?author rdfs:label \"Ernest Hemingway\"@en .
  ?book wdt:P50 ?author .
  OPTIONAL {
    ?book wdt:P136 ?genre .
    ?genre rdfs:label ?genre_label FILTER (lang(?genre_label) = \"en\").
  }

  OPTIONAL {
    ?book wdt:P577 ?publicationDate .
  }
  SERVICE wikibase:label {
    bd:serviceParam wikibase:language \"en\" .
  }
} GROUP BY ?book ?bookLabel ?authorLabel""" .
