@prefix sh: <http://www.w3.org/ns/shacl#> .
@prefix rdf: <http://www.w3.org/1999/02/22-rdf-syntax-ns#> .
@prefix rdfs: <http://www.w3.org/2000/01/rdf-schema#> .
@prefix dcterms: <http://purl.org/dc/terms/> .
@prefix schema: <https://schema.org/> .

<https://www.wikidata.org/#query-d9e17dc4ba91fd377e978ae6507efb2b> a sh:SPARQLExecutable,
    sh:SPARQLSelectExecutable;
  rdfs:comment """ This page is an archive. Please do not modify it. Use the current page, even to continue an old discussion. Contents 1 Clubs in league 2 Finding relations on OSM pointing to Wikidata 3 Multi-level localisation 4 Help Teachers in Europe use Football History 4.1 THE CONTEXT 4.2 THE REQUEST 4.2.1 On the level of the Tournament: 4.2.2 On the level of the Team: 4.2.3 On the level of the Players: 4.2.4 On the level of the Clubs where the Players played: 5 Official website with no language 6 Value of a coord according to reference 7 Malfunctionning query 8 Which default view to use 9 Newly created items on tennis players 10 Concat all authors of article 11 QUERY FOR EXACT SEARCH OF ENTITY LABEL 12 Need a Query to pull all Parent Organization to Subsidiary listings 13 Finding place items by labels 14 Antigua And Barbuda ATLU 15 Query to retrieve all known words of a language including their phonetic representation 16 Fetch Industry from Wikipedia API 17 Need a query that list Q23397 18 A recursive belongs-to query 19 Putting coordinates back together 20 Author of taxon 21 dateCreated instead of dateModified? 21.1 Query optimization (milestones) 22 Niger(ia)/Dominica(n Republic)/(Democratic )Republic of the Congo/ .. 22.1 Items linking to both 22.2 Label of one country included in description of item linked to other 22.3 Label of one country included in label of item linked to other 22.4 Additional checks? 23 P27 without start/end time propertites 24 Query to get all the properties of an item 25 Airports that have P3872 for 2017 but not for 2018 26 query for humans with P27 inconsistent with date of birth 27 Five-letter words beginning with \"f\" 28 Spain not in query country by ISO code 29 Query dates with instance of statement with Gregorian date earlier than 1584 30 List of NGMDb Prod ID (P6693) sorted with leading zeroes? 31 PPP GDP per capita (P2299) 32 Showing citizenship of a creator of a certain set of items 33 P31/wdt:P279* wd:Q16917 in wdt:P131/wdt:P131* wd:Q25 (query optimization) 34 Addition of unitLabel to Q42 modified example 35 evenement france 20th century 36 Query to get all the events in a specific city between 2 time points? 37 Extract infromation from one specific QID? 38 Filter double months 39 List of Wikidata id of all French municipalities 40 Column with QID 41 Multiple properties to 1 value 42 Mapping from all the items to all the Italian Wikipedia's articles 43 US not part of Common Wealth 44 all instances of libraries (and subclasses of libraries) in North Carolina 45 Interstate 70 - has part (P527) - Maplink template raw query 46 Statistics total passengers per countries 47 Fusion d’éléments 48 Q's for P27 49 Improve sorting of coordinates 50 Search in formulas 51 Elements with Wikipedia articles with Authority control 52 Living entomologists with no picture 53 List of People 54 Problem to filter countries by official language Clubs in league I am looking for all clubs that played in the 1964–65 Fußball-Bundesliga (Q704091). Somehow I am to silly to query the statements of participating team (P1923) in this item. 92.75.209.157 18:03, 31 May 2019 (UTC) Try this query: SELECT ?item ?itemLabel {
  wd:Q704091 wdt:P1923 ?item .
  SERVICE wikibase:label { bd:serviceParam wikibase:language \"de\". }
}
ORDER BY ?itemLabel
 Try it! --Larske (talk) 19:04, 31 May 2019 (UTC) Aaaah, by exchanging the wdt and wd arguments, did not try that^^. Now I would like to combine these results with this query that gives me all players that played in Bundesliga: SELECT ?item ?itemLabel {
  ?item wdt:P106 wd:Q937857 .
  ?item wdt:P118 wd:Q82595 .
  SERVICE wikibase:label { bd:serviceParam wikibase:language \"de\". }
}
 Try it! So I would like to have only those Bundesliga players that have played for one of those clubs of the first query result. I think this query does the basic job: SELECT DISTINCT ?item ?club ?clubLabel ?itemLabel {
   wd:Q704091 wdt:P1923 ?club .

  ?item wdt:P106 wd:Q937857 .
  ?item wdt:P118 wd:Q82595 .
  ?item wdt:P54 ?club .
  SERVICE wikibase:label { bd:serviceParam wikibase:language \"de\". }
}
ORDER BY DESC(?item)
 Try it! However, players that played for more than one team are listed twice, despite using \"SELECT DISTINCT\". How to get rid of the double entries? 92.75.209.157 20:25, 31 May 2019 (UTC) If you need the clubs, try using GROUP_CONCAT, like this: SELECT ?item (GROUP_CONCAT(?clublabel;SEPARATOR=', ') AS ?clubs) ?itemLabel {
  wd:Q704091 wdt:P1923 ?club .
  ?item wdt:P106 wd:Q937857 .
  ?item wdt:P118 wd:Q82595 .
  ?item wdt:P54 ?club . ?club rdfs:label ?clublabel . FILTER(lang(?clublabel)='de' )
  SERVICE wikibase:label { bd:serviceParam wikibase:language \"de\". }
}
GROUP BY ?item ?itemLabel
ORDER BY DESC(?item)
 Try it! If you don't need the clubs, just skip the club and clubLabel columns. --Larske (talk) 20:45, 31 May 2019 (UTC) Thank you! 147.142.63.186 07:49, 1 June 2019 (UTC) Finding relations on OSM pointing to Wikidata Maybe this would need to be done with Sophox, but I'd like to see a query which returns to me all items on Wikidata without OpenStreetMap relation ID (P402) but who at the same time are relations (so not nodes or ways) on OSM and have a link to Wikidata. @Yurik, would you know? NMaia (talk) 00:18, 2 June 2019 (UTC) Multi-level localisation Since located in the administrative territorial entity (P131) may be a lower level entity, how can we show upper level entities ? For example, Drummondville (Q141940) have P131 Drummond (Q1261297) who has P131 Centre-du-Québec (Q764294). What would be the query to list the municipality name, the regional county municipality (Q204613) name and the administrative region of Quebec (Q55998242) name of an entity. --Yanik B 15:12, 28 May 2019 (UTC)  Items used: Drummondville (Q141940)   , administrative region of Quebec (Q55998242)   , regional county municipality (Q204613)   Properties used: instance of (P31)   , located in the administrative territorial entity (P131)   SELECT ?item ?itemLabel ?county ?countyLabel ?region ?regionLabel WHERE {
  VALUES ?item { wd:Q141940 }
  ?region wdt:P31 wd:Q55998242 .
  ?county wdt:P31 wd:Q204613.
  ?county wdt:P131* ?region .
  ?item wdt:P131* ?county.
  SERVICE wikibase:label { bd:serviceParam wikibase:language \"en\" }
} Try it! @YanikB: see if this fits your requirements. --99of9 (talk) 07:16, 29 May 2019 (UTC) @99of9: Well done ! Very interresting those \"*\". Thank's a lot. --Yanik B 11:16, 29 May 2019 (UTC) I tried to add a level but it does't work. Items used: manorialism (Q1550557)   , Canada (Q16)   , administrative region of Quebec (Q55998242)   , regional county municipality (Q204613)   , local municipality of Quebec (Q3327873)   Properties used: instance of (P31)   , country (P17)   , located in the administrative territorial entity (P131)   """@en;
  dcterms:isPartOf <https://www.wikidata.org//wiki/Wikidata:Request_a_query/Archive/2019/06>;
  dcterms:license <https://creativecommons.org/licenses/by-sa/4.0/>;
  sh:prefixes _:genid-4e694113159d4e3db4a1a913894a81d822943-wikidata_prefixes;
  schema:target <https://query.wikidata.org/sparql/>;
  sh:select """PREFIX wikibase: <http://wikiba.se/ontology#>
PREFIX wdt: <http://www.wikidata.org/prop/direct/>
PREFIX wd: <http://www.wikidata.org/entity/>
PREFIX bd: <http://www.bigdata.com/rdf#>
SELECT ?item ?itemLabel ?munLabel ?countyLabel ?regionLabel WHERE {
  ?item wdt:P31 wd:Q1550557 .
  ?item wdt:P17 wd:Q16 .
  ?region wdt:P31 wd:Q55998242 .
  ?county wdt:P31 wd:Q204613.
  ?mun wdt:P31 wd:Q3327873 .
  ?county wdt:P131* ?region .
  ?mun wdt:P131* ?county .
  ?item wdt:P131* ?mun .
  SERVICE wikibase:label { bd:serviceParam wikibase:language \"en\" }
}""" .
