@prefix sh: <http://www.w3.org/ns/shacl#> .
@prefix rdf: <http://www.w3.org/1999/02/22-rdf-syntax-ns#> .
@prefix rdfs: <http://www.w3.org/2000/01/rdf-schema#> .
@prefix dcterms: <http://purl.org/dc/terms/> .
@prefix schema: <https://schema.org/> .

<https://www.wikidata.org/#query-da647db1c50bd4a7830d60d518978fe3> a sh:SPARQLExecutable,
    sh:SPARQLSelectExecutable;
  dcterms:isPartOf <https://www.wikidata.org//wiki/User:Alexander_Leisser/Musik>;
  dcterms:license <https://creativecommons.org/licenses/by-sa/4.0/>;
  sh:prefixes _:genid-4e694113159d4e3db4a1a913894a81d836335-wikidata_prefixes;
  schema:target <https://query.wikidata.org/sparql/>;
  sh:select """PREFIX wikibase: <http://wikiba.se/ontology#>
PREFIX wdt: <http://www.wikidata.org/prop/direct/>
PREFIX wd: <http://www.wikidata.org/entity/>
PREFIX bd: <http://www.bigdata.com/rdf#>
# All singer and bands originated from Africa
SELECT DISTINCT ?musicians ?musiciansLabel ?landLabel ?geb ?img
  
  # get all singer and bands
  WITH { 
    SELECT ?musicians WHERE {
      { ?musicians wdt:P31 wd:Q5; 
                   wdt:P106 wd:Q177220.
      }
       UNION
      { ?musicians wdt:P31/wdt:P279* wd:Q215380. }
    }
  } AS %m

  # take the ones, which are born or started in africa
  WITH {   
       SELECT ?musicians ?land ?geb WHERE {
          INCLUDE %m
          VALUES ?t { wdt:P571 wdt:P569 }
          VALUES ?p { wdt:P19 wdt:P740 }
          ?musicians ?t ?geb.
          ?musicians ?p [ wdt:P17 ?land ].  
          ?land wdt:P30 wd:Q15.
        }    
  } AS %results

  WHERE {
    INCLUDE %results.
    SERVICE wikibase:label { bd:serviceParam wikibase:language \"[AUTO_LANGUAGE],en,fr\". }
 }
LIMIT 3000""";
  <http://example.org/bigdata_select> """# All singer and bands originated from Africa
SELECT DISTINCT ?musicians ?musiciansLabel ?landLabel ?geb ?img
  
  # get all singer and bands
  WITH { 
    SELECT ?musicians WHERE {
      { ?musicians wdt:P31 wd:Q5; 
                   wdt:P106 wd:Q177220.
      }
       UNION
      { ?musicians wdt:P31/wdt:P279* wd:Q215380. }
    }
  } AS %m

  # take the ones, which are born or started in africa
  WITH {   
       SELECT ?musicians ?land ?geb WHERE {
          INCLUDE %m
          VALUES ?t { wdt:P571 wdt:P569 }
          VALUES ?p { wdt:P19 wdt:P740 }
          ?musicians ?t ?geb.
          ?musicians ?p [ wdt:P17 ?land ].  
          ?land wdt:P30 wd:Q15.
        }    
  } AS %results

  WHERE {
    INCLUDE %results.
    SERVICE wikibase:label { bd:serviceParam wikibase:language \"[AUTO_LANGUAGE],en,fr\". }
 }
LIMIT 3000""" .
