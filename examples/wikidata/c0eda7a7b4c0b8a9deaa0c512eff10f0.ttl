@prefix sh: <http://www.w3.org/ns/shacl#> .
@prefix rdf: <http://www.w3.org/1999/02/22-rdf-syntax-ns#> .
@prefix rdfs: <http://www.w3.org/2000/01/rdf-schema#> .
@prefix dcterms: <http://purl.org/dc/terms/> .
@prefix schema: <https://schema.org/> .

<https://www.wikidata.org/#query-c0eda7a7b4c0b8a9deaa0c512eff10f0> a sh:SPARQLExecutable,
    sh:SPARQLSelectExecutable;
  dcterms:isPartOf <https://www.wikidata.org//wiki/Wikidata:SPARQL_query_service/queries/examples/lb>,
    <https://www.wikidata.org//wiki/Wikidata:SPARQL_query_service/queries/examples/th>,
    <https://www.wikidata.org//wiki/Wikidata:SPARQL_query_service/queries/examples/eu>,
    <https://www.wikidata.org//wiki/Wikidata:SPARQL_query_service/queries/examples/en-gb>,
    <https://www.wikidata.org//wiki/Wikidata:SPARQL_query_service/queries/examples/vec>,
    <https://www.wikidata.org//wiki/Wikidata:SPARQL_query_service/queries/examples/hy>,
    <https://www.wikidata.org//wiki/Wikidata:SPARQL_query_service/queries/examples/id>,
    <https://www.wikidata.org//wiki/Wikidata:SPARQL_query_service/queries/examples/be-tarask>,
    <https://www.wikidata.org//wiki/Wikidata:SPARQL_query_service/queries/examples/tr>,
    <https://www.wikidata.org//wiki/Wikidata:SPARQL_query_service/queries/examples/ro>,
    <https://www.wikidata.org//wiki/Wikidata:SPARQL_query_service/queries/examples/he>,
    <https://www.wikidata.org//wiki/Wikidata:SPARQL_query_service/queries/examples/zh>,
    <https://www.wikidata.org//wiki/Wikidata:SPARQL_query_service/queries/examples/pt-br>,
    <https://www.wikidata.org//wiki/Wikidata:SPARQL_query_service/queries/examples/si>,
    <https://www.wikidata.org//wiki/Wikidata:SPARQL_query_service/queries/examples/eo>,
    <https://www.wikidata.org//wiki/Wikidata:SPARQL_query_service/queries/examples/da>,
    <https://www.wikidata.org//wiki/Wikidata:SPARQL_query_service/queries/examples/ar>,
    <https://www.wikidata.org//wiki/Wikidata:SPARQL_query_service/queries/examples/ko>,
    <https://www.wikidata.org//wiki/Wikidata:SPARQL_query_service/queries/examples/pl>,
    <https://www.wikidata.org//wiki/Wikidata:SPARQL_query_service/queries/examples/ms>,
    <https://www.wikidata.org//wiki/Wikidata:SPARQL_query_service/queries/examples/sv>,
    <https://www.wikidata.org//wiki/Wikidata:SPARQL_query_service/queries/examples/lt>,
    <https://www.wikidata.org//wiki/Wikidata:SPARQL_query_service/queries/examples/nl>,
    <https://www.wikidata.org//wiki/Wikidata:SPARQL_query_service/queries/examples/ca>,
    <https://www.wikidata.org//wiki/Wikidata:SPARQL_query_service/queries/examples/uk>,
    <https://www.wikidata.org//wiki/Wikidata:SPARQL_query_service/queries/examples/it>,
    <https://www.wikidata.org//wiki/Wikidata:SPARQL_query_service/queries/examples/ja>,
    <https://www.wikidata.org//wiki/Wikidata:SPARQL_query_service/queries/examples/es>,
    <https://www.wikidata.org//wiki/Wikidata:SPARQL_query_service/queries/examples/cs>,
    <https://www.wikidata.org//wiki/Wikidata:SPARQL_query_service/queries/examples/ru>,
    <https://www.wikidata.org//wiki/Wikidata:SPARQL_query_service/queries/examples/de>,
    <https://www.wikidata.org//wiki/Wikidata:SPARQL_query_service/queries/examples/fr>,
    <https://www.wikidata.org//wiki/Wikidata:SPARQL_query_service/queries/examples/en>,
    <https://www.wikidata.org//wiki/Wikidata:SPARQL_query_service/queries/examples>;
  dcterms:license <https://creativecommons.org/licenses/by-sa/4.0/>;
  sh:prefixes _:genid-4e694113159d4e3db4a1a913894a81d815662-wikidata_prefixes, _:genid-4e694113159d4e3db4a1a913894a81d815662-811A1721E2C7623E6A4EB3E1E68B62E8,
    _:genid-4e694113159d4e3db4a1a913894a81d815662-F77997D54ED77EA919F6DE26E66E6436, _:genid-4e694113159d4e3db4a1a913894a81d815662-96E9F8D0CAFC0214614A6C51E41D19E6,
    _:genid-4e694113159d4e3db4a1a913894a81d815662-5BF4CD9C461163702FEF993F25EDF75A, _:genid-4e694113159d4e3db4a1a913894a81d815662-22A90EAF77AE6D377D1791BD6CDCCD0E,
    _:genid-4e694113159d4e3db4a1a913894a81d815662-9A019D9E4970520E418C9E4B4C204DDE, _:genid-4e694113159d4e3db4a1a913894a81d815662-8473DBF811C75CA05B0C665E50F7C223,
    _:genid-4e694113159d4e3db4a1a913894a81d815662-06F2C184F691AC398D46E6C908A6197B, _:genid-4e694113159d4e3db4a1a913894a81d815662-D1D17604D030BF3FE1B432840BD3F0C1,
    _:genid-4e694113159d4e3db4a1a913894a81d815662-7AFB04B3FC70EA3021249EBDE751EEE2, _:genid-4e694113159d4e3db4a1a913894a81d815662-C25F96A6DAC8470419A4ABF0AC8929CB,
    _:genid-4e694113159d4e3db4a1a913894a81d815662-4572040FB71693569F86C936708509CA, _:genid-4e694113159d4e3db4a1a913894a81d815662-876D827FA06A1E60DC02C459247C771C,
    _:genid-4e694113159d4e3db4a1a913894a81d815662-A5D3590B26F044B350DC466785752E47, _:genid-4e694113159d4e3db4a1a913894a81d815662-0C77ED9EF26B3F2BD8BD6FB82E1E6C82,
    _:genid-4e694113159d4e3db4a1a913894a81d815662-D0EB28519A4771B7BE60A0D2A8EEF36D, _:genid-4e694113159d4e3db4a1a913894a81d815662-77D5E5B3E03680C137DA229B81874E57,
    _:genid-4e694113159d4e3db4a1a913894a81d815662-2B4721CA1B8E2D87D5DDAD12B98A72FA, _:genid-4e694113159d4e3db4a1a913894a81d815662-5136ECFC5F96C5F414CD80C2FAF4F0EE,
    _:genid-4e694113159d4e3db4a1a913894a81d815662-1A727F9879D8E17F372CF75CA5528E74, _:genid-4e694113159d4e3db4a1a913894a81d815662-91C123E5136B1573D0C1025FAB07DE75,
    _:genid-4e694113159d4e3db4a1a913894a81d815662-62DB9BA8ED6F23DF5C2D2140162E32B7, _:genid-4e694113159d4e3db4a1a913894a81d815662-E8E53515166134C3D5500AF41B371D8A,
    _:genid-4e694113159d4e3db4a1a913894a81d815662-3846B6D3F5C5796427164EBAE210006E, _:genid-4e694113159d4e3db4a1a913894a81d815662-FF4ACBD9CC21F299EBCFACC29DA227B4,
    _:genid-4e694113159d4e3db4a1a913894a81d815662-18B2DBAD279B994F72BC5CAA9051E616, _:genid-4e694113159d4e3db4a1a913894a81d815662-756212AB799463FDEB075339922CECD2,
    _:genid-4e694113159d4e3db4a1a913894a81d815662-63217317CE7F73D2BC54003B166837CC, _:genid-4e694113159d4e3db4a1a913894a81d815662-985577C13A393B5F86D069B2586237F6,
    _:genid-4e694113159d4e3db4a1a913894a81d815662-266825AFAAFAD2CC5D69F4AB7F08E853, _:genid-4e694113159d4e3db4a1a913894a81d815662-1C916AE4B874E321130AB2DB7709BF5D,
    _:genid-4e694113159d4e3db4a1a913894a81d815662-CF6243A4C905A4B3BC599E74D5E291A1, _:genid-4e694113159d4e3db4a1a913894a81d815662-C0572E03CB7EE284BEBDA26C81054DE8;
  schema:target <https://query.wikidata.org/sparql/>;
  sh:select """PREFIX wikibase: <http://wikiba.se/ontology#>
PREFIX wdt: <http://www.wikidata.org/prop/direct/>
PREFIX wd: <http://www.wikidata.org/entity/>
PREFIX ps: <http://www.wikidata.org/prop/statement/>
PREFIX pq: <http://www.wikidata.org/prop/qualifier/>
PREFIX p: <http://www.wikidata.org/prop/>
PREFIX bd: <http://www.bigdata.com/rdf#>
SELECT ?senator ?senatorLabel ?districtLabel ?partyLabel ?assumedOffice (sample(?image) as ?image) where {
  # Get all senators
  ?senator p:P39 ?posheld; # With position held
           p:P102 ?partystatement. # And with a certain party

  # Get the party
  ?partystatement ps:P102 ?party.
  MINUS { ?partystatement pq:P582 ?partyEnd. } # but minus the ones the senator is no longer a member of
  MINUS { ?party wdt:P361 ?partOf. } # and the 'Minnesota Democratic–Farmer–Labor Party' and such

  # Check on the position in the senate
  ?posheld ps:P39 wd:Q4416090; # Position held is in the senate
           pq:P768 ?district;
           pq:P580 ?assumedOffice. # And should have a starttime

  MINUS { ?posheld pq:P582 ?endTime. } # But not an endtime

  # Add an image
  OPTIONAL { ?senator wdt:P18 ?image. }

  SERVICE wikibase:label { bd:serviceParam wikibase:language \"[AUTO_LANGUAGE],mul,en\". }
} GROUP BY ?senator ?senatorLabel ?districtLabel ?partyLabel ?assumedOffice ORDER BY ?senatorLabel""" .
