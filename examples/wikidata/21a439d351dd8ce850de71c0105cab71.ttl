@prefix sh: <http://www.w3.org/ns/shacl#> .
@prefix rdf: <http://www.w3.org/1999/02/22-rdf-syntax-ns#> .
@prefix rdfs: <http://www.w3.org/2000/01/rdf-schema#> .
@prefix dcterms: <http://purl.org/dc/terms/> .
@prefix schema: <https://schema.org/> .

<https://www.wikidata.org/#query-21a439d351dd8ce850de71c0105cab71> a sh:SPARQLExecutable,
    sh:SPARQLSelectExecutable;
  dcterms:isPartOf <https://www.wikidata.org//wiki/Wikidata:SPARQL_query_service/queries/examples/lb>,
    <https://www.wikidata.org//wiki/Wikidata:SPARQL_query_service/queries/examples/th>,
    <https://www.wikidata.org//wiki/Wikidata:SPARQL_query_service/queries/examples/eu>,
    <https://www.wikidata.org//wiki/Wikidata:SPARQL_query_service/queries/examples/en-gb>,
    <https://www.wikidata.org//wiki/Wikidata:SPARQL_query_service/queries/examples/vec>,
    <https://www.wikidata.org//wiki/Wikidata:SPARQL_query_service/queries/examples/hy>,
    <https://www.wikidata.org//wiki/Wikidata:SPARQL_query_service/queries/examples/id>,
    <https://www.wikidata.org//wiki/Wikidata:SPARQL_query_service/queries/examples/be-tarask>,
    <https://www.wikidata.org//wiki/Wikidata:SPARQL_query_service/queries/examples/tr>,
    <https://www.wikidata.org//wiki/Wikidata:SPARQL_query_service/queries/examples/ro>,
    <https://www.wikidata.org//wiki/Wikidata:SPARQL_query_service/queries/examples/he>,
    <https://www.wikidata.org//wiki/Wikidata:SPARQL_query_service/queries/examples/zh>,
    <https://www.wikidata.org//wiki/Wikidata:SPARQL_query_service/queries/examples/pt-br>,
    <https://www.wikidata.org//wiki/Wikidata:SPARQL_query_service/queries/examples/si>,
    <https://www.wikidata.org//wiki/Wikidata:SPARQL_query_service/queries/examples/eo>,
    <https://www.wikidata.org//wiki/Wikidata:SPARQL_query_service/queries/examples/da>,
    <https://www.wikidata.org//wiki/Wikidata:SPARQL_query_service/queries/examples/ar>,
    <https://www.wikidata.org//wiki/Wikidata:SPARQL_query_service/queries/examples/ko>,
    <https://www.wikidata.org//wiki/Wikidata:SPARQL_query_service/queries/examples/pl>,
    <https://www.wikidata.org//wiki/Wikidata:SPARQL_query_service/queries/examples/ms>,
    <https://www.wikidata.org//wiki/Wikidata:SPARQL_query_service/queries/examples/sv>,
    <https://www.wikidata.org//wiki/Wikidata:SPARQL_query_service/queries/examples/lt>,
    <https://www.wikidata.org//wiki/Wikidata:SPARQL_query_service/queries/examples/nl>,
    <https://www.wikidata.org//wiki/Wikidata:SPARQL_query_service/queries/examples/ca>,
    <https://www.wikidata.org//wiki/Wikidata:SPARQL_query_service/queries/examples/uk>,
    <https://www.wikidata.org//wiki/Wikidata:SPARQL_query_service/queries/examples/it>,
    <https://www.wikidata.org//wiki/Wikidata:SPARQL_query_service/queries/examples/ja>,
    <https://www.wikidata.org//wiki/Wikidata:SPARQL_query_service/queries/examples/es>,
    <https://www.wikidata.org//wiki/Wikidata:SPARQL_query_service/queries/examples/cs>,
    <https://www.wikidata.org//wiki/Wikidata:SPARQL_query_service/queries/examples/ru>,
    <https://www.wikidata.org//wiki/Wikidata:SPARQL_query_service/queries/examples/de>,
    <https://www.wikidata.org//wiki/Wikidata:SPARQL_query_service/queries/examples/fr>,
    <https://www.wikidata.org//wiki/Wikidata:SPARQL_query_service/queries/examples/en>,
    <https://www.wikidata.org//wiki/Wikidata:SPARQL_query_service/queries/examples>;
  dcterms:license <https://creativecommons.org/licenses/by-sa/4.0/>;
  sh:prefixes _:genid-4e694113159d4e3db4a1a913894a81d818293-wikidata_prefixes, _:genid-4e694113159d4e3db4a1a913894a81d818293-CF12977BBF059327CB9D1EF2F3C374D8,
    _:genid-4e694113159d4e3db4a1a913894a81d818293-CE17FF4813519A010190FEDFE14219B4, _:genid-4e694113159d4e3db4a1a913894a81d818293-5E74E59B3444AADE68D09DC569BE4AE7,
    _:genid-4e694113159d4e3db4a1a913894a81d818293-FBB25464CD81DA0E575255C249B61420, _:genid-4e694113159d4e3db4a1a913894a81d818293-8CE766F4E5A475784684B2AAD4717852,
    _:genid-4e694113159d4e3db4a1a913894a81d818293-9464290F317912BF0FB37D82DB7D1A6D, _:genid-4e694113159d4e3db4a1a913894a81d818293-85AD99902E68A199DA4607FAAFEF0989,
    _:genid-4e694113159d4e3db4a1a913894a81d818293-DDA6E1EDE1FA59BEAE0665C90746EDAB, _:genid-4e694113159d4e3db4a1a913894a81d818293-9E16BD5E51D73C13439B0F5AF821C2FA,
    _:genid-4e694113159d4e3db4a1a913894a81d818293-4E6F43AB436ECC32E1410D1AB5AAF30F, _:genid-4e694113159d4e3db4a1a913894a81d818293-DF905A6EF613B4E0FA3BD6127B963DF1,
    _:genid-4e694113159d4e3db4a1a913894a81d818293-25B7E047446666E3D0322F5CD9EBD2E8, _:genid-4e694113159d4e3db4a1a913894a81d818293-700164B7E818F1E92CE36F2D4C3F54E5,
    _:genid-4e694113159d4e3db4a1a913894a81d818293-4962048D60AE1A37A38BE5866566C630, _:genid-4e694113159d4e3db4a1a913894a81d818293-C82E07E1A600BA8A54B84496C46E5D37,
    _:genid-4e694113159d4e3db4a1a913894a81d818293-0FB1DC50C1411FDBF7BF17BA7385CA72, _:genid-4e694113159d4e3db4a1a913894a81d818293-76D03511A9418972B01B1F6D6BCB7BF9,
    _:genid-4e694113159d4e3db4a1a913894a81d818293-824FE862379136BDCF56102C028A2014, _:genid-4e694113159d4e3db4a1a913894a81d818293-925B305B81CD4DF661198826F15E8838,
    _:genid-4e694113159d4e3db4a1a913894a81d818293-716334ED8756B0B661064E7BDCB79FED, _:genid-4e694113159d4e3db4a1a913894a81d818293-9F3F4F59030FC3BBA2E844DE65FCFCA0,
    _:genid-4e694113159d4e3db4a1a913894a81d818293-48C2DB62B2B11959E5F2496801E0AA4C, _:genid-4e694113159d4e3db4a1a913894a81d818293-FDED6F86D86FE7E6E25E0355BA3DCD5A,
    _:genid-4e694113159d4e3db4a1a913894a81d818293-37EA61F0B2B8904B0D8632D5E6A1C9F1, _:genid-4e694113159d4e3db4a1a913894a81d818293-346142B762BCE1B13E5BF785EEDBBDEC,
    _:genid-4e694113159d4e3db4a1a913894a81d818293-EB8ECBE10DE35ACC57D6582D162586C4, _:genid-4e694113159d4e3db4a1a913894a81d818293-FDE34AF0CDB998457FF67348575827CB,
    _:genid-4e694113159d4e3db4a1a913894a81d818293-73DAACE2DED30E4F4348D034B51D3A3E, _:genid-4e694113159d4e3db4a1a913894a81d818293-F474938137AD3253F6EC6A95CB6AB3AE,
    _:genid-4e694113159d4e3db4a1a913894a81d818293-75FF94C25C62C6A6688F9CB9D6C74714, _:genid-4e694113159d4e3db4a1a913894a81d818293-3425A1812EFA5F8E1769C8A2F9A7E0D5,
    _:genid-4e694113159d4e3db4a1a913894a81d818293-043CA02F464E7E05F7D6709CB98EB97A, _:genid-4e694113159d4e3db4a1a913894a81d818293-786948F64FEC17F0839CA653D8C8324D;
  schema:target <https://query.wikidata.org/sparql/>;
  sh:select """PREFIX wikibase: <http://wikiba.se/ontology#>
PREFIX wdt: <http://www.wikidata.org/prop/direct/>
PREFIX wd: <http://www.wikidata.org/entity/>
PREFIX bd: <http://www.bigdata.com/rdf#>
#defaultView:Map
SELECT DISTINCT ?item ?itemLabel ?ed ?edLabel ?auteurLabel (year(?dateCreation) as ?AnneeCreation) ?lieuLabel ?coord ?lien
WHERE
{
  ?item wdt:P136 wd:Q1164267 .    # genre :récit de voyage
  ?item wdt:P31 wd:Q571 .         # nature : livre
  OPTIONAL{
    ?item wdt:P50 ?auteur .       # [option] auteur
  }
  OPTIONAL{
    ?item wdt:P571 ?dateCreation. # [option] date de création
  }

  ?item wdt:P840 ?lieu .          # lieu de l'action
  MINUS {?item wdt:P840 wd:Q933}  # (bug du Pôle Sud)
  ?lieu wdt:P625 ?coord .         # coordonnées géographiques du lieu

  {
    ?item wdt:P953 ?lien .        # URL, texte intégral disponible sur
    ?item wdt:P407 wd:Q150        # langue de l'œuvre : français
  }UNION{
    ?ed wdt:P629 ?item .          # édition du livre
    ?ed wdt:P953 ?lien .          # URL, texte intégral disponible sur
    ?ed wdt:P407 wd:Q150          # langue de l'œuvre : français
  }

  SERVICE wikibase:label { bd:serviceParam wikibase:language \"[AUTO_LANGUAGE],fr\". }
} ORDER BY ?dateCreation""" .
