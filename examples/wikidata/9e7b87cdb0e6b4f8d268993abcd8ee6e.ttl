@prefix sh: <http://www.w3.org/ns/shacl#> .
@prefix rdf: <http://www.w3.org/1999/02/22-rdf-syntax-ns#> .
@prefix rdfs: <http://www.w3.org/2000/01/rdf-schema#> .
@prefix dcterms: <http://purl.org/dc/terms/> .
@prefix schema: <https://schema.org/> .

<https://www.wikidata.org/#query-9e7b87cdb0e6b4f8d268993abcd8ee6e> a sh:SPARQLExecutable,
    sh:SPARQLSelectExecutable;
  rdfs:comment """ This page is an archive. Please do not modify it. Use the current page, even to continue an old discussion. Contents 1 List of taxa whom taxon author is Edmond Perrier 2 Echinodermata (Q44631) 3 Countries of Europe by area 4 List of intersex people who have children 5 Scholary Articles (Q13442814) - how can I count citations (something like What links here) 6 Simple Query request: population of a city 7 Mapping Russian federal subjects 8 Entries of the Dictionary of African Biography 9 P6216 Statements without qualifiers 10 Movie after a work by OR based on work from Jane Austen 11 All inhabited places with at least population of 1000 per country 12 Get all the hashtags, facebook page and official websites of every french broadcast content 13 Query optimization 14 Country and city attribution of geolocated item 15 Possible to search to return list of items, as per website search box? 16 number of publications from before 1800 without copyright statement 17 SPARQL query result erroneous 18 Sitelinks query optimization 19 Qualifers on a Heritage Register Item 20 Wikielements that contains only a redirection 21 Optimize query 22 Tallest buildings 23 Discontinued properties 24 Uruguay-related query 25 Teams with colours 26 Usage history for multiple properties in one query 27 Corrections, errata and corrigenda, oh my 28 Articles without images on a specific Wikipedia 29 Find longest substrings in a title 30 P1342 (members in lower and upper houses) 31 Twinned administrative body 32 Latest additions of specific properties to a set of items 33 Personalities elevated to the public domain 34 Patronage of airports in a country 35 Retraction, Retraction Notice or Retracted Article 36 Query to return 'also known as' labels for writers? 37 Query timing out 38 Listeria query for MP's position held data 39 Query for cities without articles in atj.wp 40 Slide show with images 41 Complete filter with value of a qualifier 42 Listeria query for missing articles of MacTutor archive 43 Top Articles Per Category 44 Entities with most featured/good articles about it 45 Items that are linked only to Bulgarian Wikipedia and to not have instance of and subclass of 46 List records with a Spotify ID 47 guidance request List of taxa whom taxon author is Edmond Perrier Can I have a query that give me the list of the taxa that have Edmond Perrier (Q927667) as value for taxon author (P405). Example this item Remaster palmatus (Q2264145) should be in the result. Thanks you. Christian Ferrer (talk) 12:41, 2 January 2019 (UTC) Items used: Edmond Perrier (Q927667)   Properties used: taxon name (P225)   , taxon author (P405)   SELECT ?item ?itemLabel ?itemDescription
{
	?item p:P225 / pq:P405 wd:Q927667 . 
	SERVICE wikibase:label { bd:serviceParam wikibase:language \"en\" }
} Try it! like this? --- Jura 12:45, 2 January 2019 (UTC) Yes. Great, thanks you! Christian Ferrer (talk) 12:51, 2 January 2019 (UTC) Echinodermata (Q44631) Hello, can I have a list of all taxa that are echinoderms, and whatever their taxon rank, please? Christian Ferrer (talk) 18:01, 2 January 2019 (UTC) @Christian Ferrer: Does \"that are echinoderms\" mean \"where parent taxon is echinoderms\". If so: SELECT ?item ?itemLabel ?rankLabel
WHERE 
{
  ?item wdt:P171 wd:Q44631.
  ?item wdt:P105 ?rank.
  SERVICE wikibase:label { bd:serviceParam wikibase:language \"[AUTO_LANGUAGE],en\". }
} order by ?rankLabel ?itemLabel
 Try it! --Tagishsimon (talk) 18:32, 2 January 2019 (UTC) No Tagishsimon, thanks you. You give me a list of the taxa whom parent taxon (P171) is directly Echinodermata (Q44631), in fact I would want a query to list all taxa that are echinoderms, this includes all the species, all the genus, families ect, ect.... possible? the result will be extraordinarily large (likely near 10000 items), but it's mostly to have the query example, that I can modify. Christian Ferrer (talk) 18:55, 2 January 2019 (UTC) @Christian Ferrer: I'm hopeless when it comes to taxa, Christian, and not much better when it comes to SPARQL. Still. Does this look any more promising? We still need to understand exactly what in a wikidata record constitutes your \"that are echinoderms\". I'm banking on parent - and in this query, grandparent &c. 11.4k results. SELECT ?item ?itemLabel ?rankLabel
WHERE 
{
  ?item wdt:P171/wdt:P171* wd:Q44631.
  ?item wdt:P105 ?rank.
  SERVICE wikibase:label { bd:serviceParam wikibase:language \"[AUTO_LANGUAGE],en\". }
} order by ?rankLabel ?itemLabel
 Try it! --Tagishsimon (talk) 19:13, 2 January 2019 (UTC) Yes, very great, that's it. Thanks you! I was not far when I said 10000, in fact it is 11405. Thanks again. Christian Ferrer (talk) 19:16, 2 January 2019 (UTC) Countries of Europe by area I'm trying to get a list of countries in Europe by area. It seems pretty straightforward, but for some reason I only get 11 results. I manually checked France (Q142) and it seems to have all the required properties and yet it does not appear in the results. The query I tried is: select ?country ?countryLabel ?area 
{ 
  ?country wdt:P31 wd:Q6256 .
  ?country wdt:P30 wd:Q46 .
  ?country wdt:P2046 ?area . 
  service wikibase:label { bd:serviceParam wikibase:language \"ro,en\" } 
} order by desc(?area)
 Try it! --Strainu (talk) 10:56, 30 December 2018 (UTC) select DISTINCT ?country ?countryLabel ?area ?area2 ?unit2 
{ 
  ?country p:P31/ps:P31 wd:Q6256 .
  ?country wdt:P30 wd:Q46 .
  # ?country wdt:P2046 ?area . 
  ?country p:P2046 / psn:P2046 [ wikibase:quantityAmount ?area2 ; wikibase:quantityUnit ?unit2 ] .
  service wikibase:label { bd:serviceParam wikibase:language \"ro,en\" } 
} 
order by desc(?area2)
 Try it! I added an edited version above. As some added preferred rank to p31-statements on these items, not all countries appeared. Also, to ensure you get same unit for area, I added the format in meter. --- Jura 11:18, 30 December 2018 (UTC) Thanks Jura1! I understand the first change, but I'm not sure about the second. It returns some weird results for Russia, especially if you drop the \"DINSTINCT\".--Strainu (talk) 12:16, 30 December 2018 (UTC) I would add the filters ; MINUS { ?country wdt:P576 _:b2. } # remove items with P576 (dissolved, abolished or demolished) as a main property MINUS { ?country wdt:P582 _:b3. } Bouzinac (talk) 14:10, 30 December 2018 (UTC) It has three values. The easy fix is to comment out the line with (wdt:P2046) to avoid combining them with ?area2 they don't belong (done above). One could also use p:P2046 and map it correctly. --- Jura 08:07, 31 December 2018 (UTC) Items used: country (Q6256)   , Europe (Q46)   Properties used: continent (P30)   , dissolved, abolished or demolished date (P576)   , instance of (P31)   , area (P2046)   , applies to part (P518)   """@en;
  dcterms:isPartOf <https://www.wikidata.org//wiki/Wikidata:Request_a_query/Archive/2019/01>;
  dcterms:license <https://creativecommons.org/licenses/by-sa/4.0/>;
  sh:prefixes _:genid-4e694113159d4e3db4a1a913894a81d838942-wikidata_prefixes;
  schema:target <https://query.wikidata.org/sparql/>;
  sh:select """PREFIX wikibase: <http://wikiba.se/ontology#>
PREFIX wdt: <http://www.wikidata.org/prop/direct/>
PREFIX wd: <http://www.wikidata.org/entity/>
PREFIX psn: <http://www.wikidata.org/prop/statement/value-normalized/>
PREFIX ps: <http://www.wikidata.org/prop/statement/>
PREFIX pq: <http://www.wikidata.org/prop/qualifier/>
PREFIX p: <http://www.wikidata.org/prop/>
PREFIX bd: <http://www.bigdata.com/rdf#>
SELECT DISTINCT ?country ?countryLabel (ROUND(COALESCE(?area3, ?area2)/1000000) as ?area_km2) ?part ?partLabel
{
  ?country p:P31/ps:P31 wd:Q6256 .
  ?country wdt:P30 wd:Q46 .
  ?country p:P2046 / psn:P2046 [ wikibase:quantityAmount ?area2  ] .
  OPTIONAL { ?country p:P30 [ pq:P518 ?part ; ps:P30 wd:Q46 ] .
            ?part p:P2046 / psn:P2046 [ wikibase:quantityAmount ?area3  ] .
            }
  MINUS { ?country wdt:P576 [] }
  SERVICE wikibase:label { bd:serviceParam wikibase:language \"[AUTO_LANGUAGE],en\". }
}
ORDER by desc(?area_km2)""" .
